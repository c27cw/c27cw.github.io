import{l as e}from"./config.PnxCS6Ib.chunk.js";const r=Math.floor(Date.now()/1e3);function o(r={}){if("serviceWorker"in navigator){if(!function(){const{hostname:e,searchParams:r}=new URL(window.location.href),o="true"===r.get("service_worker"),t="false"===r.get("service_worker"),s=/^(pr\.|localhost|127.0.0.1)/.test(e);return!!o||!t&&!s}())return void navigator.serviceWorker?.getRegistrations().then((r=>r.forEach((r=>r.unregister().catch((o=>e.warn("Could not unregister service worker:",o.name,o,r))))))).catch((r=>e.warn("Could not get service worker registrations:",r.name,r)));const o=void 0!==navigator.serviceWorker?.controller?.state;r.noPreCache?o||s("/service-worker.js?no_precache"):s("/service-worker.js")}}let t;function s(o){const s=new URL(o,window.location.href);void 0!==t&&navigator.serviceWorker.removeEventListener("message",t),t=o=>{if("get-client-info"===o.data&&o.ports&&o.ports[0])try{o.ports[0].postMessage({version:"2024.8.0.0",buildSha:"47734b8da66",ageSec:Math.floor(Date.now()/1e3)-r,crossOriginIsolated:window.crossOriginIsolated})}catch(t){e.error("FAILED to reply to get-client-info message")}},navigator.serviceWorker.addEventListener("message",t),navigator.serviceWorker.startMessages();const n=window.OVERRIDE_SERVICE_WORKER_VERSION;n&&s.searchParams.append("override_version",n),navigator.serviceWorker.register(s,{updateViaCache:"none"}).catch((r=>{e.warn("Error during service worker registration:",r)}))}export{o as r};
//# sourceMappingURL=RegisterServiceWorker.1HkJ9wLp.chunk.js.map
