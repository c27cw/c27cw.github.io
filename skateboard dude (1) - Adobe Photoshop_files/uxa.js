var CS_CONF={"projectId":4451,"status":1,"hostnames":["adobe.com","photoshop.com","marketo.com","qualtrics.com","adobelr.com","dc.stage.acrobat.com","stage.acrobat.adobe.com","video.tv.adobe.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.clicktale.net","recordingDomain":"r.clicktale.net","useMalkaPipeline":1,"ed":"l.clicktale.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"tt_blade_[a-z0-9]+Marquee","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":".*www(.stage)?.adobe.com\\/(apps|home).*","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"DUAL_COLLECTION","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[".modal-payment"]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"apiErrors":{"validCustomHeaders":[],"plainCustomHeaders":[],"validUrls":[],"configurableApiErrorRules":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.clicktale.net","malkaRecordingDomain":"k-aus1.clicktale.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","dualCollectionTagDomain":"clicktale.net","ptcDomain":"cdnssl.clicktale.net","ptcPartition":"www20","ptcGuid":"df7e164d-c711-4376-a4c8-8b364d648be0","ptcSha512":"SYNBWDJoaGSd3cx2uLzYgsCeEU5ctjFqi5CnJWFSP9isBSzdf+uZgLHs1HEYIqEyHZCl8cxy6ahSZg/Bz1BvsA==","ptcSnapshotPath":"ss/4451/df7e164d-c711-4376-a4c8-8b364d648be0/16"};
var CS_INTEGRATIONS_CONF = {"qualtrics":{},"adobe-target":{}};
/* integration-qualtrics 2.19.0 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-cap","version":"2.19.0","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",t,e.message])}}function a(e){return"object"==typeof e&&null!==e}function o(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);var r,s=n(0),c=s.name,u=s.version,d=function(e){var t,n,a,o;if(i((function(){var i=e.name;a=e.version;var r=i.replace("@contentsquare/integration-","");t=r+"-"+a;var s="-contentsquare";o=new RegExp(s+"$").test(r),n=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(s="-cap",o=new RegExp(s+"$").test(r),n=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:n,snippetVersion:a}}(s);d&&(r=d.parameterName,c=d.snippetBuildName,u=d.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Qualtrics - v"+u);var e=!1;window.self!=window.top&&(e=CS_CONF.iframesTracking);var t=function(e,t){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}(r,"settings"),n=!1,s=1;t&&(t.indexOf("sendArtificialPageviews")>-1&&(n=!0),t.indexOf("setReplayLinkToFirstPV")>-1&&(s=0));var d=!1;function l(e,t,i,a){e="FB_QT_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),d&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),a&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+a])}function p(){for(var e=0,t=document.domain,n=t.split("."),i="_cs_tld"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function f(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function _(){var e={contentsquare_integration:f("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):self!=top&&window.top.postMessage(e,"*")}function S(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!e){var g="";if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?g=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(g=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{var m=document.location.search;m.indexOf("CSID=")>-1?g=o("CSID"):CS_CONF.ptcDomain&&m.indexOf("CT_UID=")>-1?g=o("CT_UID"):window._cs_integration_qualtrics_csid&&(g=decodeURIComponent(_cs_integration_qualtrics_csid))}if(g&&"null"!=g){var v=g.split("~"),y=v[0],I=v[1],b=v[2],C=v[3],D=p();y&&I&&b&&(C?document.cookie="_cs_optout="+C+";domain="+D+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+D+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+y+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+I+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+b+";domain="+D+";path=/;SameSite=None;Secure")}}var w="";function h(t){if(!e){var n=f("_cs_s");if(n&&n.indexOf(".T.")>-1)var i=setInterval((function(){(n=f("_cs_s"))&&-1===n.indexOf(".T.")&&(clearInterval(i),_())}),500);else _()}setTimeout((function(){if(d=_uxa.push(["isRecording"])){var e=function(e,t,n){e||(e="missingFromDynamicSnippet");var i=t;if(isNaN(i)&&(t=0),n){var a=n.sessionKey.split("."),o=n.projectId,r=a[0],s=a[1],c=n.pageNumber,u=c-t;return t>=c&&(u=c),0===i&&(u=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+o+"&uu="+r+"&sn="+s+"&pvid="+u+"&recordingType=cs&vd="+e}}("qt",s,t);if(e&&Qualtrics.SurveyEngine){var n=Qualtrics.SurveyEngine,i="";CS_CONF.ptcDomain&&(i="ClicktaleSpecificRecording",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)),i="ContentsquareReplayLink",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)}}}),500)}if(window.Page?w=!1:window.q&&(w=!0),_uxa.push(["afterPageView",function(e){i((function(){h(e)}),c)}]),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){var t=e.detail.key,n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),l(t,n)}}),c)})),!1===w&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){var k=Page.runtime.ED.SurveyID,T=Page.getSessionId().replace("FS_","R_");l("Feedback Displayed","Survey ID : "+k);var O=!1,x=!1,N=!1,E=[];function P(){for(var e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e),n=0;n<t.length;n++){var i=Qualtrics.SurveyEngine.QuestionInfo[t[n]].Selector;if(i&&"TB"!=i){x=!0;break}}}function F(){i((function(){P(),O||(O=!0,l("Feedback Accepted","Survey ID : "+k,0,"cs_qualtrics=feedback_accepted_"+k)),setTimeout((function(){x&&!N&&!1===Page.runtime.FailedValidation&&(N=!0,l("Feedback Submitted","Survey ID : "+k,"etr","cs_qualtrics=feedback_submitted_"+k),l("Feedback Response ID",T))}),2e3);for(var e=Page._questionRenderers,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]].runtime;if(i&&i.Selector&&i.QuestionText&&i.Displayed){var a=i.QuestionText;if("NPS"===i.Selector&&i.Selected){var o=parseInt(i.Selected);E.includes(t[n]+"~~~"+o)||(E.push(t[n]+"~~~"+o),l("NPS Rating - "+t[n]+" - "+k+" - "+a,o))}if("STAR"===i.Selector)for(var r=i.Choices,s=Object.keys(r),c=0;c<s.length;c++){var u=r[s[c]].Display;if(r[s[c]].Value){var d=parseInt(r[s[c]].Value);E.includes(t[n]+" ("+(c+1)+")~~~"+d)||(E.push(t[n]+" ("+(c+1)+")~~~"+d),l("Star Rating - "+t[n]+" ("+(c+1)+") - "+k+" - "+u,d))}}if("SAVR"===i.Selector||"SAHR"===i.Selector)if((g=i.Selected)&&i.Choices)(m=i.Choices[g].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+k,"AID"+m)));if("MAVR"===i.Selector&&i.Choices){var p=i.Choices,f=Object.keys(p);for(c=0;c<f.length;c++){if(p[f[c]].Selected)(m=p[f[c]].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+k,"AID"+m)))}}if("Likert"===i.Selector&&i.Choices){var _=i.Choices,S=Object.keys(_);for(c=0;c<S.length;c++){var g,m;if(g=_[S[c]].Selected)if(!E.includes(t[n]+"~~~"+g))(m=_[S[c]].ID)&&(E.push(t[n]+"~~~"+g),l(t[n]+" - "+k+" - AID"+m,g))}}}}setTimeout((function(){document.getElementById("NextButton")||l("Feedback Completed","Survey ID : "+k,0,"cs_qualtrics=feedback_completed_"+k)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}),c)}P(),Qualtrics.SurveyEngine.addOnPageSubmit(F)}else if(!0===w&&q.appData&&q.appData.setup&&q.appData.setup.survey&&q.appData.setup.survey.id&&q.appData.session&&q.appData.session.id){k=q.appData.setup.survey.id,T=q.appData.session.id.replace("FS_","R_");l("Feedback Displayed","Survey ID : "+k);N=!1;function F(){N||(N=!0,l("Feedback Submitted","Survey ID : "+k,"etr","cs_qualtrics=feedback_submitted_"+k),l("Feedback Response ID",T)),setTimeout((function(){document.getElementById("next-button")||l("Feedback Completed","Survey ID : "+k,0,"cs_qualtrics=feedback_completed_"+k)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}Qualtrics.SurveyEngine.addOnPageSubmit(F)}}else if(!e){function R(){var e=f("_cs_id"),t=f("_cs_c"),n=f("_cs_optout");return e+"~"+Q+"~"+t+"~"+n}var Q;function A(e){function t(){var e=R();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if((Q=f("_cs_s"))&&Q.indexOf(".T.")>-1)var n=setInterval((function(){(Q=f("_cs_s"))&&-1===Q.indexOf(".T.")&&(clearInterval(n),t())}),500);else t()}function h(e){A()}window.addEventListener("message",(function(e){var t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){var e=t.contentsquare_integration;if(window.CS_CONF&&CS_CONF.allowSubdomains){var n=p();document.cookie="_cs_s="+S(e)+";domain="+S(n)+";path=/"}else document.cookie="_cs_s="+S(e)+";path=/";A()}),c),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){var t={message:"Contentsquare_QT_Integration_Launch",user_values:R()};e.source.postMessage(t,"*")}),c))})),_uxa.push(["afterPageView",function(e){i((function(){h()}),c)}])}}),c)}]);/* integration-adobe-target 3.6.4 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-cap","version":"3.6.4","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function a(e){return"object"==typeof e&&null!==e}function i(e,n,t){if((t=t||window)&&n&&e){var r=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,r||(r=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,p=u.version,s=function(e){var n,t,a,i;if(r((function(){var r=e.name;a=e.version;var o=r.replace("@contentsquare/integration-","");n=o+"-"+a;var u="-contentsquare";i=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:n,parameterName:t,snippetVersion:a}}(u);s&&(o=s.parameterName,c=s.snippetBuildName,p=s.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Target - v"+p);var e=function(e,n){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,"customObjectName");e&&(e=e.trim());var n=[];function t(e){for(var t=0;t<e.length;t++){var r=e[t],a="",i="";r.CampaignName&&r.RecipeName?(a=r.CampaignName,i=r.RecipeName):r.campaign&&r.experience?(a=r.campaign,i=r.experience):r["activity.name"]&&r["experience.name"]&&(a=r["activity.name"],i=r["experience.name"]),n.length&&n.indexOf(a+"~~~~"+i)>-1&&(a="",i=""),a&&i&&(n.push(a+"~~~~"+i),u=i,o="AB_AT_"+(o=a),_uxa.push(["trackDynamicVariable",{key:o,value:u}]))}var o,u}function u(n){e||(e="ttMETA"),function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)i(e,n,t);else{var a=t,o=0;const e=function(){a=o>0?a[r[o-1]]:window,++o>=r.length?i(r[o-1],n,a):i(r[o-1],e,a)};e()}}(e,(function(){setTimeout((function(){r((function(){t(window[e])}),c)}),500)}))}window.adobe&&adobe.target&&adobe.target.event&&document.addEventListener(adobe.target.event.REQUEST_SUCCEEDED,(function(e){e&&e.detail&&e.detail.responseTokens&&t(e.detail.responseTokens)})),_uxa.push(["afterPageView",function(e){r((function(){u()}),c)}])}),c)}]);!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return pt},getRequestParameters:function(){return mt}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return Xu}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(n){window[s.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),o("csNode",s.nodeProperties,t.Node.prototype,"get"),o("csElement",s.elementProperties,t.Element.prototype,"get"),o("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),o("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),o("csEvent",s.eventProperties,t.Event.prototype,"get"),o("csNavigator",s.navigatorProperties,t.navigator,"value")}function o(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(s||o in i)&&(window["".concat(t+o)]=e(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function h(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return h("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(je){h("Critical","failed to copy references from window: ".concat(je.message))}function c(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return 1===t.nodeType}function v(t){return 3===t.nodeType}function l(t){return f(t)&&"a"===t.localName}function d(t){return function(t){return f(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function w(t){return f(t)&&"img"===t.localName}function y(t){return f(t)&&"style"===t.localName}function p(t){return f(t)&&"input"===t.localName}function m(t){return f(t)&&"textarea"===t.localName}function g(t){return f(t)&&"script"===t.localName}function A(t){return f(t)&&"ownerSVGElement"in t}function S(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function E(t){return 9===t.nodeType}function b(t){return S(t)&&"host"in t&&"mode"in t}var R=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function T(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return O(n)&&csArray.prototype.push.call(i,N),{ancestors:i,selectionRoot:n}}function O(t){return H.isValidElement(t)}var k=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,I=9;function C(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return k.call(t,n)}))}var _=[/\d{4}/,/^ember\d+$/],x="@",P="data-cs-override-id",M="data-cs-dynamic-id";function L(t,n,i,r){var s=r.dynamicIdRegex||null,e=r.dynamicElementNameRegex,u=c(t);e&&(e.test(t.localName)&&(u=csString.prototype.replace.call(u,e,"$1".concat(x))));if(function(t,n){var i=D(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&U(P,i,n)}(t,i)){var o=D(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(P,'="').concat(o,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,s=i.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(U(e,u,n))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,s=i.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(k.call(t,e)&&j(e,n))return e}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==D(t)}(t)&&!function(t,n,i){return t.hasAttribute(M)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(_,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&U("id",t,n)}(n,i)}(t,v,i,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var s=r[i];if(k.call(t,s))return s}return}(t,r);if(l){var d=function(t,n,i){if(t===N||t.nodeType===I)return 0;for(var r=0,s=n.previousElementSibling;s;)k.call(s,i)&&(r+=1),s=s.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===N||t.nodeType===I)return 0;for(var r=i.dynamicElementNameRegex,s=!!(null==r?void 0:r.test(n.localName)),e=c(n),u=0,o=n.previousElementSibling;o;)(c(o)===e||s&&(null==r?void 0:r.test(o.localName)))&&!C(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function D(t){return t.getAttribute(P)}function U(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function j(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var H,q=11;function z(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return B(r,i);var s=L(r,t[0],n,i),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(B(o,i)).concat(e)}var h=z(t,n,i);return"".concat(h?"".concat(h,">"):"").concat(e)}function B(t,n){if(t===N)return"|detached|";if(t.host){var i=T(t.host),r=i.ancestors,s=i.selectionRoot;return"".concat(z(r,s,n),"|shadow-root|")}return t.nodeType===q?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return"";if(!n(e))return t.INVALID_ELEMENT;var u=T(e);return z(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return{path:"",firstAnchorParent:null};if(!n(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return O(n)&&csArray.prototype.push.call(i,N),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(e),o=u.firstAnchorParent;return{path:z(u.ancestors,u.selectionRoot,s),firstAnchorParent:o}}}(H||(H={})),window.CSPathComputation=window.CSPathComputation||H;var V=function(t,n){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},V(t,n)};function F(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}V(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var G=function(){return G=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},G.apply(this,arguments)};function J(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}function W(t,n,i,r){return new(i||(i=Promise))((function(s,e){function u(t){try{h(r.next(t))}catch(t){e(t)}}function o(t){try{h(r.throw(t))}catch(t){e(t)}}function h(t){var n;t.done?s(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}h((r=r.apply(t,n||[])).next())}))}function K(t,n){var i,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function o(e){return function(o){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(t,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}}Object.create;function Y(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var X=Number.MAX_SAFE_INTEGER||9007199254740991;function $(){}function Z(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Q(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var tt=34164e6,nt={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=X),Math.floor(Math.random()*t)}},it="function"==typeof Symbol?Symbol("json"):null;var rt,st,et=it?function(t){if(t[it])return t[it];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+et(t[0]),i=1;i<t.length;i++)n+=","+et(t[i]);return n+"]"}return t[it]=csJSON.stringify(t)}:csJSON.stringify,ut=function(){function t(t){var n,i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||tt,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=G({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=G({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=G(G({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.i(),"://").concat(this.staticResourceManagerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var s=r[0],e=r[1];n.u(s,e)}}))},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),ot=function(){function t(t,n){this.g=t,this.A=n}return t.prototype.init=function(){this.S=this.g!==this.g.top,this.R=this.A.isWebView&&this.g===this.g.top,this.A.iframesTracking&&this.S||this.R?this.N=!1:this.N=!0},t.prototype.isInIframeContext=function(){return this.S},t.prototype.isTopWindowTracker=function(){return this.N},t.prototype.isInWebViewContext=function(){return this.R},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(rt||(rt={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(st||(st={}));var ht=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return G(G({},t),n)})):{}},t}(),ct=function(t){function n(n,i){return t.call(this,n,i)||this}return F(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.T(t);var n=st.toQuery(t);this.O(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.O=function(t){var n=new window.Image(1,1);n.onload=$,n.onerror=$,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.T=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(ht),at=function(){function t(t,n){this.I=t,this.C=n}return t.prototype.init=function(){this._=new ct(this.I.getLoggerUri()),this._.setRequestParametersProviders(this,this.C)},t.prototype.send=function(t){this.P=t,this._.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),ft=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,vt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,lt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",dt=new RegExp("(ey".concat(lt,"\\.ey").concat(lt,"\\.").concat(lt,")"),"g"),wt=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&vt.test(t)?csString.prototype.replace.call(t,ft,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,dt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),yt="13.56.0";function pt(){return yt}function mt(){return{v:yt}}var gt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function At(){return Math.floor(gt()/1e3)}function St(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Et(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var bt=function(){function t(t,n){this.M=t,this.L=n}return t.prototype.getRequestParameters=function(){return G(G({d:"".concat(gt()),p:this.L.anonymizeEmail(window.location.href)},this.M.getRequestParameters()),mt())},t}();function Rt(t){return kt(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Nt(t){return t===parseInt(t,10)}function Tt(t){return kt(t)&&("string"==typeof t||t instanceof csString)}function Ot(t){return"object"==typeof t}function kt(t){return void 0!==t}function It(t){return kt(t)&&null!==t}function Ct(t){return"function"==typeof t}function _t(t){return t instanceof Element}function xt(t){return t instanceof Error}function Pt(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Mt,Lt,Dt="snippet-",Ut="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(Mt||(Mt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Lt||(Lt={}));var jt=function(){function t(t,n,i){var r;this.D=n,this.L=new wt,this.U=Lt[rt.warn],this.U=Lt[t.minLogLevel||rt.warn],this._=i||new at(t,new bt(t,this.L)),this.j=((r={})[rt.debug]=[],r[rt.warn]=[],r[rt.error]=[],r[rt.critical]=[],r),this.H={implementation:{},dynamic:{}},this._.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=rt.warn),this.q(i,n)){csArray.prototype.push.call(this.j[i],n||"");var r={message:this.B(t,n),stacktrace:this.V(t),app:"uxa",level:i};this._.send(r)}},t.prototype.B=function(t,n){var i=xt(t)?this.L.anonymizeEmail(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.V=function(t){return xt(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.F()):this.F()},t.prototype.F=function(){var t=this.D.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.D.getSessionService(),r=i&&i.getSession(),s={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.q=function(t,n){if(Lt[t]<this.U)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Ut,0)))return this.G(n,Mt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Dt,0)))return this.G(n,Mt.DYNAMIC);var i=this.j[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.G=function(t,n){return t in this.H[n]?!(this.H[n][t]>=5)&&(this.H[n][t]+=1,!0):(this.H[n][t]=1,!0)},t}(),Ht=document.createElement("a"),qt=/(:443|:80)$/;function zt(t){return Ht.href=t,Ht.href}function Bt(t,n){return new csURL(t,n).href}function Vt(t){var n=Jt(t);return null===n?"":decodeURIComponent(n.hostname)}function Ft(t,n){return csArray.prototype.some.call(n,(function(n){return Et(t,".".concat(n))||t===n||""===n}))}function Gt(t){return csString.prototype.replace.call(t,qt,"")}function Jt(t){return St(t,"http://")||St(t,"https://")?(Ht.href=t,{hash:Ht.hash,host:Gt(Ht.host),hostname:Ht.hostname,href:Ht.href,origin:Ht.origin?Ht.origin:Gt("".concat(Ht.protocol,"//").concat(Ht.host)),pathname:(n=Ht.pathname,"/"===n[0]?n:"/".concat(n)),port:Ht.port,protocol:Ht.protocol,search:Ht.search}):null;var n}var Wt,Kt,Yt,Xt,$t="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Wt||(Wt={})),function(t){t.Parent="parent",t.Child="child"}(Kt||(Kt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(Yt||(Yt={})),function(t){t.buildBaseMessage=function(t,n,i,r){var s={type:t,from:n,pid:i,signature:$t};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,n,i,r){var s=Vt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===$t&&t.data.from===n&&t.data.pid===i&&Ft(s,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Xt||(Xt={}));var Zt=function(){function t(t){this.M=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=rt.warn);var r={message:t,errorCode:n,level:i},s=Xt.buildBaseMessage(Yt.ChildLogMessage,Kt.Child,this.M.projectId);s.content=r,Xt.sendPostMessage(window.parent,"*",s)},t}(),Qt=function(){function t(){}return t.prototype.setContext=function(t,n){this.J=t,this.W=n},t.prototype.getVisitorService=function(){return this.J},t.prototype.getSessionService=function(){return this.W},t}(),tn=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"==typeof t.filename&&csArray.prototype.some.call(tn,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))&&nn.error("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var nn=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(tn,t)},t.setStrategy=function(n){t.K=n},t.computeIsActive=function(n){t.Y=nt.boolean(n),t.Y?t.X=nt.boolean(10):t.X=!1},t.isLoggingActive=function(){return t.Y},t.getStrategy=function(){return t.K},t.debug=function(n,i){void 0===i&&(i=""),t.Y&&this.K.send(n,i,rt.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.Y&&this.K.send(n,i,rt.warn)},t.error=function(n,i){void 0===i&&(i=""),t.Y&&this.K.send(n,i,rt.error)},t.critical=function(n,i){void 0===i&&(i=""),t.Y&&this.K.send(n,i,rt.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=n.apply(void 0,r);return kt(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return i.error(n,t)})):e}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.X},t.Y=!1,t.X=!1,t}(),rn={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};var sn,en,un,on,hn=function(t){return function(n,i,r){var s=(null==i?void 0:i.toString())||"",e=t||"".concat(n.constructor&&n.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var s=n.apply(void 0,i);return kt(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return rn.error(n,t)})):s}catch(n){try{rn.error(n,t)}catch(t){}}}}(e,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,s,e,u,o){var h=encodeURIComponent("".concat(i)),c=s===t.CURRENT_DOMAIN?void 0:s,a=r(e),f=a?";expires=".concat(a.toUTCString()):"",v=It(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(h).concat(f).concat(";path=/").concat(v);return kt(u)&&u!==un.NotSet&&(l="".concat(l,";SameSite=").concat(u)),kt(o)&&o===on.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return Rt(t)?new csDate(gt()+t):t}function s(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),un.None,on.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=n(e);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),h=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(e,h=csArray.prototype.join.call([csArray.prototype.pop.call(o),h],"."),h,void 0,t,r),u=n(e);return s(e,h),h}}(sn||(sn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(en||(en={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(un||(un={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(on||(on={}));var cn=function(){function t(t,n,i){this.M=t,this.$=n,this.Z=i,this.tt=!1,this.nt=un.NotSet,this.it=on.No}return t.prototype.getSameSiteFlag=function(){return this.nt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.st},t.prototype.getRootDomain=function(){return this.et},t.prototype.init=function(){if(!this.M.cookielessTrackingEnabled){var t=this.ut(),n=this.ot();this.tt=this.ht(t,n),this.tt?(this.nt=t,this.it=n):this.M.secureCookiesEnabled&&"https:"===this.$.getUrlProtocol()&&(this.it=on.Yes),this.et=this.ft(),this.st=this.vt(this.et)}},t.prototype.ht=function(n,i){return!en.browserIsSafariV12()&&(sn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!sn.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(sn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ut=function(){return"http:"===this.$.getUrlProtocol()?un.Lax:this.Z.isSameSiteNoneSecureNeeded()||this.M.crossDomainTracking?un.None:un.Lax},t.prototype.ot=function(){return"http:"===this.$.getUrlProtocol()?on.No:this.M.secureCookiesEnabled||this.M.crossDomainTracking||this.Z.isSameSiteNoneSecureNeeded()?on.Yes:on.No},t.prototype.isSameSiteSupported=function(){return this.tt},t.prototype.set=function(t,n,i){var r=sn.toExpireDate(i);sn.set(t,n,this.st,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.st;sn.remove(t,i)},t.prototype.ft=function(){var t=this.Z.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?un.None:void 0,i=t?on.Yes:void 0;return sn.getRootDomain(n,i)},t.prototype.vt=function(t){return this.M.allowSubdomains?t:sn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),an="_cs_t",fn=function(){function t(t,n){this.lt=t,this.M=n,this.wt=!1,this.yt=!1}return t.prototype.init=function(){if(!this.M.cookielessTrackingEnabled&&this.lt.isTopWindowTracker()&&"cookie"in document){if(!this.lt.isInIframeContext()&&sn.isCookiePresent())return this.wt=!0,void(this.yt=!1);if(sn.set(an,"1",sn.CURRENT_DOMAIN),null!==sn.get(an))return this.wt=!0,this.yt=!1,void sn.remove(an,sn.CURRENT_DOMAIN);sn.set(an,"1",sn.CURRENT_DOMAIN,void 0,un.None,on.Yes),null!==sn.get(an)&&(this.wt=!0,this.yt=!0,sn.remove(an,sn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.wt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.yt},t}(),vn=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.gt()},t.gt=function(){try{var t={},n=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return csJSON.stringify(n)===csJSON.stringify(i)&&csJSON.stringify(t)===csJSON.stringify(i)}catch(t){return!1}},t}();var ln,dn=function(){function t(t,n){this.M=t,this.Z=n}return t.prototype.canTrack=function(){return this.M.isProjectActive()&&this.At()&&this.St()&&this.Et()},t.prototype.canTrackInChild=function(){return this.M.isProjectActive()&&this.bt()&&(this.St()||this.Rt())},t.prototype.Et=function(){return this.M.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.Z.areCookiesEnabled()},t.prototype.St=function(){return Ft(window.location.hostname,this.M.hostnames)},t.prototype.At=function(){return!this.Nt()&&this.Tt()&&vn.check()},t.prototype.bt=function(){return!this.Nt()&&this.Ot()&&vn.check()},t.prototype.Rt=function(){return Z(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Nt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.Tt=function(){return this.kt()&&!!window.localStorage},t.prototype.Ot=function(){return this.kt()},t.prototype.kt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),wn=function(){function t(t){var n=this;this.It=!1,this.Ct=new Map,this._t=new Map,this.xt=new Map,this.Pt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new u("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u={endpoint:a};i&&(u.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(u.recoveryStorage=o);var h=new s(u);t.set(a,h),h.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p=r.endpoint,f=r.queryParams;(h=t.get(p))&&h.setQueryParams(f);break;case"RemoveQueryParams":p=r.endpoint,f=r.queryParams,(h=t.get(p))&&h.removeQueryParams(f);break;case"Send":p=r.endpoint;var y=r.payload;f=r.queryParams,(h=t.get(p))&&h.send(y,f);break;case"Abort":p=r.endpoint,(h=t.get(p))&&h.abort();break;case"SetHeader":p=r.endpoint;var d=r.headerName,l=r.headerValue;(h=t.get(p))&&h.setRequestHeader(d,l);break;case"SetTimeout":var v=r.endpoint,S=r.timeout;(h=t.get(v))&&h.onTimeout((function(){var t={type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),s=o.done,a=o.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.Mt=this.Lt(i),this.It=!0,this.Dt()&&(this.Ut=new ReadableStream({start:function(t){n.jt=t}}),this.Mt.postMessage(this.Ut,[this.Ut]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.It=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Pt,this.Mt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Pt,this.jt.enqueue(t)},t.prototype.Lt=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker,e=new r([t],{type:"application/javascript"}),u=i.createObjectURL(e);nn.whiteListFilename(u);var o=new s(u);return o.onmessage=function(t){var i=t.data,r=i.type,s=i.endpoint;if(i.WORKER_SIGNATURE===n.Pt)if("onLoad"===r){var e=t.data.response;(u=n.Ct.get(s))&&u(e)}else if("onError"===r){e=t.data.response;(u=n._t.get(s))&&u(e)}else if("onTimeout"===r){var u;(u=n.xt.get(s))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.Ct.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this._t.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.xt.set(t,n)},t.prototype.isSupported=function(){return this.It},t.prototype.Dt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),yn=function(){function t(t){this.Ht={},this.qt=t.endpoint,this.zt=t.networkWorker,this.Bt=t.compressionOutputType,this.Vt=t.useRetry,this.zt.postMessage({type:"CreatePostRequest",endpoint:this.qt,compressionOutputType:this.Bt,useRetry:this.Vt})}return t.prototype.setQueryParams=function(t){var n=this;this.zt.postMessage({type:"SetQueryParams",endpoint:this.qt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Ht[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.removeQueryParams=function(t){var n=this;this.zt.postMessage({type:"RemoveQueryParams",endpoint:this.qt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.Ht[t]}))},t.prototype.send=function(t,n){this.zt.postMessage({type:"Send",endpoint:this.qt,payload:t,queryParams:n})},t.prototype.abort=function(){this.zt.postMessage({type:"Abort",endpoint:this.qt})},t.prototype.onLoad=function(t){this.zt.registerOnLoadCallback(this.qt,t)},t.prototype.onError=function(t){this.zt.registerOnErrorCallback(this.qt,t)},t.prototype.setRequestHeader=function(t,n){this.zt.postMessage({type:"SetHeader",endpoint:this.qt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.zt.registerOnTimeoutCallback(this.qt,t),this.zt.postMessage({type:"SetTimeout",endpoint:this.qt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(ln||(ln={}));var pn,mn,gn,An=function(t){this.onError=t},Sn=function(){function t(t){var n=this;this.Ht={},this.Ft={},this.Gt=function(t){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.metadata,u=s.events;n.send(u,e)}},this.qt=t.endpoint,this.Jt=t.compressionOpts,this.Wt=t.recoveryStorage,this.Wt&&this.Wt.recover(this.Gt)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.Ht[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.Ht[t]})):this.Ht={}},t.prototype.send=function(t,n){var i=this,r=n||G({},this.Ht),s=!("ct"in r),e="string"!=typeof t&&!this.Kt(t);"ct"in r||(this.Jt&&s?r.ct=this.Jt.compressionType:r.ct=ln.UNCOMPRESSED);var u=e?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),h="".concat(this.qt,"?").concat(o);this.Jt&&s&&"string"==typeof u?this.Jt.compressor(u,this.Jt.compressionOutputType,(function(t){return i.Yt(h,r,t)})):this.Yt(h,r,u)},t.prototype.onLoad=function(t){this.Xt=t},t.prototype.onError=function(t){this.$t=t},t.prototype.onTimeout=function(t,n){this.Zt=t,this.Qt=n},t.prototype.abort=function(){this.tn&&this.tn()},t.prototype.setRequestHeader=function(t,n){this.Ft[t]=n},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.Kt=function(t){return t&&void 0!==t.byteLength},t.prototype.Yt=function(t,n,i){var r=this,s=new XMLHttpRequest,e=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");s.open("POST",t),s.onload=function(){if(r.Wt&&r.Wt.recover(r.Gt),r.Xt){var t={params:n,responseText:s.responseText,status:s.status};r.Xt(t)}},s.onerror=function(){r.Wt&&r.Wt.save({key:e,metadata:n,events:i}),r.$t&&r.$t({params:n})},this.Qt&&this.Zt&&(s.timeout=this.Qt,s.ontimeout=function(){r.Zt()}),this.tn=function(){return s.abort()},Object.keys(this.Ft).forEach((function(t){s.setRequestHeader(t,r.Ft[t])})),s.send(i)},t}(),En=function(){function t(t){this.nn=t,this.zt=new wn(this.nn)}return t.prototype.create=function(t,n,i,r){if(this.zt.isSupported()&&n)return new yn({networkWorker:this.zt,endpoint:t,compressionOutputType:i,useRetry:!!r});var s=i?{compressor:this.nn.compress,compressionOutputType:i,compressionType:this.nn.algorithm}:void 0;return new Sn({endpoint:t,compressionOpts:s,recoveryStorage:r})},t}(),bn=function(){function t(t,n,i,r,s){this.J=t,this.W=n,this.rn=i,this.en=r,this.M=s}return t.prototype.get=function(){return{exclusion:this.rn.getAppliedTrackingDraw(),visitor:this.J.getVisitor(),session:this.W.getSession(),cvars:this.en.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.rn.exclude(this.M),this.J.removeVisitor(),this.W.removeSession(),this.en.removeCustomVariablesSession()},t.prototype.include=function(t){this.rn.removeExclusion(),this.J.setVisitor(t.visitor),t.session?this.W.setSession(t.session):this.W.removeSession(),t.cvars?this.en.setCustomVariableSession(t.cvars):this.en.removeCustomVariablesSession()},t}(),Rn="_cs_id",Nn=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,Tn=function(){function t(t,n,i){this.M=t,this.un=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.cn=t},t.prototype.onCookieToRemove=function(t){this.an=t},t.prototype.get=function(){var n;return(n=this.M.cookielessTrackingEnabled?this.hn.getItem(Rn):this.un.get(Rn))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.M.cookielessTrackingEnabled)this.hn.setItem(Rn,r);else{var s=new csDate(n.expires);this.un.set(Rn,r,s),null===(i=this.cn)||void 0===i||i.call(this,Rn,r,s)}},t.prototype.remove=function(){var t;this.M.cookielessTrackingEnabled?this.hn.removeItem(Rn):(this.un.delete(Rn),null===(t=this.an)||void 0===t||t.call(this,Rn))},t.prototype.handleSubdomainChange=function(){if(!this.M.cookielessTrackingEnabled){var t=this.get();t&&(this.M.allowSubdomains?this.un.delete(Rn,cn.CURRENT_DOMAIN):this.un.delete(Rn,this.un.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4],o=n[5],h=n[6];return{id:i,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(h)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return Nn.test(t)},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(pn||(pn={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(mn||(mn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(gn||(gn={}));var On,kn="_cs_s",In=18e5,Cn=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,_n=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(On||(On={}));var xn,Pn=function(){function t(t,n,i){this.M=t,this.un=n,this.hn=i,this.fn=null,this.vn=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.ln();return t.dn(i)}var r=this.wn(),s=r.sessionString,e=r.status,u=t.dn(s);if(e!==On.EXPIRED)return u;if(this.M.cookielessTrackingEnabled)return null;var o=this.ln();if(!o)return null;var h=csString.prototype.split.call(o,_n);if(!t.yn(h))return o;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.mn(a),u},t.prototype.onCookieToSet=function(t){this.cn=t},t.prototype.onCookieToRemove=function(t){this.an=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=In);var r=gt()+n,s=this.toString(t);s+="".concat(_n).concat(r),this.gn(s,r),this.M.cookielessTrackingEnabled?this.hn.setItem(kn,s):(this.un.set(kn,s,n),null===(i=this.cn)||void 0===i||i.call(this,kn,s,n))},t.prototype.remove=function(){var t;this.M.cookielessTrackingEnabled?this.hn.removeItem(kn):(this.un.delete(kn),null===(t=this.an)||void 0===t||t.call(this,kn)),this.An()},t.prototype.handleSubdomainChange=function(){if(!this.M.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.M.allowSubdomains?this.un.delete(kn,cn.CURRENT_DOMAIN):this.un.delete(kn,this.un.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],_n)},t.prototype.gn=function(t,n){this.fn={sessionString:t,expires:n}},t.prototype.wn=function(){return this.fn?this.fn&&gt()<=this.fn.expires?{sessionString:this.fn.sessionString,status:On.FOUND}:{sessionString:this.fn.sessionString,status:On.EXPIRED}:{sessionString:this.ln(),status:On.NOT_FOUND}},t.prototype.An=function(){this.fn=null},t.prototype.mn=function(t){this.fn&&(this.fn.expires=t,this.vn=!0)},t.prototype.isCacheRefreshed=function(){return this.vn},t.prototype.resetCacheRefreshed=function(){this.vn=!1},t.prototype.ln=function(){if(this.M.cookielessTrackingEnabled){var t=this.hn.getItem(kn);return!t||this.Sn(t)?null:t}return this.un.get(kn)},t.prototype.Sn=function(t){var n=csString.prototype.split.call(t,_n),i=parseInt(n[n.length-1],10);return!isNaN(i)&&gt()>i},t.yn=function(t){return 13===t[t.length-1].length},t.dn=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,Cn))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.dn(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,_n),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:mn.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return Cn.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?Tn.fromString(t._cs_id):null,session:t._cs_s?Pn.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(xn||(xn={}));var Mn,Ln="_cs_ex",Dn=2592e6,Un=/^[0-9]+$/,jn=function(){function t(t,n,i){this.M=t,this.un=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.cn=t},t.prototype.onCookieToRemove=function(t){this.an=t},t.prototype.get=function(){return this.M.cookielessTrackingEnabled?Number(this.hn.getItem(Ln)):Number(this.un.get(Ln))},t.prototype.set=function(t){var n;this.M.cookielessTrackingEnabled?this.hn.setItem(Ln,t):(this.un.set(Ln,t,Dn),null===(n=this.cn)||void 0===n||n.call(this,Ln,t,Dn))},t.prototype.remove=function(){var t;this.M.cookielessTrackingEnabled?this.hn.removeItem(Ln):(this.un.delete(Ln),null===(t=this.an)||void 0===t||t.call(this,Ln))},t.isValidExclusionString=function(t){return Un.test(t)},t}(),Hn="_cs_cvars",qn=function(){function t(t,n,i){this.M=t,this.un=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.cn=t},t.prototype.onCookieToRemove=function(t){this.an=t},t.prototype.get=function(){return this.M.cookielessTrackingEnabled?this.hn.getItem(Hn):this.un.get(Hn)},t.prototype.set=function(t){var n;this.M.cookielessTrackingEnabled?this.hn.setItem(Hn,t):(this.un.set(Hn,t),null===(n=this.cn)||void 0===n||n.call(this,Hn,t))},t.prototype.remove=function(){var t;this.M.cookielessTrackingEnabled?this.hn.removeItem(Hn):(this.un.delete(Hn),null===(t=this.an)||void 0===t||t.call(this,Hn))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||Tn.isValidVisitorString(t._cs_id))&&(!t._cs_s||Pn.isValidSessionString(t._cs_s))&&(!t._cs_ex||jn.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||qn.isValidCustomVarString(t._cs_cvars)))}}(Mn||(Mn={}));var zn,Bn,Vn,Fn,Gn=function(){function t(t,n){this.En=t,this.bn=n}return t.prototype.retrieve=function(n,i){var r=this;this.Rn=i,this.retrievedStates=[],this.Nn=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.Tn(t)})),t.getXdframeOrigin),this.En.onMessage((function(t){r.On(t)})),this.En.onTimeout((function(){r.kn()})),this.En.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Nn,t.getXdframeUrl),(function(t){return r.En.open(t)}))},t.prototype.On=function(t){if(this.In(t)){var n=t.data;if(!Mn.isValid(n))throw this.En.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.Cn()&&(this.En.stop(),this.Rn(csArray.prototype.map.call(this.retrievedStates,xn.fromRaw)))},t.prototype.kn=function(){nn.warn("xdframe: all messages not received")},t.prototype.In=function(t){return csArray.prototype.indexOf.call(this.Nn,t.origin)>-1},t.prototype.Cn=function(){return this.retrievedStates.length===this.Nn.length},t.prototype.Tn=function(t){return!Q(this.bn.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Jn=function(){function t(){var t=this;this._n=3e3,this.xn=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.Pn=t},t.prototype.onTimeout=function(t){this.Zt=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.xn),this.Mn=window.setTimeout((function(){t.Zt()}),this._n)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.xn),window.clearTimeout(this.Mn),this.Pn=$,this.Zt=$},t.prototype.handleMessage=function(t){this.Pn(t)},J([hn("XdframeMessage")],t.prototype,"handleMessage",null),t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT"}(zn||(zn={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(Bn||(Bn={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Vn||(Vn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(Fn||(Fn={}));function Wn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function Kn(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}function Yn(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}var Xn=function(){return Xn=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},Xn.apply(this,arguments)};function $n(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}Object.create;function Zn(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function Qn(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var s=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=gt();if(e-s>r)return s=e,t.apply(this,n)}}var e,u=[],o=null,h=0,c=function(){h=gt(),o=null,e=t.apply(i,u)},a=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var a=gt(),f=r-(a-h);return i=null!=this?this:window,u=Zn([],n,!0),f<=0||f>r?(h=a,e=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(c,f)),e};return a.cancel=function(){o&&(window.clearTimeout(o),h=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),c())},a}var ti,ni,ii=function(t){return function(n,i,r){r.value=Qn(r.value,t)}};!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(ti||(ti={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(ni||(ni={}));var ri=function(){function t(){}return t.isEmpty=function(){return 0===t.Ln.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,Y([t.Ln],n,!1))},t.getAll=function(){return t.Ln},t.clear=function(){t.Ln=[]},t.Ln=[],t}(),si=50,ei=.1;var ui=!1;var oi=[],hi=[];var ci=function(t){return function(n,i,r){var s=r.value;r.value=function(){if(!ui)return r.value=s,s.apply(this,arguments);!function(t){csArray.prototype.push.call(oi,t),performance.mark("".concat(t,"-start"))}(t);var n=s.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=ei&&csArray.prototype.push.call(hi,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(oi),0===oi.length&&(i>si&&ri.add(hi),hi=[])}}(t),n}}},ai=function(t){return function(n,i,r){var s=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!ui)return r.value=s,s.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var e=s.apply(this,n);return e.then((function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>si&&ri.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)})),e}}};function fi(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function vi(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&vi.enabled||r.call(this,t,n)}}}vi.enabled=!0;var li,di=!!window.chrome,wi="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(It(t)&&function(t){try{if(It(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&_t(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(wi))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(wi,"]"))}}(li||(li={}));var yi=function(){function t(n,i,r,s){var e=this;this.Dn=n,this.Un=i,this.jn=r,this.Hn=s,this.qn=!1,this.zn=new Set,this.Bn=[],this.Vn=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.Fn=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.Gn=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.Dn.on(t.Jn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.Dn.on(t.Wn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.Dn.on(t.Kn,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.Dn.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.Dn.on(t.Wn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.Yn=[{type:"change",listener:this.Dn.on(t.Kn,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.Dn.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.Dn.on(t.Wn,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}}];var u=function(t){if(!Tt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===u||u&&u>=16)&&csArray.prototype.push.call(this.Yn,{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}})}return t.prototype.init=function(){var t;this.Xn(),this.$n(),this.Zn(),this.Qn(),null===(t=this.Hn)||void 0===t||t.onInputNodeToEncrypt(this.ti.bind(this)),this.ni()},t.prototype.ni=function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");if(null==t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.checked;n.apply(this,[t]),r&&i.qn&&i.ii(this)},Object.defineProperty(HTMLInputElement.prototype,"checked",t)}},t.prototype.Qn=function(){var t=this;this.Un.onDocumentIdentified((function(n){t.si(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Bn,t)},t.prototype.ti=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.Bn,(function(i){return i(t,n)}))},t.prototype.start=function(){this.qn=!0,this.ei()},t.prototype.stop=function(){this.qn=!1,this.ui()},t.prototype.$n=function(){var t;this.oi()&&(t=csArray.prototype.push).call.apply(t,Y([this.Gn],this.Vn,!1))},t.prototype.Xn=function(){var t;this.hi()&&(t=csArray.prototype.push).call.apply(t,Y([this.Gn],this.Fn,!1))},t.prototype.si=function(t){E(t)?csArray.prototype.forEach.call(this.Gn,(function(t){return Wn(t)})):this.zn.has(t)||(this.zn.add(t),csArray.prototype.forEach.call(this.Yn,(function(n){var i=n;i.boundElement=t,Wn(i)})))},t.prototype.ci=function(t){E(t)?csArray.prototype.forEach.call(this.Gn,(function(t){return Kn(t)})):(this.zn.delete(t),csArray.prototype.forEach.call(this.Yn,(function(n){var i=n;i.boundElement=t,Kn(i)})))},t.prototype.oi=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.hi=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.ui=function(){var t=this;this.ci(document),this.zn.forEach((function(n){return t.ci(n)}))},t.prototype.ei=function(){this.ai(t.Jn),this.fi(),this.vi(),this.li(),this.ai(t.Wn)},t.prototype.ai=function(t){for(var n,i=window.csquerySelectorAll[document.nodeType].call(document,t),r=0;r<i.length;r+=1){var s=i.item(r);(null===(n=s.value)||void 0===n?void 0:n.length)>0&&this.wi(s,!0)}},t.prototype.fi=function(){var t=li.getScrollContainer()||document,n=this.Un.getId(t);if(n){var i=this.yi(t);if(0!==i.top||0!==i.left){var r={type:zn.SCROLL,args:[n,i.left,i.top],date:gt()};this.ti(r,!0)}}},t.prototype.vi=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.pi(t[n],!0)},t.prototype.li=function(){for(var n=window.csquerySelectorAll[document.nodeType].call(document,t.Kn),i=0;i<n.length;i+=1)this.ii(n[i],!0)},t.prototype.yi=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!this.jn.isSensitive(t)&&!this.jn.isSensitiveChild(t)){var n=this.Un.getId(t);if(n){var i=this.yi(t),r={type:zn.SCROLL,args:[n,i.left,i.top],date:gt()};this.ti(r)}}},t.prototype.mouseOverListener=function(t){if(!this.jn.isSensitiveChild(t.target)){var n=this.Un.getId(t.target);if(n){var i={type:zn.MOUSE_OVER,args:[n],date:gt()};this.ti(i)}}},t.prototype.clickListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.CLICK,args:[i],date:gt()};this.ti(r)}}},t.prototype.inputCheckableListener=function(t){var n=fi(t);this.ii(n)},t.prototype.ii=function(t,n){if(void 0===n&&(n=!1),!this.jn.isSensitive(t)&&!this.jn.isSensitiveChild(t)){var i=this.Un.getId(t);if(i){var r={type:zn.INPUT_CHECKABLE,args:[i,t.checked],date:gt()};this.ti(r,n)}}},t.prototype.inputSelectListener=function(t){var n=fi(t);this.pi(n)},t.prototype.pi=function(t,n){if(void 0===n&&(n=!1),!this.jn.isSensitive(t)&&!this.jn.isSensitiveChild(t)){var i=this.Un.getId(t);if(i){var r={type:zn.INPUT_SELECT,args:[i,t.selectedIndex],date:gt()};this.ti(r,n)}}},t.prototype.inputTextListener=function(t){var n=fi(t);this.wi(n)},t.prototype.wi=function(t,n){var i,r,s;if(void 0===n&&(n=!1),!this.jn.isSensitive(t)&&!this.jn.isSensitiveChild(t)){var e=this.Un.getId(t);if(e){var u=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.Hn)||void 0===r?void 0:r.shouldEncrypt(t))null===(s=this.Hn)||void 0===s||s.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:gt()});else{var o="number"===t.type?"0":"",h={type:zn.INPUT_TEXT,args:[e,csString.prototype.replace.call(u,/\S/g,o)],date:gt()};this.ti(h,n)}}}},t.prototype.keyUpListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r=this.mi[t.key];if(void 0!==r){var s={type:zn.KEY_UP,args:[i,r],date:gt()};this.ti(s)}}}},t.prototype.keyDownListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r=this.mi[t.key];if(void 0!==r){var s={type:zn.KEY_DOWN,args:[i,r],date:gt()};this.ti(s)}}}},t.prototype.copyListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.CLIPBOARD_COMMAND,args:[i,ni.COPY],date:gt()};this.ti(r)}}},t.prototype.cutListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.CLIPBOARD_COMMAND,args:[i,ni.CUT],date:gt()};this.ti(r)}}},t.prototype.pasteListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.CLIPBOARD_COMMAND,args:[i,ni.PASTE],date:gt()};this.ti(r)}}},t.prototype.pointerUpListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.POINTER_UP,args:[t.pointerId,t.pointerType,Yn(t.clientX,1),Yn(t.clientY,1),i,t.button],date:gt()};this.ti(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:zn.POINTER_MOVE,args:[t.pointerId,t.pointerType,Yn(t.clientX,1),Yn(t.clientY,1)],date:gt()};this.ti(n)},t.prototype.pointerDownListener=function(t){var n=fi(t);if(!this.jn.isSensitiveChild(n)){var i=this.Un.getId(n);if(i){var r={type:zn.POINTER_DOWN,args:[t.pointerId,t.pointerType,Yn(t.clientX,1),Yn(t.clientY,1),i,t.button,{pageX:Yn(t.pageX,1),pageY:Yn(t.pageY,1)}],date:gt()};this.ti(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:zn.TOUCH_START,args:[r.identifier,Yn(r.clientX,1),Yn(r.clientY,1)],date:gt()};this.ti(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:zn.TOUCH_MOVE,args:[r.identifier,Yn(r.clientX,1),Yn(r.clientY,1)],date:gt()};this.ti(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:zn.TOUCH_END,args:[r.identifier,Yn(r.clientX,1),Yn(r.clientY,1)],date:gt()};this.ti(s)}},t.prototype.Zn=function(){this.mi={},this.mi[" "]=ti.SPACE,this.mi.Spacebar=ti.SPACE,this.mi.Backspace=ti.BACKSPACE,this.mi.Enter=ti.ENTER,this.mi.Delete=ti.DELETE,this.mi.ArrowUp=ti.ARROWUP,this.mi.ArrowDown=ti.ARROWDOWN,this.mi.ArrowLeft=ti.ARROWLEFT,this.mi.ArrowRight=ti.ARROWRIGHT,this.mi.Up=ti.ARROWUP,this.mi.Down=ti.ARROWDOWN,this.mi.Left=ti.ARROWLEFT,this.mi.Right=ti.ARROWRIGHT,this.mi.CapsLock=ti.CAPSLOCK,this.mi.Shift=ti.SHIFT,this.mi.Tab=ti.TAB,this.mi.Escape=ti.ESCAPE,this.mi.Esc=ti.ESCAPE,this.mi.End=ti.END,this.mi.Alt=ti.ALT,this.mi.Control=ti.CTRL,this.mi.Meta=ti.META},t.Jn=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.Kn=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.Wn='input[type="number"]',J([ci("RecordingPageEvents.start")],t.prototype,"start",null),J([hn("scroll")],t.prototype,"scrollListener",null),J([hn("mouseOver"),vi(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(fi(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),J([hn("click"),vi()],t.prototype,"clickListener",null),J([hn("checkable")],t.prototype,"inputCheckableListener",null),J([hn("select")],t.prototype,"inputSelectListener",null),J([hn("text")],t.prototype,"inputTextListener",null),J([hn("Event handler type: keyup")],t.prototype,"keyUpListener",null),J([hn("Event handler type: keydown")],t.prototype,"keyDownListener",null),J([hn("Event handler type: copy")],t.prototype,"copyListener",null),J([hn("Event handler type: cut")],t.prototype,"cutListener",null),J([hn("Event handler type: paste")],t.prototype,"pasteListener",null),J([hn("Event handler type: pointerup"),vi()],t.prototype,"pointerUpListener",null),J([hn("Event handler type: pointermove"),vi(),ii({wait:33,ignoreThrottledCalls:!0})],t.prototype,"pointerMoveListener",null),J([hn("Event handler type: pointerdown"),vi()],t.prototype,"pointerDownListener",null),J([hn("Event handler type: touchstart"),vi()],t.prototype,"touchStartListener",null),J([hn("Event handler type: touchmove"),vi()],t.prototype,"touchMoveListener",null),J([hn("Event handler type: touchend"),vi()],t.prototype,"touchEndListener",null),t}();function pi(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),s=0;s<i;s+=1)r[s]=t[s];return r}function mi(t,n){for(var i=t.length,r=new csArray(i),s=0;s<i;s+=1)r[s]=n(t[s]);return r}function gi(t,n){for(var i=[],r=0,s=0;s<t.length;s+=1)for(var e=n(t[s]),u=0;u<e.length;u++)i[r++]=e[u];return i}function Ai(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var s=0,e=t.next();!e.done;)n(e.value,s++),e=t.next()}function Si(t,n){for(var i=t.length,r=[],s=0;s<i;s+=1){var e=t[s];n(e)&&csArray.prototype.push.call(r,e)}return r}var Ei,bi,Ri,Ni=function(){function t(t,n,i,r,s,e,u){void 0===u&&(u=document);var o=this;this.gi=t,this.Ai=n,this.Si=i,this.Ei=r,this.Un=s,this.jn=e,this.bi=u,this.qn=!1,this.Ri=function(t){o.Ei.emitInitialDomDone(t)},this.Ni=function(t){var n=o.Un.getId(t.target);if(n){var i=t.target.getBoundingClientRect();if(i.width!==t.target.__contentsquare_width||i.height!==t.target.__contentsquare_height){t.target.__contentsquare_width=i.width,t.target.__contentsquare_height=i.height;var r={args:[n,null,"style","width:".concat(i.width,"px !important;height:").concat(i.height,"px !important;")],date:gt(),type:zn.MUTATION_ATTRIBUTE};o.Ti(r)}}},this.Ai.onCharacterDataMutation((function(t){o.Oi(t)})),this.Ai.onAttributesMutation((function(t){o.jn.isSensitive(t.target)&&"src"===t.attributeName&&w(t.target)&&(o.jn.unidentifySensitiveNodes(t.target),o.jn.identifySensitiveNodes(t.target)),o.ki(t)})),this.Ai.onChildListMutation((function(t,n){Ai(t.addedNodes,(function(t){o.jn.identifySensitiveNodes(t),o.Un.identifyNodes(t,n)})),o.Ii(t,n),Ai(t.removedNodes,(function(t){o.jn.unidentifySensitiveNodes(t)}))})),this.Ai.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(o.jn.identifySensitiveNodes(t.target),o.Un.identifyNodes(csElementshadowRoot.apply(t.target)),o.Ci(t))})),this.jn.onSensitiveElementResize(this.Ni)}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.isStarted=function(){return this.qn},t.prototype.start=function(){this.isStarted()||(this.qn=!0,this.Ai.start(),this._i())},t.prototype.stop=function(){this.isStarted()&&(this.qn=!1,this.jn.unidentifySensitiveNodes(this.bi),this.jn.disconnectResizeObserver(),this.Ai.stop())},t.prototype.flushEvents=function(){this.Ai.flushPendingMutations()},t.prototype._i=function(){this.Ei.emitInitialDomStart(),this.jn.identifySensitiveNodes(this.bi),this.Un.identifyNodes(this.bi),this.gi.serializeInitialDom(this.bi,this.Ri)},t.prototype.Ci=function(t){if(!this.jn.isSensitive(t.target)&&!this.jn.isSensitiveChild(t.target)){var n=this.gi.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:zn.ATTACH_SHADOW};this.Ti(i)}}},t.prototype.ki=function(t){if(!this.jn.isSensitiveChild(t.target)&&!this.jn.isSensitiveAttribute(t.target,t.attributeName)){var n=this.gi.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:zn.MUTATION_ATTRIBUTE};this.Ti(i),this.Si.scanAttribute(t.target,t.attributeName)}}},t.prototype.Oi=function(t){var n=t.target.parentElement;if(!n||!this.jn.isSensitive(n)&&!this.jn.isSensitiveChild(n)){var i=this.gi.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:zn.MUTATION_CHARACTER_DATA};this.Ti(r),this.Si.scanText(t.target)}}},t.prototype.Ii=function(t,n){var i=this;if(!this.jn.isSensitive(t.target)&&!this.jn.isSensitiveChild(t.target)){var r=this.gi.serializeMutationChildList(t,n);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:zn.MUTATION_REMOVE};i.Ti(r)})),csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:zn.MUTATION_INSERT};i.Ti(r)}))}}},t}(),Ti=function(){function t(t){this.xi=t,this.Pi=0}return t.prototype.addString=function(t){this.Pi+=2*t.length},t.prototype.addArrayBuffer=function(t){this.Pi+=t.byteLength},t.prototype.isThresholdReached=function(){return this.Pi>this.xi},t.prototype.reset=function(){this.Pi=0},t}(),Oi=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.Mi=t,this.Li=new Ti(n)}return t.prototype.addEvent=function(t){this.Li.addString(et(t)),csArray.prototype.push.call(this.Mi,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Mi.length;n+=1){if(this.Mi[n].date>t.date)break}csArray.prototype.splice.call(this.Mi,n,0,t)},t.prototype.eventsCount=function(){return this.Mi.length},t.prototype.clearEvents=function(){this.Li.reset(),this.Mi=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Li.isThresholdReached()},t.prototype.getEvents=function(){return this.Mi},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Mi,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.Mi=r,i},t.prototype.stringifyEvents=function(){return et(this.Mi)},t.prototype.Di=function(t){t.type===zn.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},J([ci("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),ki=function(){function t(){this.Ui=1}return t.prototype.getCurrentIndex=function(){return this.Ui},t.prototype.increment=function(){this.Ui+=1},t.prototype.reset=function(){this.Ui=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.Ui)}},t}(),Ii=function(){function t(){}return t.prototype.emit=function(n,i){var r="".concat(t.ji,".").concat(n),s=t.createEvent(r,{detail:i});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Hi();if(null===i)return null;var r=n.bubbles,s=void 0!==r&&r,e=n.cancelable,u=void 0!==e&&e,o=n.detail;return i.initCustomEvent(t,s,u,o),i},t.Hi=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.ji="cs.tracking",t}(),Ci=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),_i=function(t){function n(n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R,N,T,O){void 0===N&&(N=[]);var k=t.call(this)||this;return k.M=n,k.qi=i,k.zi=r,k.Bi=s,k.Vi=e,k.Fi=u,k.Gi=o,k.Ji=h,k.Wi=c,k.Ki=a,k.Yi=f,k.W=v,k.Si=l,k.Xi=d,k.$i=w,k.Zi=y,k.Qi=p,k.tr=m,k.Hn=g,k.nr=A,k.ir=S,k.rr=E,k.er=b,k.ur=R,k.hr=N,k.cr=T,k.ar=O,k.vr=0,k.lr=0,k.wr=0,k.yr=new Ii,k.pr={allowFromQuotaService:!0,allowFromSerialization:!0},k.mr=Qn((function(){k.qi.eventsCount()>0&&k.gr()}),2e3),k.Ar=function(t){return k.processBrowserEvent(t)},k.Sr=function(t){return k.Er(t)},k.br=0,k.Rr=0,k.Nr=!1,k.Tr=!1,k.Or=function(t){k.rr.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},k}return F(n,t),n.prototype.init=function(){this.kr(),this.ir.onLoad(this.Or),this.ir.onError(this.Or)},n.prototype.kr=function(){var t,n,i,r,s,e,u=this;this.Fi.onEvent(this.Ar),this.Gi.onEvent(this.Ar),this.Wi.onEvent(this.Ar),this.Ji.onEvent(this.Sr),this.Si.onEvent(this.Ar),this.Xi.onEvent(this.Ar),Ai(this.hr,(function(t){return t.onEvent(u.Ar)})),this.Ki.onEvent(this.Sr),null===(t=this.Hn)||void 0===t||t.onTextNodeToEncrypt(this.Ar),null===(n=this.Hn)||void 0===n||n.onApiErrorToEncrypt((function(t){u.Ir(t)})),this.er.onEvent(this.Ar),null===(i=this.Hn)||void 0===i||i.onUserIdentifierToEncrypt(this.Ar),this.nr.onEvent(this.Ar),null===(r=this.ur)||void 0===r||r.onResourceHash(this.Ar),null===(s=this.cr)||void 0===s||s.onEvent(this.Ar),null===(e=this.ar)||void 0===e||e.onEvent(this.Ar)},n.prototype.isRecording=function(){return this.W.hasValidSession()&&this.isStarted},n.prototype.isMutationTrackerStarted=function(){return this.Gi.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.pr.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.pr.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.pr.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.pr.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.pr.allowFromQuotaService&&this.pr.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.Cr(t)},n.prototype.onIframeDetailedApiError=function(t){this._r(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Er(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.Yi.isCurrentPageviewValid()&&this.Pr(t)},n.prototype.Er=function(t){this.Yi.isSessionValid()&&this.Pr(t)},n.prototype.Pr=function(t){this.qi.addEvent(t),this.qi.isThresholdReached()?this.pushEvents():this.qi.isFull()&&this.mr(),this.Mr(t)},n.prototype.Mr=function(t){this.M.emitDebugEvents&&this.yr.emit("recordingEvent",G(G({},t),{typeName:zn[t.type]}))},n.prototype.onStart=function(){var t,i,r=this;this.initStates(),this.Vi.start(),this.nr.start(),Ai(this.hr,(function(t){return t.start()})),this.Xi.start(),this.Gi.start(),this.Fi.start(),this.Wi.start(),this.Ki.start(),this.er.start(),this.$i&&this.Zi&&this.$i.subscribe(n.Lr,(function(t){return r.Cr(t)})),this.Qi&&this.tr&&this.Qi.subscribe(n.Lr,(function(t){return r._r(t)}),{detailedEvent:!0}),this.M.emitDebugEvents&&this.yr.emit("replayRecordingStarted"),this.M.performanceTimingOptions&&(this.M.performanceTimingOptions.withResource&&(null===(t=this.cr)||void 0===t||t.start()),this.M.performanceTimingOptions.withNavigation&&(null===(i=this.ar)||void 0===i||i.start()))},n.prototype.onStop=function(){this.Vi.stop(),this.Fi.stop(),this.Gi.stop(),this.Wi.stop(),this.Ji.stop(),this.$i&&this.$i.unsubscribe(n.Lr),this.Qi&&this.Qi.unsubscribe(n.Lr),Ai(this.hr,(function(t){return t.stop()})),this.Ki.stop(),this.nr.stop(),this.er.stop(),this.Tr=!1},n.prototype.clearStates=function(){this.Gi.flushEvents(),this.mr.cancel(),this.pushEvents(),this.ir.removeQueryParams()},n.prototype.initStates=function(){this.br=gt(),this.Bi.reset(),this.vr=0,this.lr=0,this.wr=0,this.ir.setQueryParams(this.zi.getRequestParameters())},n.prototype.pushEvents=function(){var t;null===(t=this.ur)||void 0===t||t.flushResourceHashEvent(),Ai(this.hr,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.qi.eventsCount()>0&&(this.isStarted?this.gr():this.qi.clearEvents())},n.prototype.gr=function(){if(this.canSendEvents()){var t=this.qi.getEvents();this.Rr=t[t.length-1].date;var n=this.Bi.getCurrentIndex();this.ir.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.ir.getQueryParams();this.rr.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.ir.getQueryParams(),t),this.ir.send(t),this.Bi.increment(),this.qi.clearEvents(),this.Dr&&this.Dr()}},n.prototype.addInitialDom=function(t){this.qi.addEventByTimestamp(t),this.Mr(t)},n.prototype._r=function(t){if(t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody){if(this.Hn)return void this.Hn.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Ir(t)},n.prototype.Ir=function(t){if(this.lr<n.Ur){var i={type:zn.API_ERROR,date:gt(),args:[this.tr.anonymize(t)]};this.Ar(i),this.lr=this.lr+1}},n.prototype.Cr=function(t){if(this.vr<n.jr){var i={type:zn.JAVASCRIPT_ERROR,date:gt(),args:[this.Zi.anonymize(t)]};this.Ar(i),this.vr=this.vr+1}},n.prototype.Hr=function(t){if(this.wr<n.qr){var i={type:zn.CUSTOM_ERROR,date:gt(),args:[t]};this.Ar(i),this.wr=this.wr+1}},n.prototype.zr=function(t){var i,r;this.isStarted&&(t===gn.ETR_SESSION?this.ir.setQueryParams(((i={})[n.Br]=n.Vr,i)):t===gn.ETR_PAGE&&this.ir.setQueryParams(((r={})[n.Fr]=n.Vr,r)))},n.prototype.clearEvents=function(){this.qi.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.Cr(t)},n.prototype.onCustomErrorEvent=function(t){this.Hr(t)},n.prototype.onPageEvent=function(t){this.Gr(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:gt(),keyId:this.M.encryptionPublicKeyId};null===(n=this.Hn)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.zr(n),this.Gr(t),this.pushEvents()},n.prototype.Gr=function(t){var i={type:zn.PAGE_EVENT,date:gt(),args:[{eventName:csString.prototype.slice.call(t,0,n.Jr)}]};this.qi.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:gt(),type:zn.UNANONYMIZED_CONSENT_GRANTED};this.qi.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=function(){var t={date:gt(),type:zn.UNANONYMIZED_CONSENT_WITHDRAWN};this.qi.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:gt(),type:zn.RECORDING_INFO_EVENT,args:[Bn.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.qi.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:gt(),type:zn.RECORDING_INFO_EVENT,args:[Bn.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.qi.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this.Nr=!0,this.Tr=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.ur?{isStarted:this.M.useStaticResourceManager&&this.ur.isSupported(),onlineAssets:{activated:this.ur.isOnlineAssetsActivated(),enabledOnNextPageview:this.Nr,enabledForChildrenOnNextStart:this.Tr}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.ur&&this.Nr&&(this.ur.enableOnlineAssets(),this.Tr=!0,this.Nr=!1)},n.prototype.onRecordingRequestSent=function(t){this.Dr=t},n.prototype.getRecordingStartTimestamp=function(){return this.br.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Rr.toString()},n.Lr="RecordingService",n.Jr=255,n.jr=20,n.Ur=20,n.qr=20,n.Fr="etrp",n.Br="etrs",n.Vr="1",J([ci("addInitialDom")],n.prototype,"addInitialDom",null),n}(Ci),xi=function(t){function n(n,i,r,s,e,u){void 0===u&&(u=[]);var o=t.call(this)||this;return o.qi=n,o.Wt=i,o.Wr=r,o.ir=s,o.zi=e,o.Kr=u,o.Yr=!1,o.Xr={},o.$r=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,e=r.events;o.Zr(s.rt)&&o.ir.send(e,s)}},o.Qr=function(){try{if(!o.Yr)return;o.ns();var t=G(G({},o.ir.getQueryParams()),o.zi.getRequestParameters());if(!o.Zr(t.rt))return;if(o.sendLastMessageBeacon(),0===o.qi.eventsCount())return;t.hlm="true";var n=o.qi.getEvents();t.let=n[n.length-1].date.toString(),o.Wt.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:G(G({},t),{datatype:"json"}),events:o.qi.stringifyEvents()})}catch(t){}},o}return F(n,t),n.prototype.onStart=function(){this.rs(),this.Xr={}},n.prototype.onStop=function(){this.ss()},n.prototype.recover=function(){this.Wt.recover(this.$r)},n.prototype.addBatchInProgress=function(t,n,i){this.Xr[t]={metadata:G({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.Xr[t]},n.prototype.blockSendingLastMessage=function(){this.Yr=!1},n.prototype.allowSendingLastMessage=function(){this.Yr=!0},n.prototype.sendLastMessageBeacon=function(){if(this.Yr){var t=this.ir.getQueryParams(),n=(t.ri,t.rst,t.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i}(t,["ri","rst","let"]));n.hlm="true",this.Wr.setQueryParams(n);var i=this.qi.extractEvents(zn.JAVASCRIPT_ERROR,zn.API_ERROR,zn.CUSTOM_ERROR);Ai(this.Kr,(function(t){var n,r=null===(n=t.getPendingEvents)||void 0===n?void 0:n.call(t);r&&Ai(r,(function(t){csArray.prototype.push.call(i,t)}))}));var r=i.length?et(i):"";this.Wr.send(r)}},n.prototype.rs=function(){window.addEventListener("pagehide",this.Qr)},n.prototype.ss=function(){window.removeEventListener("pagehide",this.Qr)},n.prototype.Zr=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,pn.TEMPORARILY_RECORDED)},n.prototype.ns=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.Xr),(function(n){var i=t.Xr[n],r=i.metadata,s=i.events;t.Wt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:G(G({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},J([hn("RecordingRecovery")],n.prototype,"recover",null),n}(Ci);!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&(f(n=t)&&csElementshadowRoot.apply(n)&&b(csElementshadowRoot.apply(n)))?t.shadowRoot:null;var n},t.getAllShadowHosts=function t(n){for(var i,r,s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,Zn([e,r],t(csElementshadowRoot.apply(r)),!1));return e}}(Ei||(Ei={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return Nt(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Nt(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(bi||(bi={})),function(t){var n="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return rn.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof Node," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var s,e=window.getComputedStyle(t);return!e||("none"===e.display||"hidden"===e.visibility||"collapse"===e.visibility||"0"===e.opacity||"opacity(0)"===e.filter||"0px"===e.width&&"0px"===e.height||(s=e.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(s)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return e(document,i,r)}function e(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var s=Ei.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,n,i):r}function u(t){var n=s(t);return null!==n&&(t===n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var s=t.getParentElement(i);return!(!s||s===i)&&n(s,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=pi(window.csquerySelectorAll[n.nodeType].call(n,t)),s=0,e=Ei.getAllShadowHosts(n);s<e.length;s++){var u=e[s],o=csElementshadowRoot.apply(u),h=pi(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,Zn([r],h,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var s=i(n);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var n=null,s=t;do{if(!r(s))break;n=s}while(s=i(s));return n},t.getTopElement=s,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,s=i.y+i.height/2;return t.getTopElementFromPoint(document,r,s)},t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+bi.windowOffsetX()<0||n.bottom+bi.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&u(t)},t.isInViewPort=u,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(f(n=t)&&"select"===n.localName||m(t)||p(t)||function(t){return f(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(Ri||(Ri={}));var Pi=/[^\s]/g;function Mi(t){return csString.prototype.replace.call(t,Pi,"a")}var Li=function(){function t(t,n,i,r){this.es=t,this.Un=n,this.us=i,this.Hn=r,this.hs=!1}return t.prototype.setAnonymization=function(t){this.cs=t},t.prototype.isDOMSerializationInProgress=function(){return this.hs},t.prototype.serializeInitialDom=function(t,n){if(this.es.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){nn.error(t)}));else{var i=this.fs(t);n(i)}},t.prototype.fs=function(t){return{args:[this.es.serialize(t,{withAnonymization:this.cs})],date:gt(),type:zn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:this.hs=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.es.startSerializeAsync(t,{withAnonymization:this.cs})];case 2:return[2,n.sent()];case 3:return this.hs=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n,i=this.Un.getId(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(v(r)&&(null===(n=this.Hn)||void 0===n?void 0:n.shouldEncrypt(r)))return this.Hn.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:Mi(r.data),date:t.date}),null;var s=[i,this.us.getAnonymizedText(this.cs,r,r.data)];return this.vs(this.es)&&this.isDOMSerializationInProgress()&&this.es.handleMutationCharacterData(t,s),s},t.prototype.serializeAttachShadowEvent=function(t){var n=this.Un.getId(t.target);return n?[n,this.es.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.Un.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,s=t.attributeNamespace,e=Ri.getAttributeNS(t.target,s,r);e&&(e=this.us.getAnonymizedAttributeValue(i,this.cs,r,e));var u=[n,s,r,e];return this.vs(this.es)&&this.isDOMSerializationInProgress()&&this.es.handleMutationAttribute(t.oldValue?this.us.getAnonymizedAttributeValue(i,this.cs,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.Un.getId(t.target);return i?this.vs(this.es)&&this.isDOMSerializationInProgress()?this.es.serializeMutationChildList(t,this.cs,n):{removedNodes:this.ls(t),addedNodes:this.ds(t,i,n)}:(Ai(t.addedNodes,(function(t){var i=n.get(t);i&&n.set(t,i-1)})),null)},t.prototype.vs=function(t){return t.isAsynchronous()},t.prototype.ls=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.Un.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.ds=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.Un.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],h=this.es.serialize(o,{excludedNodes:i,withAnonymization:this.cs}),c=i.get(o);c&&i.set(o,c-1),csArray.prototype.push.call(r,[n,s,h])}return r},J([ai("serializeDocumentAsync")],t.prototype,"serializeDocumentAsync",null),t}();function Di(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Ui(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Ui(n[0]))}function Ui(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var ji=function(t){return t};function Hi(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?ji:e,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return rn.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h,c,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=u(arguments),n=f.apply(this,arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=Di());try{s({result:n,context:this,args:t,callerName:i})}catch(t){rn.error(t)}}return n};(h=v).prototype=(c=f).prototype,Object.defineProperty(h,"toString",{value:function(){return c.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function qi(t,n,i){var r=!1,s=Object.getOwnPropertyDescriptor(t,n);if(s){if(!s.configurable)return rn.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,Xn(Xn({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=arguments,n=s.set.apply(this,t);if(r)try{i(this,t[0])}catch(t){rn.error(t)}return n}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}var zi,Bi,Vi=function(){function t(t,n,i,r){var s=this;this.Un=t,this.jn=n,this.Si=i,this.Vi=r,this.ws()&&(this.ys=qi(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return s.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.ps=this.Vi.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.gs=this.Vi.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.ys&&this.ys.activate()},t.prototype.stop=function(){var t,n;null===(t=this.ps)||void 0===t||t.call(this),null===(n=this.gs)||void 0===n||n.call(this),this.ys&&this.ys.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.As(t);if((null==i?void 0:i.ownerNode)&&(!f(i.ownerNode)||!this.jn.isSensitiveChild(i.ownerNode))){var r=this.Un.getId(i.ownerNode);if(r){var s=this.Ss(i.cssRules,t.parentRule),e={date:gt(),type:zn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,n]};this.Ti(e),this.Si.scanCssString(n)}}},t.prototype.As=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.Ss=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.ws=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!f(t.ownerNode)||!this.jn.isSensitiveChild(t.ownerNode))){var s=this.Un.getId(t.ownerNode);if(s){var e={date:gt(),type:zn.STYLESHEET_RULE_INSERT,args:kt(r)?[s,i,r]:[s,i]};this.Ti(e),this.Si.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!f(t.ownerNode)||!this.jn.isSensitiveChild(t.ownerNode))){var r=this.Un.getId(t.ownerNode);if(r){var s={date:gt(),type:zn.STYLESHEET_RULE_DELETE,args:[r,i]};this.Ti(s)}}},J([hn("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),J([hn("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),J([hn("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),Fi="data-cs-mask",Gi=function(){function t(t){this.jn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.jn.isSensitive(t)||this.Es(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.jn.isSensitive(t)&&!g(t)&&(csArray.prototype.push.call(n,this.bs(t)),t.hasAttribute(Fi)||csArray.prototype.push.call(n,document.createAttribute(Fi))),csArray.prototype.filter.call(n,(function(n){return!i.jn.isSensitiveAttribute(t,n.name)}))},t.prototype.Es=function(t){return b(t)&&this.jn.isSensitive(t.host)},t.prototype.bs=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),t.__contentsquare_height=n.height,t.__contentsquare_width=n.width,i},t}(),Ji=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Wi=null!==(zi=Ji(Element))&&void 0!==zi?zi:Ji(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(Bi||(Bi={}));var Ki=function(t){this.csId=t.__contentsquare_identifier,this.format=Bi.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Yi=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,Wi.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=1,r}return F(n,t),n}(Ki),Xi=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",P],$i=function(){function t(t,n){this.L=t,this.M=n,this.Rs=new Set,this.Ns=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(Xi,(function(n){t.Rs.add(n)})),csArray.prototype.forEach.call(this.M.whitelistedAttributes,(function(n){t.Rs.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(y(t)||this.Ts(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=s},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?Mi(r):this.L.anonymizeEmail(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(y(csNodeparentNode.apply(n)))return i;if(t&&this.Ts(csNodeparentNode.apply(n)))return this.L.anonymizeEmail(i)}return t?Mi(i):this.L.anonymizeEmail(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.Os(i)||A(t)?r:n&&p(t)&&("submit"===t.type||"button"===t.type)&&"value"===i?Mi(r):n?"":this.L.anonymizeEmail(r)},t.prototype.setWhitelistedElementsSelector=function(t){this.Ns=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Ns},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof Yi&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.Os=function(t){return this.Rs.has(t)},t.prototype.Ts=function(t){return f(t)&&(t.hasAttribute("data-cs-capture")||this.ks(t))},t.prototype.ks=function(t){return!!this.Ns&&k.call(t,this.Ns)},t}(),Zi=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Is=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Is,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Is,(function(t,n){return G(G({},n.getRequestParameters()),t)}),{})},t}();function Qi(t,n){var i,r,s,e,u=null,o=function(h){var c=gt();if(!h&&null!==u){var a=n-(c-u);if(a>0)return void(r=window.setTimeout(o,a))}var f=c-s;r=null,u=null,s=null,e=t.apply(void 0,Zn([f],i,!1))},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(i=Zn([],t,!0),!s)return s=gt(),r=window.setTimeout(o,n),e;u=gt()};return h.flushPending=function(){r&&(window.clearTimeout(r),o(!0))},h.cancel=function(){u=null,s=null,r&&(window.clearTimeout(r),r=null)},h}function tr(t){return void 0===t&&(t=0),function(n,i,r){var s=r.value,e=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(n,i)}),t))}}}var nr=function(){function t(t){var n=this;this.M=t,this.Cs=!1,this._s=Qi((function(){n.Cs=!1,n.xs()}),this.M.pendingInactivityTimeout)}return t.prototype.start=function(){this.Cs=!0,this._s()},t.prototype.stop=function(){this.Cs=!1,this._s.cancel()},t.prototype.trackActivity=function(){this.Cs||(this.Cs=!0,this.Ps()),this._s()},t.prototype.isUserActive=function(){return this.Cs},t.prototype.onActivityStopped=function(t){this.xs=t},t.prototype.onActivityResumed=function(t){this.Ps=t},t}(),ir=function(){function t(t,n,i){var r=this;this.bn=t,this.L=n,this.Ms=i,this.Ls=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.si(),this.triggerInitialEvents(),this.Ms&&(this.Ms.setOnScreenChangedCallback(this.Ti),this.Ms.start())},t.prototype.stop=function(){var t;this.ci(),null===(t=this.Ms)||void 0===t||t.stop()},t.prototype.si=function(){csArray.prototype.forEach.call(this.Ls,(function(t){return Wn(t)}))},t.prototype.ci=function(){csArray.prototype.forEach.call(this.Ls,(function(t){return Kn(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:zn.RESIZE,args:[bi.windowWidth(),bi.windowHeight()],date:gt()};this.Ti(n),null===(t=this.Ms)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:zn.HASH_CHANGE,args:[this.L.anonymizeEmail(this.bn.href)],date:gt()};this.Ti(t)},t.prototype.visibilityChangeListener=function(){var t={type:zn.VISIBILITY_CHANGE,args:[document.visibilityState],date:gt()};this.Ti(t)},J([hn("resize")],t.prototype,"resizeListener",null),J([hn("hashChange")],t.prototype,"hashChangeListener",null),J([hn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),rr=function(t){function n(n,i,r,s,e,u,o){var h=t.call(this)||this;return h.Ji=n,h.Gi=i,h.Ds=r,h.Us=s,h.gi=e,h.js=u,h.Ei=o,h.Hs=0,h}return F(n,t),n.prototype.init=function(){var t=this;this.Ji.onEvent((function(n,i){i||t.qs()})),this.Us.onRecordingRequestSent((function(){t.Hs+=1,t.zs()})),this.Ds.onActivityStopped((function(){t.zs()})),this.Ds.onActivityResumed((function(){t.Gi.isStarted()||t.Bs()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.qs()},n.prototype.onStart=function(){this.Ds.start()},n.prototype.onStop=function(){this.Ds.stop()},n.prototype.zs=function(){this.Gi.isStarted()&&!this.gi.isDOMSerializationInProgress()&&!this.Ds.isUserActive()&&this.Hs>=2&&this.Vs()},n.prototype.qs=function(){this.Ds.trackActivity(),this.Hs=0},n.prototype.Vs=function(){this.Gi.stop(),this.Ei.emitRecordingStatusChange()},n.prototype.Bs=function(){this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.Gi.start(),this.Ei.emitRecordingStatusChange()},n}(Ci);var sr=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function er(t,n){var i=t.replace(sr,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=(r||s).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var s=parseInt(i,16);return 55296<=s&&s<=57343||0===s||s>1114111?"":String.fromCodePoint(s)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(e)||e)+")"}));return i}function ur(t){var n=[];return er(t,(function(t){return n.push(t),t})),n}function or(t){return St(t,"data:")}function hr(t){return St(t,"#")}function cr(t){return!!t&&Et(t,".css")}function ar(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),s=r[0],e=r[1];return e?(Et(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),Zn([fr(s)],ar(e),!0)):[fr(s)]}function fr(t){return csString.prototype.split.call(t,/,$/)[0]}var vr,lr=function(){function t(){this.Fs=!0}return t.prototype.enable=function(){this.Fs||(this.Fs=!0)},t.prototype.disable=function(){this.Fs&&(this.Fs=!1)},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.onAsset=function(t){this.Gs=t},t.prototype.onStyleSheetFound=function(t){this.Js=t},t.prototype.serializeElementNode=function(t){this.Fs&&this.Ws(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.Fs&&this.Ks(t,n),n},t.prototype.scanAttribute=function(t,n){this.Ys(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&y(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.Xs(ur(t))},t.prototype.Ws=function(t){this.Ys(t)},t.prototype.Ks=function(t,n){var i=this;y(t)&&Ai(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.Ys=function(t,n){this.$s(t,n)||(this.Zs(t,n),this.Qs(t,n),this.te(t,n))},t.prototype.$s=function(t,n){var i,r,s;if(d(t)&&(!n||"href"===n)&&t.href){var e=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:e,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.Js)||void 0===r||r.call(this,u),null===(s=this.Gs)||void 0===s||s.call(this,u),this.ne(e),!0}return!1},t.prototype.ie=function(t){return!this.re(t)&&!or(t)&&!hr(t)},t.prototype.Zs=function(t,n){var i;if(w(t)){if(!n||"src"===n){var r=t.getAttribute("src");r&&this.ie(r)&&(this.ne(t.src),null===(i=this.Gs)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:r,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.se(t.srcset)}},t.prototype.Qs=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.se=function(t){this.Xs(ar(t))},t.prototype.te=function(t,n){var i,r;if((A(r=t)&&"image"===r.localName||function(t){return A(t)&&"use"===t.localName}(t)||function(t){return A(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var s=t.getAttribute("href")||t.getAttribute("xlink:href");if(s&&this.ie(s)){var e=zt(s);this.ne(e),null===(i=this.Gs)||void 0===i||i.call(this,{assetId:e,assetRawPath:s,assetBasePath:window.location.href})}}},t.prototype.Xs=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.re(t)})),(function(t){return!or(t)})),(function(t){return!hr(t)})),(function(t){return{rawUrl:t,absoluteUrl:zt(t)}})),(function(t){var i;n.Ti&&n.ne(t.absoluteUrl),null===(i=n.Gs)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})}))},t.prototype.ne=function(t){var n,i={date:gt(),type:zn.STATIC_RESOURCE_URL,args:[t]};null===(n=this.Ti)||void 0===n||n.call(this,i)},t.prototype.re=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(vr||(vr={}));var dr=function(){function t(t){this.ee=t.performance}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.ue()&&this.oe()},t.prototype.oe=function(){var t={args:this.he(),date:gt(),type:zn.PERFORMANCE_TIMINGS};this.Ti(t)},t.prototype.ue=function(){return!(!this.ee||!this.ee.timing)},t.prototype.he=function(){return[{performanceTiming:vr.REQUEST_START,timestamp:this.ee.timing.requestStart},{performanceTiming:vr.DOM_INTERACTIVE,timestamp:this.ee.timing.domInteractive},{performanceTiming:vr.TIME_ORIGIN,timestamp:this.ee.timeOrigin}]},t}(),wr=function(t){function n(n){var i=t.call(this)||this;return i.ce=n,i.ae=new Map,i}return F(n,t),n.prototype.init=function(){this.fe(),this.ve()},n.prototype.ve=function(){var t=this;this.le=new csMutationObserver((function(n){t.handleMutations(n)}))},n.prototype.fe=function(){var t=this;this.de()&&(this.we=Hi({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.ye()&&(this.pe=Hi({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.ge=t},n.prototype.onCharacterDataMutation=function(t){this.Ae=t},n.prototype.onAttributesMutation=function(t){this.Se=t},n.prototype.onAttachShadowMutation=function(t){this.Ee=t},n.prototype.observe=function(t,n){this.isStarted&&this.le.observe(t,n)},n.prototype.onStart=function(){this.we&&this.we.activate(),this.pe&&this.pe.activate()},n.prototype.onStop=function(){this.we&&this.we.deactivate(),this.pe&&this.pe.deactivate(),this.ce.clearQueue(),this.le.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.ce.runPendingTasks();var t=this.le.takeRecords();this.handleMutations(t,!0)}},n.prototype.de=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.ye=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=gt(),s=t.length>1?this.be(t):t;this.ce.isEmpty()&&this.ae.clear(),this.Re(s);for(var e=function(t){var e=s[t];e.date=r,u.ce.schedule((function(){i.processMutation(e,i.ae)}),n)},u=this,o=0;o<s.length;o+=1)e(o)},n.prototype.be=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e),o=n.get(r),h=Ri.getAttributeNS(r,s,e)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,h);else{var c=new Map;c.set(u,h),n.set(r,c)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.Ee({shadowRoot:n,date:gt(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.Se(t);break;case"characterData":this.Ae(t);break;case"childList":this.ge(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Re=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){Ai(t.addedNodes,(function(t){var i=n.ae.get(t);i?n.ae.set(t,i+1):n.ae.set(t,1)}))}))},J([hn("handleMutations")],n.prototype,"handleMutations",null),J([ci("handleAttachShadow")],n.prototype,"handleAttachShadow",null),J([ci("processMutation")],n.prototype,"processMutation",null),n}(Ci),yr=function(t){function n(n,i){var r=t.call(this,n)||this;return r.Un=i,r.Ne={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},r}return F(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Qn()},n.prototype.Qn=function(){var t=this;this.Un.onDocumentIdentified((function(n){t.observe(n,t.Ne)}))},n}(wr),pr=0;function mr(t){return"$$"+t+ ++pr}mr.asyncIterator="$$asyncIterator";var gr=void 0!==window.Symbol?window.Symbol:mr,Ar=function(){function t(){}return t.create=function(n,i){if(!t.isSupported())throw new Error("IntersectionObserver is not supported");if(i&&i.delay&&i.delay<100)throw new Error("Visibility delay should be > 100ms");return(null==i?void 0:i.trackVisibility)&&(n=t.Te(n)),new IntersectionObserver(n,i)},t.isSupported=function(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry},t.Te=function(t){return function(n,i){return t(mi(n,Sr),i)}},t}();function Sr(t){return t.isVisible||!Ri.isVisibleInViewportInForeground(t.target)?t:{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,rootBounds:t.rootBounds,target:t.target,time:t.time,isVisible:!0}}var Er="queueMicrotask"in window?window.queueMicrotask:setTimeout,br=function(){return function(t,n,i){var r,s,e,u,o;i.value=(r=i.value,s=gr("oncePerTickSymbol"),e=null,u={},o=function(){var t,n=null!==(t=this)&&void 0!==t?t:u;e=arguments,n[s]||(n[s]=!0,Er((function(){r.apply(n,e),n[s]=!1})))},o.oncePerTickSymbol=s,o)}};br.isScheduled=function(t,n){return t[n.oncePerTickSymbol]};var Rr,Nr=function(){function t(t){var n=this;this.Oe=new Map,this.ke=function(t){var i=t.target;if(n.Oe.has(i))return!0;var r=!1;return n.Oe.forEach((function(t,s){return r||!n.Oe.get(s).subtree?r:r=f(s)&&s.contains(i)})),r},this.Rn=function(i){br.isScheduled(n,n.garbageCollect)&&(i=Si(i,n.ke)),i.length&&t(i,n)},this.Ai=new csMutationObserver(this.Rn)}return t.prototype.disconnect=function(){this.Ai.disconnect(),this.Oe=new Map},t.prototype.takeRecords=function(){return this.Ai.takeRecords()},t.prototype.observe=function(t,n){return this.Oe.set(t,n),this.Ai.observe(t,n)},t.prototype.unobserve=function(t){this.Oe.has(t)&&(this.Oe.delete(t),this.garbageCollect())},t.prototype.garbageCollect=function(){var t=this;this.Rn(this.takeRecords(),this),this.Ai.disconnect(),this.Oe.forEach((function(n,i){return t.Ai.observe(i,n)}))},$n([br()],t.prototype,"garbageCollect",null),t}(),Tr=function(){function t(t){this.qn=!1,this.Ie=new Set,this.Ce=t?Xn(Xn({},kr),t):kr}return t.prototype.stop=function(){this.qn=!1,this._e.disconnect(),this.Ai.disconnect()},t.prototype.start=function(t){var n=this;if(this.qn)throw new Error("VisibilityObserver is already started");this.Rn=t;var i={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300};this._e=Ar.create((function(t){return n.handleIntersection(t)}),i),this.Ai=new Nr((function(t){return Ai(t,(function(t){return n.xe(t.target)}))})),this.Pe(),this.qn=!0},t.prototype.observe=function(t){if(!this.qn)throw new Error("Observer is stopped.");t[this.Me]||(t[this.Me]=!0,this.watchIntersection(t))},t.prototype.Pe=function(){this.Le=gr("isVisible"),this.Me=gr("ObservedElement"),this.De=gr("LinkedElement"),this.Ue=gr("Tracked")},t.prototype.xe=function(t){var n=this;this.Ie.add(t);for(var i=0,r=this.je(t);i<r.length;i++){var s=r[i];this.Ie.add(s)}setTimeout((function(){return n.recheckCssVisibilityAll()}))},t.prototype.recheckCssVisibilityAll=function(){var t=this;Ai(this.Ie.keys(),(function(n){n.isConnected&&!Ri.areAncestorsHiddenByCSS(n)&&n[t.Me]&&t.watchIntersection(n)})),this.Ie.clear()},t.prototype.watchIntersection=function(t){this.Ai.unobserve(t),this._e.unobserve(t);var n=Ri.getTopAncestorHiddenByCSS(t);n?(n!==t&&(this.He(n,t),this.watchMutation(n)),this.watchMutation(t)):this._e.observe(t)},t.prototype.watchMutation=function(t,n){void 0===n&&(n=!0),n&&delete t[this.Le],this._e.unobserve(t);this.Ai.observe(t,{attributeFilter:["style","class","hidden"]})},t.prototype.handleIntersection=function(t){for(var n=this,i=0,r=t;i<r.length;i++){var s=r[i],e=s.target;if(s.isVisible){var u=null===s.target[this.Le];s.target[this.Le]=!0,u&&!this.Ce.delay&&this.onVisibilityChanged(s.target,Rr.VisibleInViewPort)}else{switch(Ri.isVisibleInDocument(e)?Rr.VisibleOutsideViewPort:s.isIntersecting?Rr.HiddenByAnother:Rr.Hidden){case Rr.Hidden:case Rr.HiddenByAnother:this.qe(e);break;case Rr.VisibleOutsideViewPort:this.onVisibilityChanged(s.target,Rr.VisibleOutsideViewPort)}}}this.Ce.delay&&setTimeout((function(){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.isIntersecting&&s.isVisible;s.target[n.Le]&&e&&n.onVisibilityChanged(s.target,Rr.VisibleInViewPort)}}),this.Ce.delay)},t.prototype.qe=function(t){var n=this,i=Ri.getTopElement(t);this.watchMutation(t),i&&(i.addEventListener("DOMNodeRemoved",(function(){n.xe(t)})),this.He(i,t),this.watchMutation(i,!1))},t.prototype.He=function(t,n){var i;(t[this.De]=null!==(i=t[this.De])&&void 0!==i?i:new Set).add(n)},t.prototype.je=function(t){var n,i,r=[];return Ai(null!==(i=null===(n=t[this.De])||void 0===n?void 0:n.values())&&void 0!==i?i:[],(function(t){return csArray.prototype.push.call(r,t)})),r},t.prototype.onVisibilityChanged=function(t,n){if(n===Rr.VisibleInViewPort&&this.Ce.trackOnce){if(this._e.unobserve(t),this.Ai.unobserve(t),t[this.Ue])return;t[this.Ue]=!0}this.Rn(t,n)},t.isSupported=function(){return Ar.isSupported()},$n([hn()],t.prototype,"observe",null),$n([ii({wait:50}),hn()],t.prototype,"recheckCssVisibilityAll",null),$n([hn()],t.prototype,"watchIntersection",null),$n([hn()],t.prototype,"watchMutation",null),$n([hn()],t.prototype,"handleIntersection",null),$n([hn()],t.prototype,"onVisibilityChanged",null),t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(Rr||(Rr={}));var Or,kr={delay:1e3,trackOnce:!0};!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Or||(Or={}));var Ir=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.ze=new Map,i)for(var r=csString.prototype.split.call(i,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],o=e[1];this.ze.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.ze)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Or.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,s){var e,u=r.toString(),o="".concat(null===(e=i.constructor)||void 0===e?void 0:e.name,".").concat(u),h=s.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(s.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,Y([o],t,!1)),h.bind(this).apply(void 0,t)})}},t}();Ir.init();var Cr=function(){function t(){this.Be=[],this.Ve=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var s=csArray.prototype.pop.call(i),e=s.root;null!==e;)if(r&&n&&n.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.Ve,this.Ve+=1,f(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):S(e)&&this.Fe(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var s=n.__contentsquare_identifier;if(s&&i.add(s),f(n)&&csElementshadowRoot.apply(n)){var e=csElementshadowRoot.apply(n);this.getIds(e).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Be,t)},t.prototype.Fe=function(t){for(var n=0,i=this.Be;n<i.length;n++){(0,i[n])(t)}},t}(),_r=function(){function t(){this.Ge=[],this.Je=[]}return t.prototype.isFull=function(){return this.Ge.length>=t.We||this.Je.length>=t.We},t.prototype.isEmpty=function(){return 0===this.Ge.length&&0===this.Je.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.Ge,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Je,t)},t.prototype.clear=function(){this.Ge=[],this.Je=[]},t.prototype.flushIdsSeenGlobally=function(){var t=Y([],this.Ge,!0);return this.Ge=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=Y([],this.Je,!0);return this.Je=[],t},t.We=20,t}(),xr=function(){function t(t,n){var i=this;this.jn=t,this.Ke=n,this.Ye=!1,this.Xe=new Set,this.$e=new Set,this.Ze=new _r,this.Qe=function(t,n){switch(n){case Rr.VisibleInViewPort:i.onVisibleInViewPort(t);break;case Rr.VisibleOutsideViewPort:i.onVisibleOutsideViewPort(t)}i.Ze.isFull()&&i.tu()}}return t.isSupported=function(){return Tr.isSupported()},t.prototype.serializeTextNode=function(t,n,i){if(i.withAnonymization||!this.Ye)return n;var r=this.nu(t);return r&&this.iu.observe(r),n},t.prototype.nu=function(t){var n=Ri.getParentElement(t);return!n||!n.isConnected||this.jn.isSensitive(n)||this.jn.isSensitiveChild(n)||y(n)||g(n)||Pt(t.data)?null:n},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){if(!this.Ye&&t.isSupported()){this.iu=new Tr({delay:this.Ke});try{this.iu.start(this.Qe)}catch(t){return void nn.error(t)}this.Ye=!0}},t.prototype.stop=function(){this.Ye&&t.isSupported()&&(this.iu&&this.iu.stop(),this.Ze.clear(),this.Xe.clear(),this.$e.clear(),this.Ye=!1)},t.prototype.flushEvents=function(){this.Ye&&this.tu()},t.prototype.onVisibleInViewPort=function(t){var n=Cr.getId(t);this.onVisibleOutsideViewPort(t),this.Xe.has(n)||(this.Xe.add(n),this.Ze.addIdInViewPort(n))},t.prototype.onVisibleOutsideViewPort=function(t){var n=Cr.getId(t);this.$e.has(n)||(this.$e.add(n),this.Ze.addIdInGlobally(n))},t.prototype.getPendingEvents=function(){var t=this.ru();return t?[t]:[]},t.prototype.tu=function(){var t=this.ru();t&&this.Ti(t)},t.prototype.ru=function(){if(!this.Ze.isEmpty()){var t={visibleGlobally:this.Ze.flushIdsSeenGlobally(),visibleInViewPort:this.Ze.flushIdsSeenInViewport()};return{type:zn.TEXT_VISIBILITY,date:gt(),args:[t]}}},J([Ir.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),J([Ir.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),Pr=function(){function t(t){this.su=[],this.eu=[],this.Ht={},this.qt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Ht[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.Ht[t]})):this.Ht={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.su,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.eu,t)},t.prototype.send=function(t){var n=this,i=st.toQuery(G(G({},this.Ht),{ct:ln.UNCOMPRESSED}));this.ou(i,t)?csArray.prototype.forEach.call(this.su,(function(t){return t()})):csArray.prototype.forEach.call(this.eu,(function(t){return t(n.Ht)}))},t.prototype.ou=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.qt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.qt,"?").concat(t),n||"")},t}(),Mr=function(){function t(t){this.Hn=t}return t.prototype.serializeTextNode=function(t,n){this.Hn.shouldEncrypt(t)&&(n.data=Mi(t.data),this.Hn.registerTextNodeToEncrypt({textNode:t,serializedTextData:n.data}))},t}(),Lr=function(){function t(){this.hu=[]}return t.prototype.onSerializeData=function(t){this.au=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.hu,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.hu.length>0;){var t=csArray.prototype.shift.call(this.hu);this.au(t)}},t.prototype.clear=function(){this.hu=[]},t}();function Dr(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function Ur(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,s=t.length;r<s;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}function jr(t){var n=csString.prototype.split.call(t,";base64,");return 2!==n.length?null:new Blob([Ur(n[1])],{type:csString.prototype.replace.call(n[0],"data:","")})}function Hr(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),"")}var qr,zr,Br=function(){function t(t){this.crypto=t,this.fu=!1}return t.prototype.init=function(){this.fu=this.canSupportEncryption(),this.fu&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.fu},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),Vr="AES-CTR",Fr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.exportInitializationVector=function(t){return Dr(t)},n.prototype.exportSecret=function(t){var n;return W(this,void 0,void 0,(function(){var i;return K(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return i=r.sent(),[2,null!==(n=i.k)&&void 0!==n?n:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateEncryptionKey=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:Vr,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},n.prototype.encrypt=function(t,n){return W(this,void 0,void 0,(function(){var i,r;return K(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];i={counter:t.initializationVector,name:Vr,length:64},r=this.textEncoder.encode(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(i,t.encryptionKey,r)];case 2:return[2,Dr(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},n}(Br),Gr="RSA-OAEP",Jr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.importKey=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:if(!this.isSupported())return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",Ur(t),{name:Gr,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,n.sent()];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.encrypt=function(t,n){return W(this,void 0,void 0,(function(){var i;return K(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(i=this.vu(n,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:Gr},t.publicKey,i)];case 2:return[2,Dr(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.vu=function(t,n){for(var i=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.lu(e);if(u+i>n)break;r++,i+=u}var o=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(o)},n.prototype.lu=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},n}(Br),Wr=function(){function t(t){this.du=t,this.wu=!1}return t.prototype.init=function(){this.wu=this.yu(),this.wu&&(this.pu=new TextEncoder)},t.prototype.isSupported=function(){return this.wu},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.digest=function(t,n){return W(this,void 0,void 0,(function(){var i,r;return K(this,(function(s){switch(s.label){case 0:if(!this.wu)return[2,null];i=this.mu(t,n),r=this.pu.encode(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return[2,Hr(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.yu=function(){return!!(this.du&&this.du.subtle&&this.du.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.mu=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(qr||(qr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(zr||(zr={}));var Kr=function(){function t(t,n,i){this.gu=t,this.Un=n,this.jn=i}return t.prototype.start=function(){var n=this;this.gu.subscribe(t.Au,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.gu.unsubscribe(t.Au)},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.processGesture=function(t,n){if(t.target&&(!f(t.target)||!this.jn.isSensitiveChild(t.target))){var i=this.Un.getId(t.target);if(i)switch(t.type){case qr.DRAG:case qr.FLICK:this.Su(Fn.SWIPE,t,i,n);break;case qr.LONG_PRESS:this.Su(Fn.LONG_PRESS,t,i,n);break;case qr.TAP:this.Su(Fn.TAP,t,i,n);break;case qr.PINCH_IN:this.Su(Fn.PINCH_IN,t,i,n);break;case qr.PINCH_OUT:this.Su(Fn.PINCH_OUT,t,i,n)}}},t.prototype.Su=function(t,n,i,r){var s=this.Eu(n,t,r),e={type:zn.GESTURE_RECOGNITION,args:[i,s],date:gt()};this.Ti(e)},t.prototype.Eu=function(t,n,i){var r={type:n};if(t.direction&&(r.direction=t.direction),t.distance&&(r.distance=t.distance),t.velocity&&(r.velocity=t.velocity),n===Fn.TAP&&i.changedTouches&&1===i.changedTouches.length){var s=i.changedTouches[0];r.pageX=Yn(s.pageX,1),r.pageY=Yn(s.pageY,1)}return r},t.Au="RecordingGesturesTracker",J([vi()],t.prototype,"processGesture",null),t}(),Yr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return F(n,t),n}(Ki),Xr=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},$r=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return F(n,t),n}(Ki),Zr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return F(n,t),n}(Ki),Qr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return F(n,t),n}(Ki),ts=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return F(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(Ki),ns=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return F(n,t),n}(Ki),is=function(){function t(n){for(var i=function(i){var s=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,s,e){return t[i](n,r,s,e)}})),e=t.bu(s);r[i]=e},r=this,s=0,e=t.Ru;s<e.length;s++){i(e[s])}}return t.create=function(n){return new t(n)},t.bu=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,s){return t(n,i,r,s)||i}})),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4];switch(t.length){case 1:return t[0];case 2:return function(t,n,s,e){return r(t,i(t,n,s,e),s,e)};case 3:return function(t,n,e,u){return s(t,r(t,i(t,n,e,u),e,u),e,u)};case 4:return function(t,n,u,o){return e(t,s(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,h){return u(t,e(t,s(t,r(t,i(t,n,o,h),o,h),o,h),o,h),o,h)};default:return function(n,i,r,s){for(var e=i,u=0;u<t.length;u++)e=t[u](n,i,r,s)||e;return i}}},t.Ru=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeDocumentNode","serializeShadowRootNode"],t}(),rs=function(){function t(t){this.Nu=is.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,n){var i,r=G({},n),s=t.nodeType;switch(s){case 1:i=this.Tu(t,r);break;case 3:i=this.Ou(t,r);break;case 4:i=this.ku(t,r);break;case 7:case 8:i=this.Iu(t,r);break;case 10:i=new Yr(t);break;case 9:i=this.Cu(t,r);break;case 11:i=this._u(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return this.Nu.afterSerialize(t,i,r),i},t.prototype.Tu=function(t,n){var i=new Yi(t);this.Nu.serializeElementNode(t,i,n),i.attributes=this.xu(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.Pu(r,n)),i.children=this.Mu(t,n),i},t.prototype.xu=function(t,n){var i=pi(t.attributes);i=this.Nu.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var s=i[r];i[r]=this.Lu(t,s,n)}return i},t.prototype.Lu=function(t,n,i){var r=new Xr(n);return this.Nu.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?Si(r,(function(t){return!n.excludedNodes.get(t)})):r,pi(r=this.Nu.beforeSerializeChildren(t,r,n))},t.prototype.Mu=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var s=i[r];i[r]=this.serialize(s,n)}return i},t.prototype.Ou=function(t,n){var i=new $r(t);return this.Nu.serializeTextNode(t,i,n),i},t.prototype.ku=function(t,n){var i=new Zr(t);return this.Nu.serializeCDATASectionNode(t,i,n),i},t.prototype.Iu=function(t,n){var i=new Qr(t);return this.Nu.serializeCommentNode(t,i,n),i},t.prototype.Cu=function(t,n){var i=new ts(t);return this.Nu.serializeDocumentNode(t,i,n),i.children=this.Mu(t,n),i},t.prototype.Pu=function(t,n){var i=new ns(t);return this.Nu.serializeShadowRootNode(t,i,n),i.children=this.Mu(t,n),this.Nu.afterSerializeShadowRoot(t,i,n),i},t.prototype._u=function(t,n){if(t.mode)return this.Pu(t,n);throw new Error("Not implemented yet.")},t}();function ss(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var es=function(){function t(t){this.Un=t,this.Du=!1,this.Uu=new Map,this.ju={},this.Hu=new Map,this.qu=new Map,this.zu=new Set,this.Bu=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.Du?Si(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.Du)return n;var r=this.Un.getId(t);if(!r)return n;var s=this.qu.get(r);return s?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=s.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.Du){var r=this.Hu.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.Du){var i=this.Hu.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.Du&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.Vu(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.Du&&(i.skipRegisterNode||this.Vu(n,i))},t.prototype.enable=function(){this.Du=!0,this.Fu()},t.prototype.disable=function(){this.Du=!1,this.Fu()},t.prototype.setDefaultSerializationOptions=function(t){this.ju=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.Uu.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.Un.getId(t);if(i)return null===(n=this.Uu.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.Un.getId(t);return i&&(null===(n=this.Uu.get(i))||void 0===n?void 0:n.options)||this.ju},t.prototype.registerInitialCharacterData=function(t,n){this.Hu.get(t)||this.Hu.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var s=this.qu.get(t),e="".concat(i).concat(n||"");if(s){if(s.has(e))return}else s=new Map,this.qu.set(t,s);var u={name:i,namespaceURI:n||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.Un.getId(n);r&&this.zu.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.Un.getId(i),s=this.Un.getId(t);if(r&&s){var e=this.Bu.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s),csArray.prototype.indexOf.call(e.childNodeIds,s)<0&&csArray.prototype.push.call(e.childNodeIds,s);else{for(var u=[],o=n?this.Un.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.Un.getId(csNodechildNodes.apply(i)[h]);c&&!this.zu.has(c)&&(o&&c===o&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===o&&csArray.prototype.push.call(u,s);var a=[s];this.Bu.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&os(r)&&this.Gu(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.Un.getId(t);return!!n&&this.zu.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.Un.getId(n),r=this.Un.getId(t);if(!i||!r)return-1;var s=this.Bu.get(i);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.Fu=function(){this.Uu.clear(),this.Hu.clear(),this.qu.clear(),this.zu.clear(),this.Bu.clear()},t.prototype.Vu=function(t,n){t.csId&&(this.Ju(t.csId,t,n),this.Wu(t.csId,t),this.Uu.set(t.csId,{serializedNode:t,options:n}))},t.prototype.Ju=function(t,n,i){if(function(t){return t instanceof Yi}(n)){var r=this.qu.get(t);if(r){for(var s=0,e=n.attributes;s<e.length;s++){var u=e[s],o="".concat(u.name).concat(u.namespaceURI||""),h=r.get(o);h&&null!==h.value&&(u.value=h.value,r.delete(o))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.Gu=function(t,n,i){(i.csId||us(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):us(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.Wu=function(t,n){var i;if(os(n)){var r=this.Bu.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var h=null===(i=this.Uu.get(u))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.Gu(o,n,h)}}}},t}();function us(t){return"artificial"in t}function os(t){return"children"in t}var hs,cs,as={taskTime:25},fs=function(t){function n(n,i,r,s){void 0===r&&(r=new es(i)),void 0===s&&(s=as);var e=t.call(this,Y([r],n,!0))||this;return e.Ku=i,e.Yu=r,e.Xu=s,e.$u=0,e.Zu=e.Xu.taskTime,e}return F(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],s=n[2];this.Yu.getSerializedNodeById(i)||this.Yu.registerInitialAttributes(i,r,s,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.Yu.getSerializedNodeById(i)||this.Yu.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.ds(t,n,i);return this.Qu(t),{removedNodes:this.ls(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),W(this,void 0,void 0,(function(){return K(this,(function(i){return this.$u+=1,this.Yu.setDefaultSerializationOptions(n),[2,this.no(t,n)]}))}))},n.prototype.ds=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.Ku.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.Ku.getId(t.target),o=0;o<t.addedNodes.length;o+=1){var h=t.addedNodes[o],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[u,s,c])}return r},n.prototype.Qu=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.Yu.markAddedTreeAsProcessed(i)}},n.prototype.io=function(t,n){if(!n)return-1;var i=this.Yu.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.ls=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Yu.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.ro(s))this.so(s)&&this.eo(s,n);else{var e=this.serialize(s,{withAnonymization:n});if(this.so(t.target)){var u=this.io(s,t.target);this.Yu.addSerializedChildToParent(t.target,u,e)}}var o=this.Ku.getId(s);o&&csArray.prototype.push.call(i,[o])}return i},n.prototype.eo=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.so(r))this.eo(r,n);else if(!this.Yu.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:n}),e=this.io(r,t);this.Yu.addSerializedChildToParent(t,e,s)}}},n.prototype.so=function(t){return!!this.Yu.getSerializedNodeByNode(t)},n.prototype.ro=function(t){return this.so(t)||this.Yu.isAddedNodeDuringSerialization(t)},n.prototype.no=function(t,n){return void 0===n&&(n={}),W(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a,v,l;return K(this,(function(d){switch(d.label){case 0:return i=this.$u,r=gt(),this.Yu.enable(),n.skipChildrenSerialization=!0,s=[t],[4,ss()];case 1:if(d.sent(),i!==this.$u)return[2,null];this.uo=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Yu.getOptions(e),o=this.runBeforeSerializeChildrenHook(e,u),h=csArray.prototype.shift.call(o),d.label=3;case 3:return h?csDate.now()-this.uo>this.Zu?[4,ss()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.$u)return[2,null];this.uo=csDate.now(),d.label=5;case 5:return this.ro(h)?(h=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(s,h),c=this.serialize(h,u),a=this.io(h,e),this.Yu.addSerializedChildToParent(e,a,c),f(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(s,v)),h=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.Yu.getSerializedNodeByNode(t)))throw this.Yu.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Yu.disable(),[2,{args:[l],date:r,type:zn.INITIAL_DOM}]}}))}))},n}(rs),vs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.isAsynchronous=function(){return!1},n}(rs),ls=function(){function t(){this.oo=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.oo&&this.isSupported()&&(this.ho?this.ho.clear():this.ho=new Set,this.oo=!0)},t.prototype.stop=function(){this.oo&&(this.oo=!1)},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.register=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.ho.has(t)?[2]:(this.ho.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.co(t),[2]}}))}))},t.prototype.co=function(t){if(this.oo){var n={type:zn.CUSTOM_ELEMENT_REGISTRATION,date:gt(),args:[t]};this.Ti(n)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.ao=t}return t.prototype.serializeElementNode=function(t){(function(t){return f(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&-1===csString.prototype.indexOf.call(t.tagName,":")&&-1===csString.prototype.indexOf.call(t.tagName,'"')&&-1===csString.prototype.indexOf.call(t.tagName,",")&&csArray.prototype.indexOf.call(R,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.ao.register(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},J([hn("CustomElementRegistrationTracker: register")],t.prototype,"register",null),t}(),ds=function(){function t(){this.fo=new Map,this.vo=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!y(t))return n;var i=this.lo(t);if(null===i||0===i.length)return n;if(Pt(t.textContent)){var r=pi(n);return csArray.prototype.push.call(r,this.do(i)),r}var s=this.wo(t);if(s===i.length)return n;for(var e=new csArray(i.length-s),u=s,o=0;u<i.length;u+=1,o+=1)e[o]=i[u];r=pi(n);return csArray.prototype.push.call(r,this.do(e)),r},t.prototype.wo=function(t){var n=this.fo.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.vo.head.appendChild(i);var r=this.lo(i);return n=r?r.length:0,this.fo.set(t.textContent,n),this.vo.head.removeChild(i),n},t.prototype.lo=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.do=function(t){var n="";Ai(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),ws=function(){function t(t,n){this.Un=t,this.Vi=n,this.yo=1}return t.prototype.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.po=new Set,this.mo=qi(window.ShadowRoot.prototype,"adoptedStyleSheets",this.Ao.bind(this)),this.So=qi(window.Document.prototype,"adoptedStyleSheets",this.Ao.bind(this)))},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.isAdoptedStyleSheetsSupported()&&(this.Eo(),this.mo&&this.mo.activate(),this.So&&this.So.activate())},t.prototype.stop=function(){this.isAdoptedStyleSheetsSupported()&&(this.bo(),this.po.clear(),this.mo&&this.mo.deactivate(),this.So&&this.So.deactivate())},t.prototype.serializeDocumentNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Ao(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Ao(t,t.adoptedStyleSheets)},t.prototype.Eo=function(){this.Vi.registerToInsertRuleInterceptor(this.Ro.bind(this)),this.Vi.registerToDeleteRuleInterceptor(this.To.bind(this))},t.prototype.bo=function(){var t,n;null===(t=this.ps)||void 0===t||t.call(this),null===(n=this.gs)||void 0===n||n.call(this)},t.prototype.Ao=function(t,n){var i=this;csArray.prototype.forEach.call(n,(function(t){return i.Oo(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.ko(t)})),s=this.Un.getId(t);s&&queueMicrotask((function(){var t={type:zn.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:gt()};i.Ti(t)}))},t.prototype.ko=function(t){return t.__adopted_stylesheet_id},t.prototype.Ro=function(t,n){var i=n[0],r=n[1],s=this.Io(t);if(s){var e={date:gt(),type:zn.ADOPTED_STYLESHEET_RULE_INSERT,args:kt(r)?[s,i,r]:[s,i]};this.Ti(e)}},t.prototype.To=function(t,n){var i=n[0],r=this.Io(t);if(r&&r){var s={date:gt(),type:zn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Ti(s)}},t.prototype.Io=function(t){return this.po.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.Oo=function(t){if(!this.po.has(t)){var n=this.yo++;t.__adopted_stylesheet_id=n,this.po.add(t);var i=this.Co(t),r={type:zn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:gt()};this.Ti(r)}},t.prototype.Co=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){nn.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(hs||(hs={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(cs||(cs={}));var ys,ps=function(){function t(t,n,i,r){this._o=t,this.M=n,this.$=i,this.xo=r}return t.prototype.init=function(){this.Po()},t.prototype.shouldUseAnonymization=function(){if(this._o.isReplayUnanonymizedAllowedByConsent()){switch(this.M.anonymisationMethod){case null:case hs.replayRecordingMaskedUrlRegex:return!(!this.M.replayRecordingMaskedUrlRegex||!this.M.replayRecordingMaskedUrlRegex.test(this.$.getAnonymizedUrl()));case hs.replayRecordingMaskedUrlRegexRules:return this.xo.evaluateUrl(this.$.getAnonymizedUrl())}return!1}switch(this.M.anonymisationMethod){case null:case hs.replayRecordingUnmaskedUrlRegex:return!(this.M.replayRecordingUnmaskedUrlRegex&&this.M.replayRecordingUnmaskedUrlRegex.test(this.$.getAnonymizedUrl()));case hs.replayRecordingUnmaskedUrlRegexRules:return!this.xo.evaluateUrl(this.$.getAnonymizedUrl())}return!0},t.prototype.Po=function(){this.M.anonymisationMethod===hs.replayRecordingMaskedUrlRegexRules&&this.M.replayRecordingMaskedUrlRegexRules?this.xo.setRegexRules(this.M.replayRecordingMaskedUrlRegexRules):this.M.anonymisationMethod===hs.replayRecordingUnmaskedUrlRegexRules&&this.M.replayRecordingUnmaskedUrlRegexRules&&this.xo.setRegexRules(this.M.replayRecordingUnmaskedUrlRegexRules)},t}(),ms=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),gs=function(){function t(){this.qn=!1,this.Mo=[],this.Lo=[],this.Do()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this.Uo(this.Mo,t)?function(){}:(csArray.prototype.push.call(this.Mo,t),function(){n.Mo=csArray.prototype.filter.call(n.Mo,(function(n){return n!==t}))})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this.Uo(this.Lo,t)?function(){}:(csArray.prototype.push.call(this.Lo,t),function(){n.Lo=csArray.prototype.filter.call(n.Lo,(function(n){return n!==t}))})},t.prototype.start=function(){var t,n;this.qn||(this.qn=!0,null===(t=this.jo)||void 0===t||t.activate(),null===(n=this.Ho)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.qn&&(this.qn=!1,null===(t=this.jo)||void 0===t||t.deactivate(),null===(n=this.Ho)||void 0===n||n.deactivate())},t.prototype.Uo=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.qo=function(t,n){csArray.prototype.forEach.call(this.Mo,(function(i){return i(t,n)}))},t.prototype.zo=function(t,n){csArray.prototype.forEach.call(this.Lo,(function(i){return i(t,n)}))},t.prototype.Do=function(){var t=this;this.Bo()&&(this.jo=Hi({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.qo(i,r)}})),this.Vo()&&(this.Ho=Hi({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.zo(i,r)}}))},t.prototype.Bo=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Vo=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),As=function(){function t(t){this.Fo={},this.Go=new Ti(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.Go.isThresholdReached()||(this.Go.addString(n),"string"==typeof r?this.Go.addString(r):this.Go.addArrayBuffer(r),this.Go.isThresholdReached()||(this.Fo[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.Jo(),(function(t){var r=n.Fo[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.Wo(t))})),0!==i.length&&(t(i),this.Go.reset())},t.prototype.Jo=function(){return Object.keys(this.Fo)},t.prototype.Wo=function(t){delete this.Fo[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(ys||(ys={}));var Ss,Es,bs,Rs,Ns=function(){function t(t,n,i){this.Ko=t,this.Yo=i,this.Xo=ys.NOT_STARTED,this.$o=[],this.Zo=0,this.Qo=self.origin,this.th="object"==typeof window?"":"worker-",this.Go=new Ti(n),this.Pe()}return t.prototype.Pe=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.nh()];case 1:return t.sent(),this.Xo===ys.READY?this.ih():this.Yo(this.$o),[2]}}))}))},t.prototype.ih=function(){var t=this;csArray.prototype.forEach.call(this.$o,(function(n){t.save(n)})),this.$o=[]},t.prototype.save=function(t){return W(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.Xo===ys.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.$o,t),[2]):this.Xo!==ys.READY||this.Go.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.Go.addString(n),"string"==typeof r?this.Go.addString(r):this.Go.addArrayBuffer(r),this.Go.isThresholdReached()?[2]:[4,this.fn.put("".concat(this.Qo,"/").concat(n),new Response(r,{headers:i}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.fn?[3,2]:[4,this.nh()];case 1:if(n.sent(),this.Xo!==ys.READY)return[2];n.label=2;case 2:return this.rh(t),[2]}}))}))},t.prototype.nh=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.Xo=ys.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.th).concat(this.Ko))];case 1:return t.fn=n.sent(),this.Xo=ys.READY,[3,3];case 2:return n.sent(),this.Xo=ys.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.rh=function(t){return W(this,void 0,void 0,(function(){var n,i,r,s,e=this;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.Zo++,this.Zo>1?[2]:[4,this.fn.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.fn.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return e.fn.delete(t)})))];case 4:return u.sent(),t(s),this.Go.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.Zo--,[7];case 7:return[2]}}))}))},t}(),Ts=function(){function t(t){self.caches?this.eh(t):this.uh()}return t.prototype.save=function(t){this.oh.save(t)},t.prototype.recover=function(t){this.oh.recover(t)},t.prototype.eh=function(n){var i=this;this.oh=new Ns(n,t.hh,(function(t){i.uh(t)}))},t.prototype.uh=function(n){var i=this;this.oh=new As(t.hh),n&&csArray.prototype.forEach.call(n,(function(t){i.oh.save(t)}))},t.hh=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(Ss||(Ss={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Es||(Es={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(bs||(bs={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case Es.PORTRAIT_PRIMARY:case Es.PORTRAIT_SECONDARY:return Ss.PORTRAIT;case Es.LANDSCAPE_PRIMARY:case Es.LANDSCAPE_SECONDARY:return Ss.LANDSCAPE;default:return Ss.PORTRAIT}}:i()?function(){switch(window.orientation){case bs.PORTRAIT:case bs.PORTRAIT_REVERSE:return Ss.PORTRAIT;case bs.LANDSCAPE:case bs.LANDSCAPE_REVERSE:return Ss.LANDSCAPE;default:return Ss.PORTRAIT}}:function(){return Ss.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Rs||(Rs={}));var Os,ks=function(){function t(){this.ah=null,this.fh=null,this.qn=!1}return t.prototype.start=function(){this.qn||(this.qn=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.qn&&(this.qn=!1,this.ah=null,this.fh=null)},t.prototype.setOnScreenChangedCallback=function(t){this.lh=t},t.prototype.onScreenPotentiallyChanged=function(){var t;if(this.qn){var n=Rs.getCurrentOrientation(),i=this.yh(n),r=i.screenWidth,s=i.screenHeight;if(r!==this.ah||s!==this.fh){this.ah=r,this.fh=s;var e={type:zn.SCREEN_RESIZE,args:[r,s],date:gt()};null===(t=this.lh)||void 0===t||t.call(this,e)}}},t.prototype.yh=function(t){var n,i,r=bi.screenWidth(),s=bi.screenHeight();return t===Ss.PORTRAIT?(n=r,i=s):(n=Math.max(r,s),i=Math.min(r,s)),{screenWidth:n,screenHeight:i}},t}(),Is=function(){function t(t,n){this.ur=t,this.jn=n,this.ph="cssrm://",this.mh=0}return t.prototype.beforeSerializeAttributes=function(t,n){return this.jn.isSensitive(t)?n:w(t)&&""!==t.getAttribute("src")&&(or(t.src)||this.ur.isOnlineAssetsActivated())?(this.mh++,this.gh(t.src,this.mh),this.Ah(n,this.mh)):d(t)&&""!==t.getAttribute("href")&&this.ur.isOnlineAssetsActivated()?(this.mh++,this.Sh(t.href,this.mh),this.Eh(n,this.mh)):n},t.prototype.serializeTextNode=function(t,n,i){if(t.parentElement&&y(t.parentElement)){var r=n.data,s=csArray.from(new Set(ur(r)));if(this.bh(s)||this.ur.isOnlineAssetsActivated()&&this.Rh(s)){for(var e=n.data,u=0,o=s;u<o.length;u++){var h=o[u];this.mh++,e=csString.prototype.replace.call(e,h,this.ph+this.mh),or(h)?this.gh(h,this.mh):this.ur.isOnlineAssetsActivated()&&(Et(h,".css")?this.Sh(h,this.mh):this.gh(h,this.mh))}n.data=e}}},t.prototype.bh=function(t){return csArray.prototype.some.call(t,(function(t){return or(t)}))},t.prototype.Rh=function(t){return csArray.prototype.some.call(t,(function(t){return!or(t)}))},t.prototype.Ah=function(t,n){var i=this;return csArray.prototype.map.call(t,(function(t){if("src"!==t.name)return t;var r=document.createAttribute(t.name);return r.value=i.ph+n,r}))},t.prototype.Eh=function(t,n){for(var i=[],r=0,s=t;r<s.length;r++){var e=s[r],u=document.createAttribute(e.name);if(csArray.prototype.push.call(i,u),"href"===e.name){var o=document.createAttribute("data-cs-original-href");o.value=e.value,csArray.prototype.push.call(i,o),u.value=this.ph+n}else u.value=e.value}return i},t.prototype.gh=function(t,n){this.ur.processStaticResource({id:n,input:t})},t.prototype.Sh=function(t,n){this.ur.processStaticCssLinkResource({id:n,input:t})},t}();!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(Os||(Os={}));var Cs=function(t){function n(n,i,r){var s=t.call(this)||this;return s.ur=n,s.Nh=i,s.Th=r,s.Oh={},s.kh=!1,s}return F(n,t),n.prototype.onStart=function(){this.ur.start()},n.prototype.onStop=function(){this.ur.stop()},n.prototype.initState=function(){var t=this;this.ur.isStaticResourceManagerSupported()&&(this.Ih=this.Th.getRequestParameters(),this.Ch="".concat(this.Nh,"/exist"),this._h="".concat(this.Nh,"/putTag?").concat(new URLSearchParams(this.Ih).toString()),this.xh=Qi((function(){return W(t,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.kh?(this.xh(),[2]):(this.kh=!0,[4,this.Ph()]);case 1:return t.sent(),this.kh=!1,[2]}}))}))}),300),this.ur.sendStaticResource((function(n){t.Oh[n.hash]=n,t.xh()})))},n.prototype.onIframeStaticResource=function(t){this.ur.isStaticResourceManagerSupported()&&(this.Oh[t.hash]=t,this.xh())},n.prototype.Ph=function(){return W(this,void 0,void 0,(function(){var t,n,i,r=this;return K(this,(function(s){switch(s.label){case 0:return t=this.Oh,this.Oh={},[4,this.Mh(t)];case 1:return(n=s.sent()).length?(i=this.Lh(n),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return window.fetch(r._h,{method:"POST",body:t})})))]):[2];case 2:return s.sent(),[2]}}))}))},n.prototype.Dh=function(t){return W(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return(n=Object.keys(t)).length?(i={projectId:this.Ih.pid,filter:Os.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.Ch,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[2,r.sent().json()]}}))}))},n.prototype.Mh=function(t){return W(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:n=[],s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.Dh(t)];case 2:return i=s.sent(),csArray.prototype.forEach.call(i,(function(i){var r=t[i];r?csArray.prototype.push.call(n,r):nn.warn("SRM: received unknown hash: "+i)})),[3,4];case 3:return r=s.sent(),nn.warn("SRM Service,getUnknownHashes error: ".concat(r.message," ")),[3,4];case 4:return[2,n]}}))}))},n.prototype.Lh=function(t){for(var n=0,i=[new FormData],r=0,s=t;r<s.length;r++){var e=s[r],u=e.blob,o=e.hash,h=i.length-1;if((n+=u.size)<8388608)i[h].append("",u,o);else{var c=new FormData;c.append("",u,o),n=u.size,csArray.prototype.push.call(i,c)}}return i},n}(Ci),_s=function(){function t(){this.Uh=[]}return t.prototype.setRegexRules=function(t){var n=this;this.Uh=csArray.prototype.map.call(t,(function(t){return n.jh(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.Uh,(function(i){var r,s,e=n.Hh(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(e)):null===(s=i.regex)||void 0===s?void 0:s.test(e)}))},t.prototype.Hh=function(t,n){var i=Jt(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.qh=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.jh=function(t){switch(t.operator){case cs.NOT_START:t.notOperator=!0;case cs.START:t.regex=new RegExp("^".concat(t.value),this.qh(t));break;case cs.NOT_END:t.notOperator=!0;case cs.END:t.regex=new RegExp("".concat(t.value,"$"),this.qh(t));break;case cs.NOT_CONTAIN:t.notOperator=!0;case cs.CONTAIN:t.regex=new RegExp("".concat(t.value),this.qh(t));break;case cs.NOT_EXACT:t.notOperator=!0;case cs.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.qh(t));break;default:nn.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),xs=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};var Ps=function(){function t(t,n){void 0===n&&(n=100),this.zh=t,this.Bh=n,this.Vh="original-resource-name",this.Fh=!1,this.qn=!1,this.Gh=!1,this.Jh="SHA-256",this.Wh={},this.Kh=null}return t.prototype.init=function(){"Promise"in window&&"function"==typeof window.Promise&&this.zh.isSupported()&&(this.Fh=!0)},t.prototype.enableOnlineAssets=function(){this.Gh=!0},t.prototype.isOnlineAssetsActivated=function(){return this.Gh},t.prototype.isSupported=function(){return this.Fh},t.prototype.processStaticResource=function(t){var n;return W(this,void 0,void 0,(function(){var i,r,s,e,u,o;return K(this,(function(h){switch(h.label){case 0:return h.trys.push([0,7,,8]),this.Fh?(i=void 0,or(t.input)?[3,3]:[4,window.fetch(t.input)]):[2];case 1:return[4,h.sent().blob()];case 2:return i=h.sent(),[3,4];case 3:if(!(r=jr(t.input)))return[2];i=r,h.label=4;case 4:return[4,i.arrayBuffer()];case 5:return s=h.sent(),[4,crypto.subtle.digest(this.Jh,s)];case 6:return e=h.sent(),u=Hr(e),o=or(t.input)?void 0:t.input,this.Yh(t.id,u,o),null===(n=this.Xh)||void 0===n||n.call(this,{hash:u,blob:i}),[3,8];case 7:return h.sent(),[3,8];case 8:return[2]}}))}))},t.prototype.processStaticCssLinkResource=function(t){return W(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.Fh?[4,this.$h(t.input)]:[2];case 1:return n=i.sent(),this.Yh(t.id,n.get(zt(t.input)).hash,t.input),this.Zh(n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.isStaticResourceManagerSupported=function(){return this.Fh},t.prototype.onResourceHash=function(t){this.Qh=t},t.prototype.sendStaticResource=function(t){this.Xh=t},t.prototype.flushResourceHashEvent=function(){var t;if(Object.keys(this.Wh).length){this.Kh&&clearTimeout(this.Kh);var n={type:zn.RESOURCE_HASHES,date:xs(),args:[this.Wh]};this.Kh=null,this.Wh={},null===(t=this.Qh)||void 0===t||t.call(this,n)}},t.prototype.start=function(){this.qn||(this.qn=!0)},t.prototype.stop=function(){this.qn&&(this.qn=!1,this.Gh=!1,this.flushResourceHashEvent())},t.prototype.Yh=function(t,n,i){var r=this,s=n;i&&(s+="?".concat(this.Vh,"=").concat(i)),this.Wh[t]=s,this.Kh&&clearTimeout(this.Kh),this.Kh=window.setTimeout((function(){return r.flushResourceHashEvent()}),this.Bh)},t.prototype.$h=function(t){return W(this,void 0,void 0,(function(){var n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p;return K(this,(function(m){switch(m.label){case 0:n=new Map,i=zt(t),r=[{resourceRawPath:t,resourceAbsolutePath:i}],m.label=1;case 1:if(!(r.length>0))return[3,17];if(s=csArray.prototype.pop.call(r),!this.isOnlineAssetsActivated()&&null!==s.resourceAbsolutePath&&!or(s.resourceAbsolutePath))return n.set(s.resourceAbsolutePath,null),[3,1];if(void 0!==n.get(s.resourceAbsolutePath))return[3,1];m.label=2;case 2:return m.trys.push([2,15,,16]),null===s.resourceRawPath||csString.prototype.indexOf.call(s.resourceRawPath,".css")>0?s.data?[3,5]:[4,fetch(s.resourceAbsolutePath)]:[3,8];case 3:return w=m.sent(),e=s,[4,w.text()];case 4:e.data=m.sent(),m.label=5;case 5:for(s.nestedResources||(s.nestedResources=csArray.from(new Set(ur(s.data)))),u=!1,o=!1,h=function(t){var i=or(t)?t:s.resourceAbsolutePath?Bt(t,s.resourceAbsolutePath):zt(t),e=n.get(i);if(void 0!==e){if(null!==e){var h=c.tc(e,t);s.data=csString.prototype.replaceAll.call(s.data,t,h)}return"continue"}var a=void 0!==csArray.prototype.find.call(r,(function(t){return t.resourceAbsolutePath===i}));a||(u=!0,o||(csArray.prototype.push.call(r,s),o=!0),csArray.prototype.push.call(r,{resourceRawPath:t,resourceAbsolutePath:i}))},c=this,a=0,f=s.nestedResources;a<f.length;a++)v=f[a],h(v);return u?[3,7]:[4,this.nc(s.data)];case 6:l=m.sent(),n.set(s.resourceAbsolutePath,{hash:l.hash,blob:l.blob}),m.label=7;case 7:return[3,14];case 8:return d=void 0,or(s.resourceAbsolutePath)?[3,11]:[4,fetch(s.resourceAbsolutePath)];case 9:return[4,(w=m.sent()).blob()];case 10:return d=m.sent(),[3,12];case 11:if(!(y=jr(s.resourceAbsolutePath)))return n.set(s.resourceAbsolutePath,null),[3,1];d=y,m.label=12;case 12:return[4,this.ic(d)];case 13:p=m.sent(),n.set(s.resourceAbsolutePath,{hash:p,blob:d}),m.label=14;case 14:return[3,16];case 15:return m.sent(),n.set(s.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,n]}}))}))},t.prototype.tc=function(t,n){var i="cs://resources/".concat(t.hash);return or(n)||(i+="?".concat(this.Vh,"=").concat(n)),i},t.prototype.nc=function(t){return W(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(s){switch(s.label){case 0:return[4,(n=new Blob([t],{type:"text/css"})).arrayBuffer()];case 1:return i=s.sent(),[4,crypto.subtle.digest(this.Jh,i)];case 2:return r=s.sent(),[2,{blob:n,hash:Hr(r)}]}}))}))},t.prototype.ic=function(t){return W(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.Jh,n)];case 2:return[2,Hr(i.sent())]}}))}))},t.prototype.Zh=function(t){var n=this;t.forEach((function(t){var i;t&&(null===(i=n.Xh)||void 0===i||i.call(n,{hash:t.hash,blob:t.blob}))}))},t}(),Ms=document.createElement("div");function Ls(t){if(!(!!t&&Tt(t)))return nn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return k.call(Ms,t),!0}catch(n){return nn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var Ds,Us,js=function(){function t(t,n,i,r,s,e,u,o,h,c){this.Un=t,this.I=n,this.rc=i,this.sc=r,this.ec=s,this.oc=e,this.hc=u,this.cc=o,this.ac=h,this.fc=c,this.vc=8e3,this.lc=64e3,this.wc=2e3,this.yc=2e3,this.mc="",this.gc=null,this.Ac=!1,this.Sc="[data-cs-encrypt]"}return t.prototype.getEncryptionSelectors=function(){return this.Sc},t.prototype.setEncryptionSelectors=function(t){if(Ls(t)){for(var n=csString.prototype.split.call(this.Sc,","),i=0,r=csString.prototype.split.call(t,",");i<r.length;i++){var s=r[i];-1===csArray.prototype.indexOf.call(n,s)&&csArray.prototype.push.call(n,s)}this.Sc=csArray.prototype.join.call(n,",")}},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case 1:return!(!p(t)&&!m(t)||!k.call(t,this.Sc)||"password"===t.type);case 8:case 3:var n=t.parentElement;return!!(n&&v(t)&&k.call(n,this.Sc));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.Ec=t},t.prototype.onInputNodeToEncrypt=function(t){this.bc=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.Rc=t},t.prototype.onApiErrorToEncrypt=function(t){this.Nc=t},t.prototype.init=function(){var t=this;this.pu=new TextEncoder,this.ec.onSerializeData((function(n){return t.Tc(n)})),this.oc.onSerializeData((function(n){return t.Oc(n)})),this.hc.onSerializeData((function(n){return t.kc(n)})),this.cc.onSerializeData((function(n){return t.Ic(n)})),this.ac.onSerializeData((function(n){return t.Cc(n)})),this._c(this.I.encryptionPublicKey)},t.prototype._c=function(t){return W(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,this.rc.importKey(t)];case 1:return n=i.sent(),this.Ac=!0,n?(this.gc=n,this.ec.serializeDataFromBuffer(),this.cc.serializeDataFromBuffer()):(this.ec.clear(),this.cc.clear(),nn.warn("Fail to import public key '".concat(t,"'"))),this.oc.serializeDataFromBuffer(),this.hc.serializeDataFromBuffer(),this.ac.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Ac?this.Tc(t):this.ec.addData(t)},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Ac?this.Oc(t):this.oc.addData(t)},t.prototype.registerInputNodeToEncrypt=function(t){this.Ac?this.kc(t):this.hc.addData(t)},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Ac?this.Ic(t):this.cc.addData(t)},t.prototype.registerApiErrorToEncrypt=function(t){this.Ac?this.Cc(t):this.ac.addData(t)},t.prototype.Tc=function(t){var n=this,i=t.textNode,r=this.Un.getId(i);if(r&&this.gc){var s=G(G({},t),{targetId:r,date:gt()});this.xc(s,(function(t){return t.textNode.data}),(function(){return nn.warn("Fail to encrypt text node data")}),(function(t,i){return n.Pc(t,i)}))}},t.prototype.Oc=function(t){var n=this;if(!this.gc)return this.Mc(t);this.xc(t,(function(t){return t.textNode.data}),(function(){nn.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),n.Mc(t)}),(function(t,i){return n.Pc(t,i)}))},t.prototype.kc=function(t){var n=this;if(!this.gc)return this.Lc(t);this.xc(t,(function(t){return t.targetValue}),(function(){nn.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),n.Lc(t)}),(function(t,i){return n.Dc(t,i)}))},t.prototype.Ic=function(t){var n=this;this.gc&&this.xc(t,(function(t){return t.userIdentifier}),(function(){nn.warn("Fail to encrypt userIdentifier")}),(function(t,i){return n.Uc(t,i)}))},t.prototype.xc=function(t,n,i,r){return W(this,void 0,void 0,(function(){var s,e;return K(this,(function(u){switch(u.label){case 0:return s=n(t),[4,this.rc.encrypt({publicKey:this.gc},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(i(t),[2])}}))}))},t.prototype.Mc=function(t){var n=t.targetId,i=t.serializedTextData,r={date:t.date,args:[n,i],type:zn.MUTATION_CHARACTER_DATA};this.Ec(r)},t.prototype.Lc=function(t){var n=t.targetId,i=t.targetValue,r={date:t.date,args:[n,csString.prototype.replace.call(i,/\S/g,"")],type:zn.INPUT_TEXT};this.bc(r)},t.prototype.Pc=function(t,n){var i=t.targetId,r=t.serializedTextData,s={date:t.date,args:[i,r,n,this.I.encryptionPublicKeyId],type:zn.MUTATION_ENCRYPTED_CHARACTER_DATA};this.Ec(s)},t.prototype.Dc=function(t,n){var i=t.targetId,r=t.targetValue,s={date:t.date,args:[i,csString.prototype.replace.call(r,/\S/g,""),n,this.I.encryptionPublicKeyId],type:zn.INPUT_ENCRYPTED_TEXT};this.bc(s)},t.prototype.Uc=function(t,n){var i={type:zn.USER_IDENTIFIER,args:[n,t.keyId],date:t.date};this.Rc(i)},t.prototype.Cc=function(t){return W(this,void 0,void 0,(function(){var n,i,r,s,e,u,o,h,c,a,f;return K(this,(function(v){switch(v.label){case 0:return this.gc?[4,this.sc.generateEncryptionKey()]:(this.jc(t),[2]);case 1:if(n=v.sent(),i=this.sc.generateInitializationVector(),null===n||null===i)return this.jc(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Hc(t.customRequestHeaders,this.vc)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.qc(n,i,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Hc(t.customResponseHeaders,this.vc)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.qc(n,i,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Hc(t.queryParameters,this.yc)?[3,9]:(t.queryParameters=this.mc,[3,11]):[3,11];case 9:return e=this.fc.compressSync(t.queryParameters,"base64"),u=t,[4,this.qc(n,i,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Hc(t.requestBody,this.lc)?[3,12]:(t.requestBody=this.mc,[3,14]):[3,14];case 12:return o=this.fc.compressSync(t.requestBody,"base64"),h=t,[4,this.qc(n,i,o)];case 13:h.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Hc(t.responseBody,this.wc)?[3,15]:(t.responseBody=this.mc,[3,17]):[3,17];case 15:return c=this.fc.compressSync(t.responseBody,"base64"),a=t,[4,this.qc(n,i,c)];case 16:a.responseBody=v.sent(),v.label=17;case 17:return f=t,[4,this.zc(n,this.gc)];case 18:return f.secret=v.sent(),[3,20];case 19:return v.sent(),this.jc(t),[2];case 20:return t.initializationVector=this.sc.exportInitializationVector(i),t.encryptionKeyId=this.I.encryptionPublicKeyId,this.Nc(t),[2]}}))}))},t.prototype.Hc=function(t,n){return this.pu.encode(t).byteLength<=n},t.prototype.jc=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.Nc(t)},t.prototype.qc=function(t,n,i){return W(this,void 0,void 0,(function(){var r;return K(this,(function(s){switch(s.label){case 0:return[4,this.sc.encrypt({encryptionKey:t,initializationVector:n},i)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.zc=function(t,n){return W(this,void 0,void 0,(function(){var i,r;return K(this,(function(s){switch(s.label){case 0:return[4,this.sc.exportSecret(t)];case 1:if(!(i=s.sent()))throw new Error("Export secret failed");return[4,this.rc.encrypt({publicKey:n},i)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),Hs=function(){function t(t,n){this.Bc=t,this.tr=n,this.Ye=!1}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.Ye=!0,this.Vc()&&!this.Fc&&(this.Fc=this.Gc())},t.prototype.stop=function(){this.Ye=!1,this.Fc&&this.Fc.disconnect()},t.prototype.Gc=function(){var t=this,n=new window.PerformanceObserver((function(n){t.Jc(n)}));try{n.observe({type:"resource",buffered:!0})}catch(t){nn.error("Error observing resource entries:",t)}return n},t.prototype.Jc=function(t){var n=this;if(this.Ye){var i=t.getEntries();csArray.prototype.forEach.call(csArray.prototype.map.call(i,(function(t){return n.Wc(t)})),(function(t){return n.Ti(t)}))}},t.prototype.Wc=function(t){var n;return{date:xs(),type:zn.PERFORMANCE_RESOURCE_TIMING,args:[G(G({},t.toJSON()),{name:this.Bc.anonymizeUrl(t.name,(null===(n=this.tr)||void 0===n?void 0:n.getUrlMaskingPatterns())||[]),serverTiming:[]})]}},t.prototype.Vc=function(){var t,n;return null==(null===(t=window.PerformanceObserver)||void 0===t?void 0:t.supportedEntryTypes)?void 0:csArray.prototype.includes.call(null===(n=window.PerformanceObserver)||void 0===n?void 0:n.supportedEntryTypes,"resource")},t}(),qs=function(){function t(t,n){this.Bc=t,this.tr=n}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){if(this.Kc()&&!this.Yc&&(this.Yc=csArray.prototype.pop.call(window.performance.getEntriesByType("navigation")),this.Yc)){var t=this.Xc(this.Yc);this.Ti(t)}},t.prototype.Xc=function(t){var n;return{date:xs(),type:zn.PERFORMANCE_NAVIGATION_TIMING,args:[G(G({},t.toJSON()),{name:this.Bc.anonymizeUrl(t.name,(null===(n=this.tr)||void 0===n?void 0:n.getUrlMaskingPatterns())||[])})]}},t.prototype.Kc=function(){var t,n;return null==(null===(t=window.PerformanceObserver)||void 0===t?void 0:t.supportedEntryTypes)?void 0:csArray.prototype.includes.call(null===(n=window.PerformanceObserver)||void 0===n?void 0:n.supportedEntryTypes,"navigation")},t}(),zs="v2/recording",Bs=["setCapturedElementsSelector"],Vs=["setPIISelectors"],Fs=["setEncryptionSelectors"],Gs=["isRecording"],Js=["cssrm:onlineAssets:activateForNextPageview"],Ws=["cssrm:getStatus"],Ks=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b){this.$c=t,this.W=n,this.M=i,this.fc=r,this.Dn=s,this._o=e,this.Ih=u,this.Zc=o,this.L=h,this.Yi=c,this.$=a,this.jn=f,this.$i=v,this.Zi=l,this.Qi=d,this.gu=w,this.tr=y,this.Ei=p,this.Qc=m,this.ta=g,this.na=A,this.ce=S,this.ia=E,this.Bc=b,this.ur=null,this.ra=null}return t.prototype.init=function(){var t=this,n=new Ts("csPersisted");this.sa(n);var i=new ki;this.qi=new Oi;var r=new Cr,s=new Gi(this.jn);this.ea=new $i(this.L,this.M),this.ea.init();var e=new lr,u=new yr(this.ce,r),o=[],h=[],c=[new ds,s,this.ea,e];if(this.sc=new Fr(window.crypto),this.rc=new Jr(window.crypto),this.rc.init(),this.sc.init(),this.fu()){var a=new Lr,f=new Lr,v=new Lr,l=new Lr,d=new Lr;this.Hn=new js(r,this.M,this.rc,this.sc,a,f,v,d,l,this.fc),this.Hn.init();var w=new Mr(this.Hn);csArray.prototype.push.call(c,w),this.Zc.register(Fs,(function(n){t.Hn.setEncryptionSelectors(n)}))}if(this.M.useStaticResourceManager){var y=new Wr(window.crypto);if(y.init(),this.ur=new Ps(y),this.ur.init(),this.ur.isStaticResourceManagerSupported()){var p=new Is(this.ur,this.jn);csArray.prototype.push.call(c,p),this.ra=new Cs(this.ur,this.M.getStaticResourceManagerUri(),this.Ih)}}var m=new gs,g=new ws(r,m);if(g.init(),g.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(c,g),this.M.textVisibilityEnabled&&xr.isSupported()){var A=new xr(this.jn,1e3);csArray.prototype.push.call(c,A),csArray.prototype.push.call(o,A),csArray.prototype.push.call(h,A)}var S,E=new ls;E.isSupported()&&csArray.prototype.push.call(c,E.getProcessor()),S=this.ua()?new fs(c,r):new vs(c);var b=new Zi(i,this.Ih,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.W.getRecordingStates(),",")}}}),R=new Pr("".concat(this.M.getRecordingUri(),"/").concat(zs)),N=new _s;this.js=new ps(this._o,this.M,this.$,N),this.js.init(),this.gi=new Li(S,r,this.ea,this.Hn),this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.Ji=new yi(this.Dn,r,this.jn,this.Hn),this.Ji.init();var T,O,k=new Ni(this.gi,u,e,this.Ei,r,this.jn);this.rr=new xi(this.qi,n,R,this.ir,b,h),T=new Hs(this.Bc,this.tr),O=new qs(this.Bc,this.tr),this.recordingService=new _i(this.M,this.qi,b,i,m,new Vi(r,this.jn,e,m),k,this.Ji,new ir(window.location,this.L,new ks),new Kr(this.gu,r,this.jn),this.Yi,this.W,e,new dr(window),this.$i,this.Zi,this.Qi,this.tr,this.Hn,E,this.ir,this.rr,g,this.ur,o,T,O),this.oa=new rr(this.Ji,k,new nr(this.M),this.recordingService,this.gi,this.js,this.Ei),this.Qc.addListener(this.recordingService),this.ta.addListener(this.recordingService),this.ta.addListener(this.oa),this.ra&&this.ta.addListener(this.ra),u.init(),this.oa.init(),this.recordingService.init(),this.Zc.register(Gs,(function(){return t.W.isReplayRecorded()&&!t.na.isUrlExcludedForSessionReplay()})),this.Zc.register(Bs,(function(n){t.ea.setWhitelistedElementsSelector(n),t.Ei.emitRecordingStatusChange()})),this.Zc.register(Vs,(function(n){t.jn.setPIISelectors(n),t.Ei.emitRecordingStatusChange()})),this.Zc.register(Js,(function(){t.recordingService.activateOnlineAssetsOnNextPageview(),t.Ei.emitRecordingStatusChange()})),this.Zc.register(Ws,(function(){return t.recordingService.getStaticResourceManagerStatus()})),this.$c.enableRecordingStatus(this.recordingService,this.jn,this.js,this.ea,this.W,this.Hn)},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.ra)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.rr.recover(),this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.W.isReplayRecorded()&&!this.na.isUrlExcludedForSessionReplay()&&(this.W.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ha())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.W.isReplayRecorded()||this.na.isUrlExcludedForSessionReplay()||this.W.isTemporarilyRecorded()||this.rr.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.W.isReplayRecorded()&&!this.na.isUrlExcludedForSessionReplay()?(this.W.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ca()):this.aa()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.aa()},t.prototype.onOptout=function(){this.aa()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentGranted(),this.Ei.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this.gi.setAnonymization(this.js.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.Ei.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===pn.NOT_RECORDED&&n===mn.ETR_OFF?(this.recordingService.clearEvents(),this.aa()):(this.ir.setQueryParams({rt:csArray.prototype.join.call(this.W.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.gi.isDOMSerializationInProgress()||this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.rr.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.rr.allowSendingLastMessage(),this.Ji.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.W.isReplayRecorded()&&!this.na.isUrlExcludedForSessionReplay()&&(this.W.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ha(),this.recordingService.triggerRecordingForSessionGranted())},t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.aa())},t.prototype.ha=function(){var t;this.recordingService.updateStaticResourceManagerOnlineAssets(),this.oa.start(),this.recordingService.start(),null===(t=this.ra)||void 0===t||t.start(),this.rr.start(),this.Ei.emitRecordingStatusChange()},t.prototype.aa=function(){var t;this.oa.stop(),this.recordingService.stop(),null===(t=this.ra)||void 0===t||t.stop(),this.rr.stop(),this.Ei.emitRecordingStatusChange()},t.prototype.ca=function(){this.aa(),this.ha()},t.prototype.sa=function(t){this.ir=this.ia.create("".concat(this.M.getRecordingUri(),"/").concat(zs),!0,"byteArray",t)},t.prototype.ua=function(){return ms.isAsyncSerializationSupported()&&this.M.asyncSerializerEnabled},t.prototype.fu=function(){return!!this.M.encryptionPublicKey&&this.M.encryptionPublicKeyId>0&&this.rc.isSupported()&&this.sc.isSupported()},J([ci("Recording.onStartTracking")],t.prototype,"onStartTracking",null),J([ci("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(Ds||(Ds={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===pn.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===pn.BLOCKED_BY_CONSENT_WITHDRAWN},t.isRecordingWithDrawn=function(t){return t.recordingState===pn.BLOCKED_BY_CONSENT_WITHDRAWN}}(Us||(Us={}));var Ys=function(){function t(t,n,i,r){this.J=t,this.W=n,this.M=i,this.fa=r,this.va=!1}return t.prototype.isNaturalPageViewSent=function(){return this.va},t.prototype.setNaturalPageViewSent=function(t){this.va=t},t.prototype.getTrackingContext=function(){var t=this.W.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this.da(t),r=this.wa(),s=this.ya(),e=this.pa();return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:s,isRecording:this.ma(),uxaDomain:e,recordingConsentState:this.ga(t)}},t.prototype.getSessionKey=function(){var t=this.J.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.ga=function(t){return Us.isReplayConsentNeeded(this.M)?t.recordingState===pn.BLOCKED_BY_CONSENT_NOT_EXPRESSED?Ds.NOT_EXPRESSED:t.recordingState===pn.BLOCKED_BY_CONSENT_WITHDRAWN?Ds.WITHDRAWN:Ds.GRANTED:Ds.NOT_NEEDED},t.prototype.da=function(t){return t.pageNumber},t.prototype.wa=function(){return this.M.projectId},t.prototype.ya=function(){return this.fa.getPageViewType()},t.prototype.pa=function(){return this.M.uxaDomain},t.prototype.ma=function(){return this.W.isReplayRecorded()},t}(),Xs=function(){function t(t){this.Aa=t,this.Sa=[]}return t.prototype.handleCommand=function(t){if(Ct(t)&&(this.Ea(t),this.Aa.isNaturalPageViewSent())){var n=this.Aa.getTrackingContext();null!==n&&this.ba(t,n)}},t.prototype.Ea=function(t){csArray.prototype.push.call(this.Sa,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Aa.getTrackingContext();null!==n&&csArray.prototype.map.call(this.Sa,(function(i){return t.ba(i,n)}))},t.prototype.ba=function(t,n){setTimeout((function(){t(n)}))},t}(),$s=function(){function t(t){this.Aa=t,this.Ra=[]}return t.prototype.handleCommand=function(t){return this.Aa.isNaturalPageViewSent()?this.Na(t):void this.Ta(t)},t.prototype.Na=function(t){var n=this.Aa.getSessionKey();return this.Uo(t)&&null!==n&&this.ba(t.callback,n),n},t.prototype.Ta=function(t){this.Uo(t)&&csArray.prototype.push.call(this.Ra,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Aa.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.Ra,(function(i){t.ba(i,n)})),this.Ra=[]},t.prototype.Uo=function(t){return t&&"function"==typeof t.callback},t.prototype.ba=function(t,n){setTimeout((function(){t(n)}))},t}(),Zs=function(){function t(t,n){this.Oa=t,this.Aa=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.Aa.getTrackingContext();null!==n&&this.Oa.sendToChildren(Yt.TrackingContextResultMessage,G(G({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.Aa.isNaturalPageViewSent()){var n=this.Aa.getTrackingContext();null!==n&&(t.trackingContext=n,this.Oa.sendToChildren(Yt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Aa.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Wt.AfterPageView};this.Oa.sendToChildren(Yt.IntegrationCallback,n)}},t}();function Qs(t,n){var i,r=t.isRecording,s=t.pageNumber,e=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var h=o[1],c=o[2];i="".concat(u,"/quick-playback/index.html?pid=").concat(e,"&uu=").concat(h,"&sn=").concat(c,"&pvid=").concat(s,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(gt()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}var te,ne,ie=function(){function t(t){this.Aa=t}return t.prototype.handleCommand=function(t,n){Ot(t)&&Ct(n)&&this.ba(t,n)},t.prototype.ba=function(t,n){var i=this;setTimeout((function(){var r=i.Aa.getTrackingContext();if(r){var s=Qs(r,t);n(s)}}))},t}(),re=function(){function t(){this.Sa=new Set}return t.prototype.handleCommand=function(t){var n=this;return Ct(t)?(this.Sa.add(t),function(){n.Sa.delete(t)}):null},t.prototype.executeCallbacks=function(t){this.Sa.forEach((function(n){setTimeout((function(){try{n(t)}catch(t){}}))}))},t}(),se=["afterPageView"],ee=["getSessionKey"],ue=["onRecordingStateChange"],oe=["replay:link:generate"],he=function(){function t(t,n,i,r,s,e,u){this.J=t,this.W=n,this.Zc=i,this.ka=r,this.Oa=s,this.M=e,this.fa=u}return t.prototype.init=function(){var t=this;this.Aa=new Ys(this.J,this.W,this.M,this.fa),this.Ia=new Xs(this.Aa),this.Ca=new $s(this.Aa),this._a=new re,this.xa=new ie(this.Aa),this.Pa=new Zs(this.Oa,this.Aa),this.ka.addListener(this.Pa),this.Zc.register(ee,(function(n){return t.Ca.handleCommand(n)})),this.Zc.register(se,(function(n){return t.Ia.handleCommand(n)})),this.Zc.register(ue,(function(n){return t._a.handleCommand(n)})),this.Zc.register(oe,(function(n,i){t.Us&&t.xa.handleCommand(G(G({},n),{recordingStartTimestamp:parseInt(t.Us.getRecordingStartTimestamp(),10)}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.Aa.setNaturalPageViewSent(!0),this.Ca.flushPendingCallbacks(),this.Ia.executeRegisteredCallbacks(),this.Pa.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Ia.executeRegisteredCallbacks(),this.Pa.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(t,n){var i={isRecording:this.Us.isRecording(),recordingStartTimestamp:parseInt(this.Us.getRecordingStartTimestamp(),10),etrState:n};this._a.executeCallbacks(i)},t.prototype.onRecordingStatusChange=function(){var t,n={isRecording:this.Us.isRecording(),recordingStartTimestamp:parseInt(this.Us.getRecordingStartTimestamp(),10),etrState:(null===(t=this.W.getSession())||void 0===t?void 0:t.etrState)||mn.ETR_OFF};this._a.executeCallbacks(n)},t.prototype.setRecordingService=function(t){this.Us=t},J([tr()],t.prototype,"onRecordingStateChange",null),J([tr()],t.prototype,"onRecordingStatusChange",null),t}(),ce=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=Tt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return Tt(t)&&(Tt(n)||Nt(n))},t}(),ae=function(t){function n(n,i){var r=t.call(this)||this;return r.Ma=n,r.L=i,r.La=[],r}return F(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.La,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.La=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?ce.isValid(t,n)&&this.Ma.add(new ce(this.L.anonymizeEmail(t),this.L.anonymizeEmail(n))):csArray.prototype.push.call(this.La,{key:t,value:n})},n}(Ci),fe=function(){function t(t){this.fc=t,this.Ma=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Ma,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Ma=[]},t.prototype.onBatchReady=function(t){this.Da=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.Ma;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.fc.compressSync(csJSON.stringify(t),"base64"),ct:this.fc.algorithm}},t.prototype.setBatchReadyCall=function(){this.Da()},J([tr(),hn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),ve=["trackDynamicVariable"],le=function(){function t(t,n,i,r,s,e){this.Zc=t,this.W=n,this.M=i,this.Ih=r,this.fc=s,this.L=e,this._=new ct(this.M.getTrackerUri(),"dvar"),this.Ma=new fe(this.fc),this.Ua=new ae(this.Ma,this.L)}return t.prototype.init=function(){var t=this;this._.setRequestParametersProviders(this.Ih,this.Ma),this.W.setDynamicVariablesService(this.Ua),this.Ma.onBatchReady((function(){return t._.send()})),this._.after((function(){return t.Ma.clear()})),this.Zc.register(ve,(function(n){var i=void 0===n?{}:n,r=i.key,s=i.value;t.Ua.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.Ua.start()},t}(),de=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),Tt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return It(t)&&Rt(t.revenue)&&Tt(t.currency)&&t.currency.length<=10&&(!It(t.id)||Tt(t.id))},t}(),we=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.ja(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return kt(n.sku)&&(i.sku=n.sku),kt(n.category)&&(i.category=n.category),kt(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.ja=function(t){return It(t)&&Tt(t.id)&&Tt(t.name)&&Rt(parseFloat(t.price))&&Nt(parseInt(t.quantity,10))&&(!kt(t.sku)||Tt(t.sku))&&(!kt(t.category)||Tt(t.category))&&(!kt(t.merchant)||Tt(t.merchant))},t}(),ye=function(){function t(t,n,i){this.L=t,this.Ha=n,this.Yi=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.L.anonymizeFields(t,["id"]);this.qa=de.from(n)},t.prototype.getTransaction=function(){return this.qa},t.prototype.sendTransaction=function(){null!==this.Ha&&null!==this.Yi&&this.Yi.isSessionValid()&&(this.qa.hasValidRevenue()?this.Ha.send():nn.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Ct(t)){var n=this.L.anonymizeFields(t,["id","name","sku","category"]),i=we.from(n);null!==i&&csArray.prototype.push.call(this.za,i)}},t.prototype.getItems=function(){return this.za},t.prototype.clear=function(){this.qa=de.from({revenue:NaN}),this.za=[]},t.prototype.getRequestParameters=function(){var t={id:this.qa.id?"".concat(this.qa.id):"",revenue:"".concat(this.qa.revenue)};return kt(this.qa.tax)&&(t.tax="".concat(this.qa.tax)),kt(this.qa.shipping)&&(t.shipping="".concat(this.qa.shipping)),kt(this.qa.currency)&&(t.cu="".concat(this.qa.currency)),t.items=window.csJSON.stringify(this.za),t},t}(),pe=function(){function t(t,n){this.Ba=csString.prototype.slice.call(t,0,100),this.Va=n&&csString.prototype.slice.call(n,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.Ba},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.Va},enumerable:!1,configurable:!0}),t}(),me=function(){function t(t,n){this.Fa=t,this.Yi=n,this.Ga=null}return t.prototype.addToCart=function(t){!this.Ja(t.sku)||kt(t.merchant)&&!Tt(t.merchant)||(this.Ga=new pe(t.sku,t.merchant),this.sendCartItem())},t.prototype.Ja=function(t){return Tt(t)&&t.length>0},t.prototype.getCartItem=function(){return this.Ga},t.prototype.sendCartItem=function(){this.Yi.isSessionValid()&&this.Fa.send()},t.prototype.clear=function(){this.Ga=null},t.prototype.getRequestParameters=function(){if(!this.Ga)return{};var t={sku:"".concat(this.Ga.sku)};return kt(this.Ga.merchant)&&this.Ga.merchant.length>0&&(t.me=this.Ga.merchant),t},t}(),ge=["ecommerce:addToCart","ec:cart:add"],Ae=["ecommerce:addTransaction","ec:transaction:create"],Se=["ecommerce:addItem","ec:transaction:items:add"],Ee=["ecommerce:send","ec:transaction:send"],be=function(){function t(t,n,i,r,s,e,u){this.M=t,this.J=n,this.W=i,this.Zc=r,this.L=s,this.Yi=e,this.$=u}return t.prototype.init=function(){var t=new ct(this.M.getTrackerUri(),"transaction"),i=new ct(this.M.getTrackerUri(),"addtocart"),r=new ye(this.L,t,this.Yi),s=new me(i,this.Yi);t.setRequestParametersProviders(this.M,this.J,this.W,this.$,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.M,this.J,this.W,this.$,s,n),i.after((function(){s.clear()})),this.Zc.register(Ae,(function(t){r.addTransaction(t)})),this.Zc.register(Se,(function(t){return r.addItem(t)})),this.Zc.register(Ee,(function(){return r.sendTransaction()})),this.Zc.register(ge,(function(t){s.addToCart(t)}))},t}(),Re=function(){function t(t){this.ee=t.performance}return t.prototype.getRequestParameters=function(){if(this.Wa())return{};var t=this.Ka();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.Ka=function(){var t=this.ee.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.Wa=function(){return!(this.ee&&this.ee.timing&&this.ee.timing.loadEventEnd>0)},t}();function Ne(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT"}(te||(te={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(ne||(ne={}));var Te,Oe=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),ke=function(t){function n(n){var i=t.call(this)||this;return i.Ya=n,i.supportedEventTypes=[te.MOUSEDOWN,te.MOUSEUP,te.CLICK,te.MOUSEOVER,te.TAP],i}return F(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=this.Ya.getEventTargetPathAndTargetLink(t),r=i.path,s=i.targetLink;return n.tgt=r,n.tgtLk=s,n},n}(Oe),Ie=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),Ce=function(t){function n(n){var i=t.call(this)||this;return i.Ya=n,i.supportedEventTypes=[te.MOUSEDOWN,te.MOUSEUP,te.CLICK,te.MOUSEOVER,te.TAP,te.DRAG,te.FLICK],i}return F(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.Ya.getEventTargetPath(t)),n},n}(Oe),_e=function(){function t(t,n,i,r){this.M=t,this.Ya=n,this.gu=i,this.Ce=r,this.Xa=[],this.M.eMerchandisingEnabled&&csArray.prototype.push.call(this.Xa,new ke(this.Ya)),csArray.prototype.push.call(this.Xa,new Ce(this.Ya))}return t.prototype.processGesture=function(t,n){switch(t.type){case qr.TAP:this.$a(n);break;case qr.FLICK:this.Za(t,n);break;case qr.DRAG:this.Qa(t,n)}},t.prototype.$a=function(t){var n={type:te.TAP,ts:0,x:0,y:0,tgt:""},i=Ie.build(t,n,this.Xa);i.tgt!==H.INVALID_ELEMENT&&this.Ti(i)},t.prototype.Qa=function(t,n){var i,r,s={type:te.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.Ce)||void 0===i?void 0:i.collectGestureDistance)&&(s.distance=t.distance),(null===(r=this.Ce)||void 0===r?void 0:r.collectGestureVelocity)&&(s.velocity=t.velocity);var e=Ie.build(n,s,this.Xa);e.tgt!==H.INVALID_ELEMENT&&this.Ti(e)},t.prototype.Za=function(t,n){var i,r,s={type:te.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.Ce)||void 0===i?void 0:i.collectGestureDistance)&&(s.distance=t.distance),(null===(r=this.Ce)||void 0===r?void 0:r.collectGestureVelocity)&&(s.velocity=t.velocity);var e=Ie.build(n,s,this.Xa);e.tgt!==H.INVALID_ELEMENT&&this.Ti(e)},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){var n=this;this.gu.subscribe(t.Au,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.gu.unsubscribe(t.Au)},t.Au="AnalysisGestureTracker",J([vi()],t.prototype,"processGesture",null),t}(),xe=function(){function t(t){this.Rn=t,this.tf=gr("ShadowRootObserver"),this.nf=[],this.if()}return t.prototype.observe=function(t){csArray.prototype.push.call(this.nf,t),this.rf(),this.sf(t,!0);this.Ai.observe(t,{subtree:!0,childList:!0})},t.prototype.disconnect=function(){this.tf=gr("ShadowRootObserver"),this.nf=[],this.Ai.disconnect(),this.ef&&this.ef.deactivate()},t.prototype.rf=function(){var t=this;this.ef||(this.ef=Hi({target:Element.prototype,methodName:"attachShadow",hook:function(n){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}(t.nf,(function(t){return Ri.isDescendantOf(n.result.host,t)}))&&t.Rn(n.result,"added")}})),this.ef.activate()},t.prototype.sf=function(t,n){var i=this;Ai(Ei.getAllShadowHosts(t),(function(t){if(!t[i.tf]){t[i.tf]=!0;i.Rn(csElementshadowRoot.apply(t),n?"initial":"added"),i.Ai.observe(csElementshadowRoot.apply(t),{subtree:!0,childList:!0})}}))},t.prototype.if=function(){var t=this;this.Ai=new Nr((function(n){for(var i=0,r=n;i<r.length;i++){var s=r[i];Ai(s.addedNodes,(function(n){return t.sf(n,!1)})),csArray.prototype.forEach.call(gi(s.removedNodes,Ei.getAllShadowHosts),(function(n){n[t.tf]&&(t.Rn(csElementshadowRoot.apply(n),"removed"),t.Ai.unobserve(csElementshadowRoot.apply(n)),delete n[t.tf])}))}}))},t}();!function(t){t.getRelativePosition=function(t){var n=fi(t);if(!(n&&f(n)&&Ct(n.getBoundingClientRect)&&It(t.pageX)&&It(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-bi.windowOffsetX(),s=t.pageY-i.top-bi.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,s+=n.scrollTop);var e=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Te||(Te={}));var Pe,Me=function(t){function n(n,i){var r=t.call(this)||this;return r.I=n,r.Ya=i,r.supportedEventTypes=[te.MOUSEMOVE],r.uf="",r}return F(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Te.getRelativePosition(t),r=i.valid,s=i.xRel,e=i.yRel;if(r){var u=this.Ya.getEventTargetPath(t);u!==H.INVALID_ELEMENT&&(n.xRel=s,n.yRel=e,u!==this.uf||this.I.iframesTracking?(this.uf=u,n.tgtHM=u):n.tgtHM="")}else this.uf="";return n},n}(Oe),Le=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[te.CHANGE],n.hf=["text","email","number","search","tel","url","password"],n}return F(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=fi(t);return p(i)&&csArray.prototype.indexOf.call(this.hf,i.type)>=0&&(n.isBlank=""===i.value),n},n}(Oe),De=function(){function t(t,n,i){var r=this;this.I=t,this.Ya=n,this.Dn=i,this.cf="select, select *, input, textarea",this.af="select, select *, input, textarea",this.ff="a, a *, button, button *, select, select *, input, textarea",this.vf="input, select, textarea",this.lf=150,this.df=400,this.wf=!1,this.yf=Qi((function(t,n){return r.scrollListener(t,n)}),this.lf),this.pf=Qi((function(t){return r.resizeListener(t)}),this.lf),this.mf=Qn((function(t){return r.mouseMoveListener(t)}),this.df),this.gf=[{boundElement:window,type:"resize",listener:function(){return r.pf()}},{boundElement:document,type:"scroll",listener:function(t){return r.yf(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.mf(r.Af(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Sf=[{type:"change",listener:this.Dn.on(this.af,(function(t){return r.changeListener(t)}))}],this.Ef=Y([{boundElement:document,type:"mouseover",listener:this.Dn.on(this.ff,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.Dn.on(this.ff,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.Dn.on(this.cf,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.Dn.on(this.cf,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"keyup",listener:this.Dn.on(this.vf,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.Dn.on(this.vf,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.Dn.on(this.vf,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.Dn.on(this.vf,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.Dn.on(this.vf,(function(t){return r.pasteListener(t)}))}],csArray.prototype.map.call(this.Sf,(function(t){return G(G({},t),{boundElement:document})})),!0),this.Xa=[],this.mi={},this.zn=new Set,this.bf=function(t,n){switch(n){case"initial":r.zn.add(t);break;case"added":r.zn.has(t)||(r.zn.add(t),r.si(t));break;case"removed":r.ci(t),r.zn.delete(t)}},Ei.isSupported()&&(this.Rf=new xe(this.bf)),this.Zn(),this.I.eMerchandisingEnabled&&csArray.prototype.push.call(this.Xa,new ke(this.Ya)),this.I.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(this.Xa,new Me(this.I,this.Ya)),csArray.prototype.push.call(this.Xa,new Le,new Ce(this.Ya))}return t.prototype.si=function(t){if(E(t)){var n=this.Nf();csArray.prototype.forEach.call(n,(function(t){return Wn(t)}))}else{n=this.Tf();csArray.prototype.forEach.call(n,(function(n){Wn(G(G({},n),{boundElement:t}))}))}},t.prototype.ci=function(t){if(E(t)){var n=this.Nf();csArray.prototype.forEach.call(n,(function(t){return Kn(t)}))}else{n=this.Tf();csArray.prototype.forEach.call(n,(function(n){Kn(G(G({},n),{boundElement:t}))}))}},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){var t,n=this;null===(t=this.Rf)||void 0===t||t.observe(document),this.si(document),this.zn.forEach((function(t){return n.si(t)})),this.resizeListener()},t.prototype.stop=function(){var t,n=this;this.ci(document),this.zn.forEach((function(t){return n.ci(t)})),null===(t=this.Rf)||void 0===t||t.disconnect(),this.zn.clear()},t.prototype.flushPendingDebouncedListeners=function(){this.yf.flushPending(),this.pf.flushPending()},t.prototype.Tf=function(){return this.Dn.isMatchesSelectorSupported()?this.Sf:(nn.warn("Element.matches is not implemented yet"),[])},t.prototype.Nf=function(){return this.Dn.isMatchesSelectorSupported()?Y(Y([],this.gf,!0),this.Ef,!0):(nn.warn("Element.matches is not implemented yet"),this.gf)},t.prototype.resizeListener=function(t){var n=li.getScrollContainer(),i=_t(n);i&&(this.wf=!0);var r={type:te.RESIZE,ts:0,x:i?n.clientWidth:bi.windowWidth(),y:i?n.clientHeight:bi.windowHeight()};void 0!==t&&(r.d=t),this.Ti(r)},t.prototype.scrollListener=function(t,n){var i=li.isEventOnScrollContainer(n);!this.wf&&i&&this.resizeListener();var r={type:te.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:bi.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:bi.windowOffsetY(),d:t},s=Ie.build(n,r,this.Xa);this.Ti(s)},t.prototype.mouseMoveListener=function(t){var n={type:te.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ie.build(t,n,this.Xa);this.Ti(i)},t.prototype.mouseDownListener=function(t){var n={type:te.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.mouseUpListener=function(t){var n={type:te.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.clickListener=function(t){var n={type:te.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.mouseOverListener=function(t){var n={type:te.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.mouseOutListener=function(t){var n={type:te.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Ya.getEventTargetPath(t)},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.focusInListener=function(t){var n={type:te.FOCUSIN,ts:0,tgt:this.Ya.getEventTargetPath(t)},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.focusOutListener=function(t){var n={type:te.FOCUSOUT,ts:0,tgt:this.Ya.getEventTargetPath(t)},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.changeListener=function(t){var n={type:te.CHANGE,ts:0,tgt:this.Ya.getEventTargetPath(t)},i=Ie.build(t,n,this.Xa);this.Of(i)},t.prototype.copyListener=function(t){var n={type:te.COMMAND,ts:0,tgt:this.Ya.getEventTargetPath(t),key:ni.COPY};this.Of(n)},t.prototype.cutListener=function(t){var n={type:te.COMMAND,ts:0,tgt:this.Ya.getEventTargetPath(t),key:ni.CUT};this.Of(n)},t.prototype.pasteListener=function(t){var n={type:te.COMMAND,ts:0,tgt:this.Ya.getEventTargetPath(t),key:ni.PASTE};this.Of(n)},t.prototype.keyUpListener=function(t){var n={type:te.KEYUP,ts:0,tgt:this.Ya.getEventTargetPath(t),key:this.kf(t)};this.Of(n)},t.prototype.keyDownListener=function(t){var n={type:te.KEYDOWN,ts:0,tgt:this.Ya.getEventTargetPath(t),key:this.kf(t)};this.Of(n)},t.prototype.kf=function(t){var n=this.mi[t.key];return void 0===n?ti.ALPHANUMERICAL:n},t.prototype.Of=function(t){Ne(t)&&t.tgt!==H.INVALID_ELEMENT&&this.Ti(t)},t.prototype.Af=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.Zn=function(){this.mi[" "]=ti.SPACE,this.mi.Spacebar=ti.SPACE,this.mi.Enter=ti.ENTER,this.mi.Backspace=ti.BACKSPACE,this.mi.Delete=ti.DELETE,this.mi.ArrowUp=ti.ARROWUP,this.mi.ArrowDown=ti.ARROWDOWN,this.mi.ArrowLeft=ti.ARROWLEFT,this.mi.ArrowRight=ti.ARROWRIGHT,this.mi.Up=ti.ARROWUP,this.mi.Down=ti.ARROWDOWN,this.mi.Left=ti.ARROWLEFT,this.mi.Right=ti.ARROWRIGHT,this.mi.CapsLock=ti.CAPSLOCK,this.mi.Shift=ti.SHIFT,this.mi.Tab=ti.TAB},J([hn("Event handler type: resize")],t.prototype,"resizeListener",null),J([hn("Event handler type: scroll")],t.prototype,"scrollListener",null),J([hn("Event handler type: mouseMove"),vi()],t.prototype,"mouseMoveListener",null),J([hn("Event handler type: mouseDown"),vi()],t.prototype,"mouseDownListener",null),J([hn("Event handler type: mouseUp"),vi()],t.prototype,"mouseUpListener",null),J([hn("Event handler type: click"),vi()],t.prototype,"clickListener",null),J([hn("Event handler type: mouseOver"),vi()],t.prototype,"mouseOverListener",null),J([hn("Event handler type: mouseOut"),vi()],t.prototype,"mouseOutListener",null),J([hn("Event handler type: focusIn")],t.prototype,"focusInListener",null),J([hn("Event handler type: focusOut")],t.prototype,"focusOutListener",null),J([hn("Event handler type: change")],t.prototype,"changeListener",null),J([hn("Event handler type: copy")],t.prototype,"copyListener",null),J([hn("Event handler type: cut")],t.prototype,"cutListener",null),J([hn("Event handler type: paste")],t.prototype,"pasteListener",null),J([hn("Event handler type: keyup")],t.prototype,"keyUpListener",null),J([hn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ue=function(){function t(){var t=this;this.If=100,this.Cf=0,this._f=bi.documentHeight(),this.xf={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){Wn(this.xf),this.reset()},t.prototype.stop=function(){Kn(this.xf)},t.prototype.reset=function(){this._f=bi.documentHeight();var t=li.getScrollContainer();if(null===t)this.Cf=this.Pf(bi.documentHeight());else{var n=this.Mf(t);this.Cf=this.Lf(t,n)}this.Ti()},t.prototype.maxScrollRateListener=function(t){var n,i;if(li.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.Mf(r);n=this.Df(r,s),i=this.Lf(r,s)}else n=bi.documentHeight(),i=this.Pf(n);(i>this.Cf||n>this._f)&&(this.Cf=i,n>this._f&&(this._f=n),this.Ti())},t.prototype.Pf=function(t){var n=Math.round(this.Uf()/t*100);return Math.min(n,this.If)},t.prototype.Uf=function(){var t=bi.windowHeight();return bi.windowOffsetY()+t},t.prototype.Lf=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.Df(t,n),s=Math.round(i/r*100);return Math.min(s,this.If)},t.prototype.Mf=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.Df=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Cf),mdh:"".concat(this._f)}},J([hn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}();!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden"}(Pe||(Pe={}));var je,He,qe,ze,Be,Ve,Fe=function(){function t(){var t=this;this.Ye=!1,this.jf=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.Hf(Pe.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.Hf(Pe.PagehideHidden):t.Hf(Pe.PagehideVisible);case"blur":return t.Hf(Pe.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.Ye||(this.Ye=!0,this.qf(),this.zf(),this.Bf())},t.prototype.stop=function(){this.Ye&&(this.Ye=!1,this.Vf(),this.Ff(),this.Gf())},t.prototype.onEvent=function(t){this.Hf=t},t.prototype.qf=function(){document.addEventListener("visibilitychange",this.jf)},t.prototype.Vf=function(){document.removeEventListener("visibilitychange",this.jf)},t.prototype.zf=function(){window.addEventListener("pagehide",this.jf)},t.prototype.Ff=function(){window.removeEventListener("pagehide",this.jf)},t.prototype.Bf=function(){window.addEventListener("blur",this.jf)},t.prototype.Gf=function(){window.removeEventListener("blur",this.jf)},t}(),Ge=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y){this.M=t,this.Jf=n,this.gu=i,this.Wf=r,this.Kf=s,this.Yf=e,this.Xf=u,this.$f=o,this.Yi=h,this.Wt=c,this.Zf=a,this.Qf=f,this.tv=v,this.ir=l,this.nv=d,this.iv=w,this.rv=y,this.yr=new Ii,this.sv=!1}return t.prototype.init=function(){var t,n,i,r=this;this.Jf.onEvent((function(t){return r.Er(t)})),this.gu.onEvent((function(t){return r.Er(t)})),this.Wf.onEvent((function(){var t=r.Wf.getRequestParameters();r.ir.setQueryParams(t),r.Xf.setQueryParams(t)})),this.Qf.onEvent((function(t){return r.ev(t)})),this.uv(),null===(t=this.nv)||void 0===t||t.onEvent((function(t){return r.Er(t)})),null===(n=this.iv)||void 0===n||n.onEvent((function(t){return r.Er(t)})),null===(i=this.rv)||void 0===i||i.onEvent((function(t){return r.Er(t)})),this.ov()},t.prototype.ov=function(){var t=this;this.Xf.onBeaconSuccess((function(){t.Yf.clearEvents()})),this.Xf.onBeaconFailure((function(n){t.hv(n)}))},t.prototype.initStates=function(){var t=this.$f.getRequestParameters(),n=this.Kf.getRequestParameters(),i=this.Wf.getRequestParameters();this.ir.setQueryParams(t),this.ir.setQueryParams(n),this.ir.setQueryParams(i),this.Xf.setQueryParams(t),this.Xf.setQueryParams(n),this.Xf.setQueryParams(i),this.cv()},t.prototype.start=function(t){var n,i,r;this.tv.start(),this.Jf.start(),this.Wf.start(),this.gu.start(),null===(n=this.nv)||void 0===n||n.start(),null===(i=this.rv)||void 0===i||i.start(),t||this.Qf.start(),null===(r=this.iv)||void 0===r||r.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.nv)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Pr(t)},t.prototype.ev=function(t){this.Yi.isCurrentPageviewValid()&&this.Pr(t)},t.prototype.Er=function(t){this.Yi.isSessionValid()&&this.Pr(t)},t.prototype.Pr=function(t){this.Yf.addEvent(this.av(t)),this.Yf.isFull()&&this.sendEvents(),this.M.emitDebugEvents&&this.yr.emit("analysisEvent",G(G({},t),{typeName:te[t.type]}))},t.prototype.av=function(t){return t.ts=this.fv(),t},t.prototype.vv=function(){this.Xf.setQueryParams({hlm:"true"}),this.sv=!0},t.prototype.sendLastMessageBeacon=function(){this.Xf.setQueryParams(this.Kf.getRequestParameters()),this.Xf.send(this.Yf.stringifyEvents()),this.Xf.removeQueryParams(["hlm"]),this.sv=!1},t.prototype.sendEvents=function(){this.Yf.isEmpty()||(this.ir.setQueryParams(this.$f.getRequestParameters()),this.ir.setQueryParams(this.Kf.getRequestParameters()),this.ir.send(this.Yf.getEvents()),this.Yf.clearEvents())},t.prototype.stop=function(){var t,n,i;this.tv.stop(),this.Jf.stop(),this.Wf.stop(),this.gu.stop(),this.Qf.stop(),null===(t=this.nv)||void 0===t||t.stop(),null===(n=this.iv)||void 0===n||n.stop(),null===(i=this.rv)||void 0===i||i.stop(),this.Yf.empty()},t.prototype.clearStates=function(t){var n,i;this.Jf.flushPendingDebouncedListeners(),null===(n=this.iv)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.rv)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.vv(),this.sendLastMessageBeacon()):this.sendEvents(),this.Wf.reset(),this.Qf.stop(),this.ir.removeQueryParams()},t.prototype.cv=function(){this.lv=gt()},t.prototype.fv=function(){return gt()-this.lv},t.prototype.uv=function(){var t=this;this.tv.onEvent((function(n){var i,r;null===(i=t.iv)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.rv)||void 0===r||r.flushPendingTextHighlightEvent(),n===Pe.PagehideVisible?t.vv():n===Pe.PagehideHidden?(t.vv(),t.sendLastMessageBeacon()):t.Yf.isEmpty()&&!t.sv||t.sendLastMessageBeacon()}))},t.prototype.hv=function(t){try{this.Yf.isEmpty()&&!this.sv||this.Wt.save({requestParameters:t,events:this.Yf.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===ne.SUCCESS||t===ne.FAILURE||t===ne.ATTEMPT}(t))if(_t(n)){var i={status:t,type:te.SUBMIT,ts:0,tgt:this.Zf.getElementPath(n)};i.tgt!==H.INVALID_ELEMENT&&this.ev(i)}else nn.warn("AnalysisEvents Service: invalid element: ".concat(n));else nn.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Je=function(){function t(t,n){var i=this;this.Wt=t,this.ir=n,this.wv=function(){"visible"===document.visibilityState&&i.yv()}}return t.prototype.start=function(){this.yv(),this.qf()},t.prototype.stop=function(){this.Vf()},t.prototype.getRecoveryStorage=function(){return this.Wt},t.prototype.yv=function(){var t=this.Wt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.ir.send(r,i)}},t.prototype.qf=function(){document.addEventListener("visibilitychange",this.wv)},t.prototype.Vf=function(){document.removeEventListener("visibilitychange",this.wv)},t}(),We=function(){function t(t){this.Ko=t}return t.prototype.save=function(t){localStorage.setItem(this.Ko,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.Ko)},t.prototype.recover=function(){var t=localStorage.getItem(this.Ko);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){nn.error("Invalid item in localStorage.\n         (key:".concat(this.Ko,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Ke=function(){function t(t){var n=this;this.pv=t,this.mv=function(t){return n.processMetric(t)},this.Ye=!1}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){this.Ye||(this.Ye=!0,this.pv.onFCP(this.mv),this.pv.onCLS(this.mv),this.pv.onFID(this.mv),this.pv.onLCP(this.mv),this.pv.onTTFB(this.mv),this.pv.onINP(this.mv))},t.prototype.stop=function(){this.Ye=!1},t.prototype.processMetric=function(t){if(this.Ye){var n={type:te.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Ti(n)}},J([hn("Performance metric handler")],t.prototype,"processMetric",null),t}(),Ye=-1,Xe=function(t){addEventListener("pageshow",(function(n){n.persisted&&(Ye=n.timeStamp,t(n))}),!0)},$e=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Ze=function(){var t=$e();return t&&t.activationStart||0},Qe=function(t,n){var i=$e(),r="navigate";return Ye>=0?r="back-forward-cache":i&&(document.prerendering||Ze()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},tu=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},nu=function(t,n,i,r){var s,e;return function(u){n.value>=0&&(u||r)&&((e=n.value-(s||0))||void 0===s)&&(s=n.value,n.delta=e,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},iu=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},ru=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},su=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},eu=-1,uu=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ou=function(t){"hidden"===document.visibilityState&&eu>-1&&(eu="visibilitychange"===t.type?t.timeStamp:0,cu())},hu=function(){addEventListener("visibilitychange",ou,!0),addEventListener("prerenderingchange",ou,!0)},cu=function(){removeEventListener("visibilitychange",ou,!0),removeEventListener("prerenderingchange",ou,!0)},au=function(){return eu<0&&(eu=uu(),hu(),Xe((function(){setTimeout((function(){eu=uu(),hu()}),0)}))),{get firstHiddenTime(){return eu}}},fu=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},vu=[1800,3e3],lu=function(t,n){n=n||{},fu((function(){var i,r=au(),s=Qe("FCP"),e=tu("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(e.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=Math.max(t.startTime-Ze(),0),s.entries.push(t),i(!0)))}))}));e&&(i=nu(t,s,vu,n.reportAllChanges),Xe((function(r){s=Qe("FCP"),i=nu(t,s,vu,n.reportAllChanges),iu((function(){s.value=performance.now()-r.timeStamp,i(!0)}))})))}))},du=[.1,.25],wu={passive:!0,capture:!0},yu=new Date,pu=function(t,n){je||(je=n,He=t,qe=new Date,Au(removeEventListener),mu())},mu=function(){if(He>=0&&He<qe-yu){var t={entryType:"first-input",name:je.type,target:je.target,cancelable:je.cancelable,startTime:je.timeStamp,processingStart:je.timeStamp+He};ze.forEach((function(n){n(t)})),ze=[]}},gu=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){pu(t,n),s()},r=function(){s()},s=function(){removeEventListener("pointerup",i,wu),removeEventListener("pointercancel",r,wu)};addEventListener("pointerup",i,wu),addEventListener("pointercancel",r,wu)}(n,t):pu(n,t)}},Au=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,gu,wu)}))},Su=[100,300],Eu=0,bu=1/0,Ru=0,Nu=function(t){t.forEach((function(t){t.interactionId&&(bu=Math.min(bu,t.interactionId),Ru=Math.max(Ru,t.interactionId),Eu=Ru?(Ru-bu)/7+1:0)}))},Tu=function(){return Be?Eu:performance.interactionCount||0},Ou=function(){"interactionCount"in performance||Be||(Be=tu("event",Nu,{type:"event",buffered:!0,durationThreshold:0}))},ku=[200,500],Iu=0,Cu=function(){return Tu()-Iu},_u=[],xu={},Pu=function(t){var n=_u[_u.length-1],i=xu[t.interactionId];if(i||_u.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};xu[r.id]=r,_u.push(r)}_u.sort((function(t,n){return n.latency-t.latency})),_u.splice(10).forEach((function(t){delete xu[t.id]}))}},Mu=[2500,4e3],Lu={},Du=[800,1800],Uu=function t(n){document.prerendering?fu((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},ju=function(t,n){n=n||{};var i=Qe("TTFB"),r=nu(t,i,Du,n.reportAllChanges);Uu((function(){var s=$e();if(s){var e=s.responseStart;if(e<=0||e>performance.now())return;i.value=Math.max(e-Ze(),0),i.entries=[s],r(!0),Xe((function(){i=Qe("TTFB",0),(r=nu(t,i,Du,n.reportAllChanges))(!0)}))}}))},Hu=function(){function t(){}return t.prototype.onFCP=function(t){lu(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},lu(su((function(){var i,r=Qe("CLS",0),s=0,e=[],u=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=e[0],i=e[e.length-1];s&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(s+=t.value,e.push(t)):(s=t.value,e=[t])}})),s>r.value&&(r.value=s,r.entries=e,i())},o=tu("layout-shift",u);o&&(i=nu(t,r,du,n.reportAllChanges),ru((function(){u(o.takeRecords()),i(!0)})),Xe((function(){s=0,r=Qe("CLS",0),i=nu(t,r,du,n.reportAllChanges),iu((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},fu((function(){var i,r=au(),s=Qe("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),i(!0))},u=function(t){t.forEach(e)},o=tu("first-input",u);i=nu(t,s,Su,n.reportAllChanges),o&&ru(su((function(){u(o.takeRecords()),o.disconnect()}))),o&&Xe((function(){var r;s=Qe("FID"),i=nu(t,s,Su,n.reportAllChanges),ze=[],He=-1,je=null,Au(addEventListener),r=e,ze.push(r),mu()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},fu((function(){var i,r=au(),s=Qe("LCP"),e=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(s.value=Math.max(n.startTime-Ze(),0),s.entries=[n],i())},u=tu("largest-contentful-paint",e);if(u){i=nu(t,s,Mu,n.reportAllChanges);var o=su((function(){Lu[s.id]||(e(u.takeRecords()),u.disconnect(),Lu[s.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,o,!0)})),ru(o),Xe((function(r){s=Qe("LCP"),i=nu(t,s,Mu,n.reportAllChanges),iu((function(){s.value=performance.now()-r.timeStamp,Lu[s.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){ju(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},fu((function(){Ou();var i,r=Qe("INP"),s=function(t){t.forEach((function(t){t.interactionId&&Pu(t),"first-input"===t.entryType&&!_u.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&Pu(t)}));var n,s=(n=Math.min(_u.length-1,Math.floor(Cu()/50)),_u[n]);s&&s.latency!==r.value&&(r.value=s.latency,r.entries=s.entries,i())},e=tu("event",s,{durationThreshold:n.durationThreshold||40});i=nu(t,r,ku,n.reportAllChanges),e&&(e.observe({type:"first-input",buffered:!0}),ru((function(){s(e.takeRecords()),r.value<0&&Cu()>0&&(r.value=0,r.entries=[]),i(!0)})),Xe((function(){_u=[],Iu=Tu(),r=Qe("INP"),i=nu(t,r,ku,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),qu=function(){function t(t){void 0===t&&(t=[]),this.Mi=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.Mi)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Mi,t)},t.prototype.eventsCount=function(){return this.Mi.length},t.prototype.clearEvents=function(){this.Mi=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Mi.length},t.prototype.getEvents=function(){return this.Mi},t}(),zu=function(){function t(){var t=this;this.lf=500,this.gv=500,this.Av=Qi((function(n,i){return t.onResize(i)}),this.lf),this.Sv=null,this.Ev=!0}return t.prototype.start=function(){var n=this;this.Sv||(this.bv=t.scheduleStart((function(){n.run()}),this.gv))},t.prototype.stop=function(){this.Sv&&(Kn(this.Sv),this.Sv=null),this.bv()},t.scheduleStart=function(t,n){var i=0,r=null,s=function(){i=window.setTimeout((function(){i=0,t()}),n)};return"visible"===document.visibilityState?s():Wn(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),Kn(r),r=null)}}),function(){i>0&&(window.clearTimeout(i),i=0),null!==r&&(Kn(r),r=null)}},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.run=function(){var n,i=this;0!==window.outerWidth&&(this.Rv=this.Nv=t.Tv(),this.Ov=window.devicePixelRatio,this.kv=this.Ov,this.Iv=window.outerWidth,this.Cv=window.innerWidth,this._v=window.innerHeight,this.xv=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1,this.Sv={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return i.Av(t)}},Wn(this.Sv),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.Sv){var n={type:te.ZOOM,ts:0,val:t.Pv(this.Nv)};if(this.Ti(n),window.visualViewport){var i={type:te.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.Ti(i)}}},t.prototype.onResize=function(t){var n,i=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1;this.Mv(i),window.visualViewport&&this.Lv(i),this.Iv=window.outerWidth,this.Cv=window.innerWidth,this._v=window.innerHeight,this.xv=i},t.prototype.Mv=function(n){var i;window.devicePixelRatio!==this.kv?(i=window.devicePixelRatio/this.Ov*this.Rv,this.kv=window.devicePixelRatio,this.Ev=!1):this.Iv===window.outerWidth&&this._v!==window.innerHeight&&this.Cv!==window.innerWidth&&this.xv===n&&this.Ev&&(i=window.outerWidth/window.innerWidth/n);if(void 0!==i){this.Nv=i;var r={type:te.ZOOM,ts:0,val:t.Pv(i)};this.Ti(r)}},t.prototype.Lv=function(t){if(t!==this.xv){var n={type:te.VIEWPORT_SCALE,ts:0,val:t};this.Ti(n)}},t.Tv=function(){return t.Dv()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.Dv=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.Pv=function(t){return 100*t<<0},J([hn("ZoomTracker.run")],t.prototype,"run",null),J([hn("ZoomTracker.onResize")],t.prototype,"onResize",null),J([hn("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}(),Bu=function(){function t(){this.Uv=0,this.jv=0,this.Hv=0,this.qv=0,this.zv=0}return t.prototype.incrementFocusWithKeyboard=function(){this.Uv+=1},t.prototype.incrementFocusWithMouse=function(){this.jv+=1},t.prototype.incrementClickWithKeyboard=function(){this.Hv+=1},t.prototype.incrementClickWithMouse=function(){this.qv+=1},t.prototype.incrementScrollWithKeyboard=function(){this.zv+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.Uv,mouseCounter:this.jv},click:{keyboardCounter:this.Hv,mouseCounter:this.qv},scroll:{keyboardCounter:this.zv}}},t.prototype.reset=function(){this.Uv=0,this.jv=0,this.Hv=0,this.qv=0,this.zv=0},t}(),Vu=function(){function t(){var t=this;this.Bv=Qn((function(){return t.Vv()}),5e3),this.yf=Qi((function(n,i){return t.scrollListener()}),150),this.Uv=!1,this.Hv=!1,this.zv=!1,this.Fv=[{boundElement:document,type:"click",listener:function(n){return t.clickListener(n)}},{boundElement:document,type:"focus",listener:function(n){return t.focusListener(n)}},{boundElement:document,type:"keydown",listener:function(n){return t.keyDownListener(n)}},{boundElement:document,type:"mousedown",listener:function(){return t.Gv()}},{boundElement:document,type:"mouseover",listener:function(n){return t.mouseOverListener(n)}},{boundElement:document,type:"scroll",listener:function(){return t.yf()}},{boundElement:document,type:"wheel",listener:function(){return t.Jv()}}],this.Wv=new Bu}return t.prototype.start=function(){csArray.prototype.forEach.call(this.Fv,(function(t){return Wn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.Fv,(function(t){return Kn(t)}))},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.yf.flushPending(),this.Bv.flushPending()},t.prototype.clickListener=function(t){var n=fi(t);_t(n)&&Ri.isElementFocusable(n)&&(this.Hv?(this.Wv.incrementClickWithKeyboard(),this.Hv=!1):this.Wv.incrementClickWithMouse(),this.Bv())},t.prototype.focusListener=function(t){var n=fi(t);this.Uv&&_t(n)&&Ri.isElementFocusable(n)&&(this.Wv.incrementFocusWithKeyboard(),this.Bv(),this.Uv=!1)},t.prototype.keyDownListener=function(t){this.Uv||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.Uv=!0),this.Hv||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.Hv=!0),this.zv||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.zv=!0)},t.prototype.Gv=function(){this.Uv=!1,this.Hv=!1},t.prototype.mouseOverListener=function(t){var n=fi(t);_t(n)&&Ri.isElementFocusable(n)&&(this.Wv.incrementFocusWithMouse(),this.Bv())},t.prototype.scrollListener=function(){this.zv&&(this.Wv.incrementScrollWithKeyboard(),this.Bv(),this.zv=!1)},t.prototype.Jv=function(){this.zv=!1},t.prototype.Vv=function(){var t={type:te.KEYBOARD_NAVIGATION,ts:0,val:this.Wv.buildKeyboardNavigationCounters()};this.Ti(t),this.Wv.reset()},J([hn("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),J([hn("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),J([hn("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),J([hn("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),J([hn("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Fu=function(){function t(){var t=this;this.Kv=null,this.Yv=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.Ti=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.Yv,(function(t){return Wn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.Yv,(function(t){return Kn(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.Kv&&this.Xv(this.Kv)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.Kv){var n=this.Kv,i=n.anchorNode,r=n.anchorOffset;if(i===t.anchorNode&&r===t.anchorOffset){if(v(t.anchorNode)){var s=t.toString().length;s>this.Kv.length&&(this.Kv.length=s)}}else this.Xv(this.Kv)}else t.anchorNode&&v(t.anchorNode)&&0!==t.toString().length&&(this.Kv={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.Kv&&this.$v()},t.prototype.Xv=function(t){var n={type:te.TEXT_HIGHLIGHT,ts:0,len:t.length};this.Ti(n),this.$v()},t.prototype.$v=function(){this.Kv=null},J([hn("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),J([hn("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),Gu="v2/events",Ju=["submit"],Wu=function(){function t(t,n,i,r,s,e,u,o,h,c){this.M=t,this.J=n,this.W=i,this.Zf=r,this.Dn=s,this.Zc=e,this.Yi=u,this.gu=o,this.ka=h,this.ia=c}return t.prototype.init=function(){var t=this,n=new qu,i=this.ia.create("".concat(this.M.getTrackerUri(),"/").concat(Gu),!0,"base64");this.Zv=this.Qv(i),this.tl=this.nl(n,this.Zv.getRecoveryStorage(),i),this.tl.init(),this.ka.addListener(this.tl),this.Zc.register(Ju,(function(n,i){t.tl.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Zv.start(),this.tl.start(t)},t.prototype.onAfterNaturalPageView=function(){this.tl.initStates()},t.prototype.onAfterArtificialPageView=function(){this.tl.initStates(),this.tl.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.tl.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.tl.clearStates(),this.tl.stop(),this.Zv.stop()},t.prototype.onOptout=function(){this.tl.stop(),this.Zv.stop()},t.prototype.nl=function(t,i,r){var s,e,u,o=new Re(window),h=new Ue,c=new De(this.M,this.Zf,this.Dn),a=new _e(this.M,this.Zf,this.gu),f=new Ke(new Hu),v=new Fe;this.M.accessibilityEnabled&&(s=new zu,e=new Vu,u=new Fu);var l=new Pr("".concat(this.M.getTrackerUri(),"/").concat(Gu)),d=new Zi(this.M,this.J,this.W,n);return new Ge(this.M,c,a,h,o,t,l,d,this.Yi,i,this.Zf,f,v,r,s,e,u)},t.prototype.Qv=function(t){return new Je(new We("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ve||(Ve={}));var Ku=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Ei=n,e.il=i,e.$=r,e.fa=s,e}return F(n,t),n.prototype.init=function(){this.rl()},n.prototype.onStart=function(t){t?this.sl():this.el()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.ul(t):this.$.overridePath(t)},n.prototype.el=function(){this.fa.setPageViewType(Ve.Natural),this.Ei.emitBeforeNaturalPageView(),this.il.send(),this.Ei.emitAfterNaturalPageView()},n.prototype.sl=function(){this.fa.setPageViewType(Ve.Renewal),this.Ei.emitBeforeNaturalPageView(),this.il.send(),this.Ei.emitAfterNaturalPageView()},n.prototype.ul=function(t){this.fa.setPageViewType(Ve.Artificial),this.Ei.emitArtificialPageViewEnd(),t&&this.$.overridePath(t),this.Ei.emitBeforeArtificialPageView(),this.il.send(),this.Ei.emitAfterArtificialPageView()},n.prototype.rl=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.ul()}))},n}(Ci),Yu=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Xu(){return{la:Yu}}var $u,Zu=function(){function t(t){this.Bc=t,this.ol=[],this.hl=!1}return t.prototype.getRequestParameters=function(){return{dr:this.cl()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Bc.getUrlMaskingPattern(t);csArray.prototype.push.call(this.ol,n)},t.prototype.enableRemoveQueryString=function(){this.hl=!0},t.prototype.disableRemoveQueryString=function(){this.hl=!1},t.prototype.cl=function(){var t=this.hl?this.Bc.removeQueryString(this.al()):this.al();return this.Bc.anonymizeUrl(t,this.ol)},t.prototype.al=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),Qu=function(){function t(t){this.W=t,this.vl=this.ll()&&"currentScript"in document}return t.prototype.dl=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.wl(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.wl=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.vl||1!==this.da())return{};var t=this.dl();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.da=function(){var t;return(null===(t=this.W.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.ll=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),to=["trackPageview"],no=["setPath"],io=["setQuery"],ro=["referrer:maskUrl"],so=["referrer:removeQueryString"],eo=["referrer:keepQueryString"],uo=function(){function t(t,n,i,r,s,e,u,o,h,c,a){this.M=t,this.Zc=n,this.Ei=i,this.J=r,this.W=s,this._o=e,this.en=u,this.Bc=o,this.$=h,this.na=c,this.fa=a}return t.prototype.init=function(){var t=this,r=new ct(this.M.getTrackerUri(),"pageview");this.yl=new Ku(this.Ei,r,this.$,this.fa);var s=new Zu(this.Bc);this.yl.init(),r.setRequestParametersProviders(this.M,this.J,this.W,bi,s,this.$,this._o,i,this.en,n,this.fa,new Qu(this.W),this.na),this.Zc.register(to,(function(n){return t.yl.triggerArtificialPageView(n)})),this.Zc.register(no,(function(n){return t.$.overridePath(n)})),this.Zc.register(io,(function(n){return t.$.overrideQuery(n)})),this.Zc.register(ro,(function(t){return s.addUrlMaskingPattern(t)})),this.Zc.register(so,(function(){return s.enableRemoveQueryString()})),this.Zc.register(eo,(function(){return s.disableRemoveQueryString()}))},t.prototype.start=function(t){this.yl.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.yl.stop()},t}(),oo=function(){function t(t){this.Ya=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.Ya.hasValidEventTarget(r)&&i.pl(r,t)&&n(r)}},t.prototype.pl=function(t,n){var i=fi(t);return k.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!k},t}(),ho=function(){function t(){}return t.prototype.onLoad=function(t){this.Xt=t},t.prototype.onLoadCallbackExecute=function(){this.Xt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.ml(t)},t.prototype.ml=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},J([hn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),co=function(){function t(t,n,i){this.M=t,this.J=n,this.W=i}return t.prototype.getSessionData=function(){var t=this.M.projectId,n=this.J.getVisitor();null==n&&nn.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,s=i.visitsCount,e=this.W.getSession();return null===e&&nn.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:s,pageNumber:(null!=e?e:{}).pageNumber}},t}(),ao=["clearSession"],fo=["extendSession"],vo=["getSessionData"],lo=["session:start:newVisitor"],wo=["session:clear:visitor"],yo=function(){function t(t,n,i,r){this.M=t,this.J=n,this.W=i,this.Zc=r}return t.prototype.init=function(){var t=this;this.gl=new co(this.M,this.J,this.W),this.Zc.register(ao,(function(){return t.W.removeSession()})),this.Zc.register(fo,(function(){return t.W.extendSessionPeriodically()}),{disableApplyPending:!0}),this.Zc.register(vo,(function(){return t.gl.getSessionData()}),{disableApplyPending:!0}),this.Zc.register(lo,(function(){return t.J.renewVitor()})),this.Zc.register(wo,(function(){t.J.resetVisitor()}),{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.J.createOrUpdateVisitor(),this.W.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.W.abortQuotaServiceRequest(),this.J.createOrUpdateVisitor(),this.W.createOrUpdateSession()},t.prototype.onOptout=function(){this.J.removeVisitor(),this.W.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.W.updateRecordingState(t,n)},t}(),po=function(){function t(t,n){this.W=t,this.J=n,this.Al=!1}return t.prototype.onSessionExpired=function(t){this.Sl=t},t.prototype.isSessionValid=function(){if(this.Al)return!0;var t=this.W.hasValidSession(),n=!1;return this.W.pollCacheRefreshEvent()&&(n=this.J.isSessionRenewed()),t&&!n||!this.El()?t:(this.bl=gt(),this.Al=!0,this.Sl(),this.Al=!1,this.W.hasValidSession())},t.prototype.isCurrentPageviewValid=function(){var t=this.W.hasValidSession();return this.W.pollCacheRefreshEvent(!1)?!this.J.isSessionRenewed():t},t.prototype.startNewSession=function(){this.Sl()},t.prototype.El=function(){return!kt(this.bl)||gt()-this.bl>6e4},t}(),mo=function(t){function n(n,i,r,s,e,u,o){var h=t.call(this)||this;return h.$=n,h.Rl=i,h.tv=r,h.Nl=s,h.Tl=e,h.Ol=u,h.kl=o,h}return F(n,t),n.prototype.init=function(){this.Il(),this.uv(),this.Cl()},n.prototype.collectInitialProducts=function(){var t=this;this.Rl.collectProductsAndAnchors(document,(function(n){var i=n.products,r=n.anchors;t._l(r),t.Nl.send(t.xl(i))}))},n.prototype._l=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){n.kl.pushProduct(t)}))},n.prototype.onIframeEmerchandisingMessage=function(t){this.Nl.send(t)},n.prototype.clearState=function(){this.Ol.clearState(),this.Rl.flushEvents(),this.Tl.isEmpty()||this.Pl(!1),this.Nl.clearState()},n.prototype.initStates=function(){this.Nl.initStates()},n.prototype.onStart=function(){this.tv.start(),this.Rl.start(),this.Ol.start()},n.prototype.onStop=function(){this.tv.stop(),this.Rl.stop(),this.Ol.stop()},n.prototype.Cl=function(){var t=this;this.Ol.onProductExposed((function(n){t.Tl.addProductExposure(n),t.Tl.isFull()&&t.Pl(!1)}))},n.prototype.xl=function(t,n){void 0===n&&(n=[]);var i={products:t,targetUrl:this.$.getAnonymizedUrl(),windowWidth:bi.windowWidth(),windowHeight:bi.windowHeight()};return n.length>0&&(i.exposures=n),i},n.prototype.Il=function(){var t=this;this.Rl.init(),this.Rl.onProductsDetection((function(n){var i=n.products,r=n.anchors;t.Tl.addProducts(i),t.Tl.isFull()&&t.Pl(!1),t._l(r)}))},n.prototype.uv=function(){var t=this;this.tv.onEvent((function(n){t.Ol.clearState(),t.Ml()}))},n.prototype.Ml=function(){this.Tl.isEmpty()||this.Pl(!0)},n.prototype.Pl=function(t){var n=this.xl(this.Tl.getProducts(),this.Tl.getProductsExposure());t?this.Nl.sendBeacon(n):this.Nl.send(n)},n}(Ci),go=function(){function t(t,n){this.configuration=t,this.projectPathComputation=n}return t.prototype.collectProductsAndAnchors=function(t,n){var i=this;void 0===t&&(t=document);var r=[];this.getAllValidAnchors(this.configuration.hostnames,t,(function(t){for(var s=0,e=t;s<e.length;s++){var u=e[s];csArray.prototype.push.call(r,i.buildProductFromAnchor(u))}n({products:r,anchors:t})}))},t.prototype.getAllValidAnchors=function(t,n,i){void 0===n&&(n=document);var r=[],s=new IntersectionObserver((function(n){csArray.prototype.forEach.call(n,(function(n){var i=n.target;("https:"===i.protocol||"http:"===i.protocol)&&""!==i.hostname&&Math.round(n.boundingClientRect.height)>0&&Math.round(n.boundingClientRect.width)>0&&Ft(i.hostname,t)&&csArray.prototype.push.call(r,i)})),i(r),s.disconnect()})),e=Ri.findAllElements("a",n);csArray.prototype.forEach.call(e,(function(t){s.observe(t)}))},t.prototype.isAnchorValid=function(t,n){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Ft(t.hostname,n)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},J([ci("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),Ao=function(t){function n(n,i,r){var s=t.call(this,n,i)||this;return s.Ai=r,s.Ll={subtree:!0,childList:!0},s}return F(n,t),n.prototype.init=function(){this.ve()},n.prototype.start=function(){this.Ai.start(),this.Dl()},n.prototype.stop=function(){this.Ai.stop()},n.prototype.flushEvents=function(){this.Ai.flushPendingMutations()},n.prototype.onProductsDetection=function(t){this.Ul=t},n.prototype.ve=function(){this.Ai.init(),this.jl()},n.prototype.jl=function(){var t=this;this.Ai.onChildListMutation((function(n){return t.Hl(n)})),this.Ai.onAttachShadowMutation((function(n){return t.ql(n)}))},n.prototype.Hl=function(t){for(var n=this,i=0;i<t.addedNodes.length;i+=1){var r=t.addedNodes[i];if(l(r)&&this.isAnchorValid(r,this.configuration.hostnames)){var s=this.buildProductFromAnchor(r);this.zl({products:[s],anchors:[r]})}else _t(r)&&this.collectProductsAndAnchors(r,(function(t){n.zl(t)}))}},n.prototype.ql=function(t){var n=this,i=t.shadowRoot;this.collectProductsAndAnchors(i,(function(t){n.zl(t)})),this.Ai.observe(i,this.Ll)},n.prototype.zl=function(t){t.products.length>0&&this.Ul(t)},n.prototype.Dl=function(){this.Ai.observe(document,this.Ll),this.sf(document)},n.prototype.sf=function(t){var n=this,i=Ei.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){csElementshadowRoot.apply(t)&&n.Ai.observe(csElementshadowRoot.apply(t),n.Ll)}))},n}(go),So=function(){function t(n){void 0===n&&(n=t.Bl),this.Vl=[],this.Fl=[],this.Gl=new Ti(n)}return t.prototype.addProducts=function(t){var n;this.Gl.addString(csJSON.stringify(t)),(n=csArray.prototype.push).call.apply(n,Y([this.Vl],t,!1))},t.prototype.addProductExposure=function(t){this.Gl.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.Fl,t)},t.prototype.reset=function(){this.Gl.reset(),this.Vl=[],this.Fl=[]},t.prototype.isEmpty=function(){return 0===this.Vl.length&&0===this.Fl.length},t.prototype.isFull=function(){return this.Gl.isThresholdReached()},t.prototype.getProducts=function(){return this.Vl},t.prototype.getProductsExposure=function(){return this.Fl},t.Bl=10240,t}(),Eo=function(t){function n(n,i,r,s){void 0===s&&(s=new Tr);var e=t.call(this)||this;return e.Jl=n,e.ce=i,e.M=r,e.iu=s,e}return F(n,t),n.prototype.onProductExposed=function(t){this.Wl=t},n.prototype.clearState=function(){Tr.isSupported()&&this.isStarted&&this.Kl()},n.prototype.onStart=function(){Tr.isSupported()&&(this.Yl=new Map,this.Xl())},n.prototype.onStop=function(){Tr.isSupported()&&(this.Kl(),this.iu.stop(),this.Yl.clear())},n.prototype.Xl=function(){var t=this;try{this.iu.start((function(n,i){i===Rr.VisibleInViewPort?t.$l(n):t.Zl(n)}))}catch(t){return void nn.error(t)}this.Jl.onElementAvailable((function(n){return t.ce.schedule((function(){return t.iu.observe(n)}))}))},n.prototype.Kl=function(){var t=this;this.Yl.forEach((function(n,i){t.Zl(i)})),this.Yl.clear()},n.prototype.$l=function(t){this.Yl.set(t,gt())},n.prototype.Zl=function(t){var i=this.Yl.get(t);if(void 0!==i){var r=gt()-i;this.Yl.delete(t),r<n.EXPOSURE_DURATION_THRESHOLD||this.Wl(this.Ql(t,r))}},n.prototype.Ql=function(t,n){var i=t.href;return{targetPath:H.getElementPath(t,{dynamicIdRegex:this.M.dynamicIdRegex}),duration:n,href:i}},n.EXPOSURE_DURATION_THRESHOLD=150,n}(Ci),bo=function(){function t(t){this.Rn=t}return t.prototype.push=function(t){var n=this;this.td||(this.td=[],setTimeout((function(){return n.flush()}))),csArray.prototype.push.call(this.td,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.td,this.Rn),this.td=void 0},J([hn("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),Ro=function(){function t(){var t=this;this.td=new bo((function(n){return n.isConnected&&t.nd&&t.nd(n)}))}return t.prototype.onElementAvailable=function(t){this.nd=t},t.prototype.pushProduct=function(t){this.td.push(t)},t.prototype.getElements=function(t){return K(this,(function(t){return[2]}))},t}(),No=function(){function t(t,n,i,r){this.ir=t,this.rd=n,this.Tl=i,this.sd=r}return t.prototype.initStates=function(){this.ud()},t.prototype.clearState=function(){this.ir.removeQueryParams()},t.prototype.send=function(t){this.od(t)},t.prototype.sendBeacon=function(t){this.ad(t)},t.prototype.ud=function(){var t=this.sd.getRequestParameters();this.ir.setQueryParams(t),this.rd.setQueryParams(t)},t.prototype.od=function(t){this.ir.send(t),this.Tl.reset()},t.prototype.ad=function(t){this.rd.send(csJSON.stringify(t)),this.Tl.reset()},t}(),To="display",Oo=function(){function t(t,n,i,r,s,e,u,o,h){this.M=t,this.Zf=n,this.ia=i,this.Th=r,this.en=s,this.$=e,this.ka=u,this.Zc=o,this.ce=h}return t.prototype.init=function(){var t=new wr(this.ce),n=new Ao(this.M,this.Zf,t),i=new Fe,r=new So,s=new Ro,e=new Eo(s,this.ce,this.M),u=new No(this.ia.create("".concat(this.M.getTrackerUri(),"/").concat(To),!0,"base64"),new Pr("".concat(this.M.getTrackerUri(),"/").concat(To)),r,new Zi(this.Th,this.en));this.vd=new mo(this.$,n,i,u,r,e,s),this.vd.init(),this.ka.addListener(this.vd)},t.prototype.onStartTracking=function(){this.ld()&&(this.vd.start(),this.vd.collectInitialProducts())},t.prototype.onArtificialPageViewEnd=function(){this.vd.clearState()},t.prototype.onAfterNaturalPageView=function(){this.vd.initStates()},t.prototype.onAfterArtificialPageView=function(){this.vd.initStates(),this.vd.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.vd.clearState(),this.vd.stop()},t.prototype.onOptout=function(){this.vd.stop()},t.prototype.ld=function(){return!!window.IntersectionObserver},J([ci("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function ko(t){return t.tagDeploymentMode===$u.DualCollectionReview||t.tagDeploymentMode===$u.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}($u||($u={}));var Io,Co=function(){function t(t,n,i){this.M=t,this.W=n,this.jn=i}return t.prototype.init=function(){this.dd=!1,this.wd=!1},t.prototype.loadClicktalePtc=function(){!this.dd&&this.M.ptcDomain&&this.M.ptcGuid&&this.yd()},t.prototype.startDataCollection=function(t){this.wd||(this.M.tagDeploymentMode===$u.LoadClicktalePtc&&this.pd()&&this.jn.initCTPII(),ko(this.M)&&(this.jn.initCTPII(),t(),this.wd=!0))},t.prototype.pd=function(){return this.W.isReplayRecorded()},t.prototype.yd=function(){this.dd=!0;var t=this.md();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.md=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.M.ptcSha512&&this.M.ptcSnapshotPath?(t.integrity="sha512-".concat(this.M.ptcSha512),t.src="https://".concat(this.M.ptcDomain,"/").concat(this.M.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.M.ptcDomain,"/ptc/").concat(this.M.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Io||(Io={}));var _o,xo=function(){function t(t,n,i,r,s,e){this.M=t,this.W=n,this.$=i,this.Zc=r,this.gd=s,this.jn=e}return t.prototype.init=function(){var t=this;this.Ad=new Co(this.M,this.W,this.jn),this.Ad.init(),this.Sd(),this.Zc.register(["startDataCollection"],(function(){t.Ad.startDataCollection(t.gd)}))},t.prototype.Sd=function(){ko(this.M)&&this.Ad.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.M.tagDeploymentMode===$u.LoadClicktalePtc&&this.Ad.loadClicktalePtc()},t.prototype.onAfterArtificialPageView=function(){!this.W.isReplayRecorded()&&Io.isRecording()&&this.M.tagDeploymentMode===$u.LoadClicktalePtc&&Io.triggerLogicalPageView(this.$.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.W.isReplayRecorded()&&Io.isRecording()&&Io.triggerLogicalPageView(this.$.getAnonymizedUrl())},t.prototype.onOptout=function(){Io.isRecording()&&Io.stopRecording()},t}(),Po="@user-identifier@",Mo=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.M=n,u.Ed=i,u.fc=r,u.bd=s,u.Rd=e,u.Nd=[],u.Td=[],u}return F(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Nd,(function(n){return t.trackPageEvent(n)})),this.Nd=[],csArray.prototype.forEach.call(this.Td,(function(n){return t.trackEventTriggerRecording(n)})),this.Td=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Od(t)&&(this.kd(t)?this.Rd.isSupported()&&this.Id(t):this.Cd(t)):csArray.prototype.push.call(this.Nd,t)},n.prototype.kd=function(t){return Z(t,Po)},n.prototype.Id=function(t){return W(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return this.M.customHashIdEnabled?(n=csString.prototype.slice.call(t,17),this.Rd.isValidInput(n)?[4,this.Rd.digest(n,this.M.projectId)]:(nn.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this._d={eventName:i,isETR:!1,isCustomHashId:!0},this.xd()):nn.warn("Page event: unable to compute customHashId"),this.M.encryptionEnabled?(this.bd.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.Cd=function(t){this.bd.emitPageEvent(t),this._d={eventName:t,isETR:!1,isCustomHashId:!1},this.xd(),this.M.tagDeploymentMode===$u.LoadClicktalePtc&&Io.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Od(t)&&(this.M.malkaEtrEnabled?this.Pd(t):this.Md(t)):csArray.prototype.push.call(this.Td,t)},n.prototype.Pd=function(t){Z(t,"@ETP@")?this.bd.emitEventTriggerRecording(t,gn.ETR_PAGE):this.bd.emitEventTriggerRecording(t,gn.ETR_SESSION),this._d={eventName:t,isETR:!0,isCustomHashId:!1},this.xd()},n.prototype.Md=function(t){(function(t){return ko(t)||t.tagDeploymentMode===$u.LoadClicktalePtc})(this.M)&&(this.bd.emitEventTriggerRecording(t,gn.ETR_LEGACY),this._d={eventName:t,isETR:!0,isCustomHashId:!1},this.xd(),this.M.tagDeploymentMode===$u.LoadClicktalePtc&&Io.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.fc.compressSync(this._d.eventName,"base64"),ct:this.fc.algorithm,isETR:"".concat(this._d.isETR),isCustomHashId:"".concat(this._d.isCustomHashId)}},n.prototype.xd=function(){this.Ed.send()},n.Od=function(t){return Tt(t)&&!!csString.prototype.trim.call(t)},n}(Ci),Lo=["trackPageEvent"],Do=["trackEventTriggerRecording"],Uo=function(){function t(t,n,i,r,s){this.M=t,this.Zc=n,this.fc=i,this.Ih=r,this.bd=s}return t.prototype.init=function(){var t=this,n=new ct(this.M.getTrackerUri(),"pageEvent"),i=new Wr(window.crypto);i.init(),this.Ld=new Mo(this.M,n,this.fc,this.bd,i),n.setRequestParametersProviders(this.Ld,this.Ih),this.Zc.register(Lo,(function(n){t.Ld.trackPageEvent(n)})),this.Zc.register(Do,(function(n){t.Ld.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.Ld.start()},t}(),jo=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}();!function(t){t.ellipsis="",t.truncateMessageWithEllipsis=function(n,i){return n.length<=i?n:csString.prototype.slice.call(n,0,i-t.ellipsis.length)+t.ellipsis}}(_o||(_o={}));var Ho,qo=function(t){function n(){var n=t.call(this)||this;return n.Dd=!1,n.Sv={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return F(n,t),n.prototype.onStartTracking=function(){Wn(this.Sv,this.Dd)},n.prototype.onStopTracking=function(){Kn(this.Sv,this.Dd)},n.prototype.errorListener=function(t){var n=this.Ud(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.jd=function(t){return t=null!=t?t:"[NO ERROR MESSAGE]",_o.truncateMessageWithEllipsis(t,n.Hd)},n.prototype.Ud=function(t){return{errorType:"jsError",message:this.jd(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="",n.Hd=1024,J([hn("Event handler type: error")],n.prototype,"errorListener",null),n}(jo),zo=["#c1_card_info_id"];!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(Ho||(Ho={}));var Bo,Vo=function(){function t(t){var n;this.M=t,this.qd=["value","checked","src","data","alt"],this.zd=Y(["[data-cs-mask]","script"],zo,!0),this.Bd=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],this.Vd={PIISelectors:Y([".ctHidden, textarea","#c1_card_info_id"],zo,!0),Attributes:[{selector:".ctHidden, input:not([type=button]):not([type=submit])",attrName:"value"}]},this.Fd=[],this.Gd="",this.Jd=function(){},this.Wd=this.Kd(t),ko(this.M)||(this.Wd||csArray.prototype.push.call(this.zd,"img[src^='data:']"),this.Gd=this.Yd(this.Gd,this.zd),(n=csArray.prototype.push).call.apply(n,Y([this.Fd],this.Bd,!1))),this.Xd=this.$d()}return t.prototype.Kd=function(t){return t.useStaticResourceManager&&Boolean(window.crypto&&window.crypto.subtle&&self.TextEncoder&&csArray.from)},t.prototype.$d=function(){var t=this;if(window.ResizeObserver)return new ResizeObserver((function(n){csArray.prototype.forEach.call(n,(function(n){t.Jd(n)}))}))},t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return Ls(t)}));this.Gd=this.Yd(this.Gd,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&Ls(t.selector)&&!i.Zd(t)&&csArray.prototype.push.call(i.Fd,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.Gd],Attributes:this.Fd}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.Gd=this.Yd(this.Gd,this.Vd.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return Ls(t)}));this.Gd=this.Yd(this.Gd,s),(t=csArray.prototype.push).call.apply(t,Y([this.Fd],this.Vd.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&Ls(t.rule)&&csArray.prototype.push.call(r.Fd,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(this.qd,n)||this.Qd(t,n,this.Fd)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===Ho.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===Ho.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(f(t)||S(t)){this.tw(t);var i=Ei.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.tw(csElementshadowRoot.apply(t))}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(f(t)||S(t)){this.nw(t);var i=Ei.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.nw(csElementshadowRoot.apply(t))}))}},t.prototype.onSensitiveElementResize=function(t){this.Jd=t},t.prototype.disconnectResizeObserver=function(){var t;null===(t=this.Xd)||void 0===t||t.disconnect()},t.prototype.nw=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.tw=function(t){var n=this;if(this.iw(t))return this.rw(t),void this.ew(t);this.uw(t,this.Gd)?(this.ow(t),this.ew(t)):Ai(window.csquerySelectorAll[t.nodeType].call(t,this.Gd),(function(t){n.hw(t)||(n.ow(t),n.ew(t))}))},t.prototype.hw=function(t){return!this.Wd&&w(t)&&(Z(t.src,"data:image/svg+xml")||Z(t.src,"data:image/png"))&&t.src.length<=1024},t.prototype.ow=function(t){t.__contentsquare_sensitive=Ho.Sensitive,this.cw(t)},t.prototype.cw=function(t){this.Xd&&f(t)&&!g(t)&&this.Xd.observe(t)},t.prototype.rw=function(t){t.__contentsquare_sensitive=Ho.SensitiveChild},t.prototype.ew=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.rw(i),i=n.nextNode()},t.prototype.iw=function(t){return!(!csNodeparentNode.apply(t)||!f(csNodeparentNode.apply(t))&&!S(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||b(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.uw=function(t,n){return f(t)&&k.call(t,n)},t.prototype.Qd=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&k.call(t,i.selector)}))},t.prototype.Yd=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=csString.prototype.split.call(t,","),r=0,s=n;r<s.length;r++)for(var e=s[r],u=0,o=csString.prototype.split.call(e,",");u<o.length;u++){var h=o[u];-1===csArray.prototype.indexOf.call(i,h)&&csArray.prototype.push.call(i,h)}return csArray.prototype.join.call(i,",")},t.prototype.Zd=function(t){return csArray.prototype.some.call(this.Fd,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),Fo=function(){function t(t){this.Zc=t}return t.prototype.init=function(){this.aw(t.fw,Ut),this.aw(t.lw,Dt)},t.prototype.aw=function(t,n){this.Zc.register([t],(function(t,i){Tt(t)&&(Tt(i)||xt(i))&&nn.error(i,"".concat(n).concat(t))}))},t.lw="logSnippetError",t.fw="logImplementationSnippetError",t}(),Go=function(){function t(t,n,i,r){this.M=t,this.Oa=n,this.$c=i,this.ka=r}return t.prototype.init=function(){var t=this;this.Oa.onChildMessage((function(n,i,r){return t.ka.emitIframeEvent(n,i,r)})),this.Oa.setRecordingStatusCallback((function(){return t.$c.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.M.iframesTracking&&this.Oa.start()},t.prototype.onOptout=function(){this.M.iframesTracking&&this.Oa.stop()},t.prototype.onRecordingStatusChange=function(){this.M.iframesTracking&&this.Oa.onRecordingStatusChange(this.$c.getRecordingStatus())},t}(),Jo=function(t){function n(n,i){var r=t.call(this)||this;return r.M=n,r.jn=i,r.yw=0,r.pw=new Map,r.mw={boundElement:window,type:"message",listener:function(t){return r.gw(t)}},r}return F(n,t),n.prototype.onChildMessage=function(t){this.Aw=t},n.prototype.setRecordingStatusCallback=function(t){this.Sw=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Xt.buildBaseMessage(Yt.RecordingStatus,Kt.Parent,this.M.projectId);i.content=t,this.pw.forEach((function(t){!n.Ew(t)&&t.port&&Xt.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Xt.buildBaseMessage(t,Kt.Parent,this.M.projectId);i.content=n,this.bw(i)},n.prototype.onStart=function(){Wn(this.mw,!1),this.Rw()},n.prototype.onStop=function(){this.Nw(),Kn(this.mw,!1),this.Tw()},n.prototype.Rw=function(){var t=this,n=this.Ow();this.kw(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.Iw(n)){var i={iframe:n};t.pw.set(t.yw,i),t.yw+=1}})),this.Cw()},n.prototype.Ow=function(){var t=this;return csArray.prototype.filter.call(Ri.findAllElements("iframe"),(function(n){return t._w(n)}))},n.prototype.kw=function(t){var n=this;this.pw.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.xw(r,i)}))},n.prototype.xw=function(t,n){n.port&&Xt.closeChannelPort(n.port),this.pw.delete(t)},n.prototype.Tw=function(){this.pw.forEach((function(t){t.port&&Xt.closeChannelPort(t.port)})),this.pw.clear()},n.prototype.Iw=function(t){var n=null;return this.pw.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype._w=function(t){return t.id!==r&&(!t.src||Ft(Vt(t.src),this.M.hostnames))},n.prototype.bw=function(t){this.pw.forEach((function(n){n.port&&Xt.sendChannelMessage(n.port,t)}))},n.prototype.Cw=function(){var t=this;this.pw.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Pw(i);Xt.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Nw=function(){var t=this.Mw();this.pw.forEach((function(n){n.port?Xt.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Xt.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Pw=function(t){return Xt.buildBaseMessage(Yt.Discovery,Kt.Parent,this.M.projectId,t)},n.prototype.Mw=function(){return Xt.buildBaseMessage(Yt.Stop,Kt.Parent,this.M.projectId)},n.prototype.Lw=function(t,n){var i=this,r=this.pw.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Dw(t,r)}):nn.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.yw,")"))},n.prototype.Uw=function(t){if(t.port){var n=Xt.buildBaseMessage(Yt.RecordingStatus,Kt.Parent,this.M.projectId),i=this.Sw();this.Ew(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Xt.sendChannelMessage(t.port,n)}},n.prototype.Dw=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===Yt.EndOfBufferedMessages?this.Uw(n):this.Aw(n.iframe,i,r)}else nn.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.gw=function(t){if(Xt.isMessageValid(t,Kt.Child,this.M.projectId,this.M.hostnames))switch(t.data.type){case Yt.Discovery:if(void 0===t.data.id)return void this.Rw();if(t.ports&&1===t.ports.length&&this.pw.has(t.data.id))return void this.Lw(t.data.id,t.ports[0]);nn.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Yt.ChildLogMessage:this.Aw(null,Yt.ChildLogMessage,t.data.content);break;default:nn.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Ew=function(t){return this.jn.isSensitive(t.iframe)||this.jn.isSensitiveChild(t.iframe)},n}(Ci),Wo=function(t){function n(n,i){var r=t.call(this)||this;return r.jw=n,r.Hw=i,r.qw=[],r}return F(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.jw.onEvent((function(n){return t.zw(n)})),this.Hw.onEvent((function(n){return t.zw(n)}))},n.prototype.onStartTracking=function(){this.jw.start(),this.Hw.start()},n.prototype.onStopTracking=function(){this.jw.stop(),this.Hw.stop()},n.prototype.zw=function(t){if(t.url&&t.statusCode){if(this.Bw(t.url))return;if(t.statusCode>=400||t.isConfigurableApiError)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.Vw(t));else i(this.Fw(t))}}},n.prototype.Fw=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library,matchingBodyContent:t.matchingBodyContent}},n.prototype.Vw=function(t){var n=this.Fw(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),Object.keys(t.plainCustomRequestHeaders).length>0&&(n.plainCustomRequestHeaders=t.plainCustomRequestHeaders),Object.keys(t.plainCustomResponseHeaders).length>0&&(n.plainCustomResponseHeaders=t.plainCustomResponseHeaders),n},n.prototype.Bw=function(t){return csArray.prototype.some.call(this.qw,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,Y([this.qw],t,!1))},n.truncatedErrorMessageMarker="",n}(jo),Ko=function(){function t(t){this.Bc=t,this.ol=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.Bc.getUrlMaskingPattern(t);csArray.prototype.push.call(this.ol,n)},t.prototype.getUrlMaskingPatterns=function(){return this.ol},t.prototype.anonymize=function(t){var n=this.Bc.removeQueryString(t.url);return G(G({},t),{url:this.Bc.anonymizeUrl(n,this.ol),library:t.library?this.Bc.anonymizeUrl(t.library,this.ol):void 0})},t}(),Yo=function(){function t(t,n){this.L=t,this.$=n}return t.prototype.anonymize=function(t){return Tt(t.message)&&(t.message=this.Gw(t.message),t.message=this.L.anonymizeEmail(t.message)),Tt(t.filename)&&(t.filename=this.$.computeOverriddenUrl(t.filename)),t},t.prototype.Gw=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),Xo=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.Jw(n.x)-this.Jw(t.x),r=this.Jw(n.y)-this.Jw(t.y),s=n.time-t.time;return{duration:s,distance:this.Ww(i,r),direction:this.Kw(i,r),velocity:this.Yw(i,r,s)}},t.prototype.computePinchMetrics=function(t,n){var i=this.Jw(n.x)-this.Jw(t.x),r=this.Jw(n.y)-this.Jw(t.y);return{duration:n.time-t.time,distance:this.Ww(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.Jw=function(t){return t/window.devicePixelRatio},t.prototype.Ww=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.Yw=function(t,n,i){var r=i/1e3,s=t/r,e=n/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.Kw=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?zr.RIGHT:zr.LEFT:n>0?zr.DOWN:zr.UP},t}(),$o=function(){function t(){this.Xw={},this.$w=new Xo,this.Zw()}return t.prototype.onGesture=function(t){this.Qw=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.ty(t)){this.ny(t)&&this.Zw();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:gt()};if(1===t.touches.length)this.Xw.startPinchTime=n.time,this.Xw.firstTouch=n;else if(2===t.touches.length&&(this.Xw.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:gt()},this.Xw.firstTouch&&this.Xw.secondTouch)){var i=this.$w.computePinchMetrics(this.Xw.firstTouch,this.Xw.secondTouch);this.iy=i.distance}csArray.prototype.push.call(this.sy,n),this.ey=fi(t)}},t.prototype.processActionMove=function(){this.uy=!0},t.prototype.processActionUp=function(t){if(this.oy(t)){if(csArray.prototype.push.call(this.sy,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gt()}),this.hy(t)&&this.Xw.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Xw.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gt()};this.Xw.firstTouch&&(this.Xw.firstTouch=n,this.Xw.secondTouch=i),this.vy(t)}this.iy||this.ly()&&this.wy(t)}},t.prototype.Zw=function(){this.sy=[],this.ey=null,this.uy=!1,this.iy=null,this.yy=!0},t.prototype.wy=function(t){var n=this.$w.compute(this.sy[0],this.sy[1]);this.yy=t.isTrusted;var i=this.uy?this.py(n):this.my(n);this.Qw(i,t)},t.prototype.vy=function(t){if(this.Xw.firstTouch&&this.Xw.secondTouch){var n=this.$w.computePinchMetrics(this.Xw.firstTouch,this.Xw.secondTouch);this.yy=t.isTrusted;var i=this.gy(n);i&&this.Qw(i,t)}},t.prototype.gy=function(t){if(this.iy&&!(this.$w.getScale(this.iy,t.distance)<.1))return{type:this.iy>t.distance?qr.PINCH_IN:qr.PINCH_OUT,target:this.ey,distance:t.distance,isTrusted:this.yy}},t.prototype.py=function(t){return{type:t.velocity<100?qr.DRAG:qr.FLICK,target:this.ey,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.yy}},t.prototype.my=function(t){return{type:t.duration<1e3?qr.TAP:qr.LONG_PRESS,target:this.ey,isTrusted:this.yy}},t.prototype.ny=function(t){return 1===t.touches.length},t.prototype.ly=function(){return 2===this.sy.length},t.prototype.ty=function(t){return t.touches.length>0},t.prototype.oy=function(t){return t.changedTouches.length>0},t.prototype.hy=function(t){return this.uy&&!!this.iy&&1===t.changedTouches.length&&1===t.touches.length},t}(),Zo=function(t){function n(n){var i=t.call(this)||this;return i.Ay=n,i.Ls=[{boundElement:document,type:"touchstart",listener:function(t){return i.Pr(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Pr(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Pr(t)}}],i.Sy=new $o,i.Sy.onGesture((function(t,n){return i.Ey(t,n)})),i}return F(n,t),n.prototype.Ey=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,(function(t){return Wn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,(function(t){return Kn(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Pr=function(t){var n=this;this.Ay.tryToExecute("process gesture event",(function(){if(n.Sy.isValidTouchEvent(t))switch(t.type){case"touchstart":n.Sy.processActionDown(t);break;case"touchmove":n.Sy.processActionMove();break;case"touchend":n.Sy.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===qr.FLICK||t.type===qr.DRAG},n}(jo),Qo=function(t){function n(n,i){var r=t.call(this)||this;return r.ir=n,r.by=i,r.Ry=0,r}return F(n,t),n.prototype.onStart=function(){var t=this;nn.isPerfLoggingActive()&&(this.Ny=window.setInterval((function(){return t.Ty()}),n.Oy))},n.prototype.onStop=function(){nn.isPerfLoggingActive()&&(this.Ty(),clearInterval(this.Ny))},n.prototype.Ty=function(){if(!(ri.isEmpty()||this.Ry>=n.ky)){var t=ri.getAll();this.Ry++;var i=G({a:n.Iy,l:n.Cy},this.by.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return G(G({},t),i)}));this.ir.send(r),ri.clear()}},n.Iy="uxa",n.Cy="perf",n.Oy=5e3,n.ky=5,n}(Ci),th=function(){function t(t,n,i){this.M=t,this.by=n,this.ia=i}return t.prototype.init=function(){this._y=new Qo(this.ia.create(this.M.getLoggerUri(),!0),this.by)},t.prototype.onStartTracking=function(){this._y.start()},t.prototype.onOptout=function(){this._y.stop()},t}(),nh=function(){function t(){this.xy=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,s,e){this.xy=!0,this.Us=t,this.jn=n,this.js=i,this.ea=r,this.W=s,this.Hn=e},t.prototype.getRecordingStatus=function(){var t,n,i;return this.xy?{isRecording:this.Us.isRecording(),isMutationTrackerStarted:this.Us.isMutationTrackerStarted(),PIISelectors:this.jn.getPIISelectors(),capturedElementSelector:this.ea.getWhitelistedElementsSelector(),useAnonymization:this.js.shouldUseAnonymization(),encryptionSelectors:null===(t=this.Hn)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.Us.getStaticResourceManagerStatus())||void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.Us.getRecordingStartTimestamp(),10),etrState:(null===(i=this.W.getSession())||void 0===i?void 0:i.etrState)||mn.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:mn.ETR_OFF}},t}();!function(t){t[t.NOT_MATCHING=0]="NOT_MATCHING",t[t.MATCHING=1]="MATCHING",t[t.SHOULD_CHECK_BODY=2]="SHOULD_CHECK_BODY"}(Bo||(Bo={}));var ih,rh=function(){function t(t){this.M=t,this.Py=2e3}return t.prototype.My=function(t,n){if(!this.M.apiErrors.configurableApiErrorRules)return Bo.NOT_MATCHING;for(var i=Bo.NOT_MATCHING,r=0,s=this.M.apiErrors.configurableApiErrorRules;r<s.length;r++){var e=s[r];if(e.statusCode===t&&-1!==csString.prototype.indexOf.call(n,e.url)){if(!e.bodyContent)return Bo.MATCHING;i=Bo.SHOULD_CHECK_BODY}}return i},t.prototype.Ly=function(t,n,i){if(!i)return{isMatching:!1};for(var r=0,s=this.M.apiErrors.configurableApiErrorRules;r<s.length;r++){var e=s[r];if(e.statusCode===t&&-1!==csString.prototype.indexOf.call(n,e.url)&&void 0!==e.bodyContent)if(new RegExp(e.bodyContent,"i").test(i))return{isMatching:!0,matchingBodyContent:e.bodyContent}}return{isMatching:!1}},t.prototype.Dy=function(t,n){var i=n.extractHeadersByName(["content-type","content-length"],t),r=n.getResponseBodySize(i);return n.isValidBodyType(i)&&null!==r&&r<this.Py},t.prototype.getXhrConfigurableApiError=function(t,n,i,r){var s=this.My(t,n);if(s===Bo.MATCHING)return{isMatching:!0};if(s===Bo.SHOULD_CHECK_BODY&&this.Dy(i,r)){var e=r.getResponseBody(i);return this.Ly(t,n,e)}return{isMatching:!1}},t.prototype.getFetchConfigurableApiError=function(t,n,i,r){return W(this,void 0,void 0,(function(){var s,e;return K(this,(function(u){switch(u.label){case 0:return(s=this.My(t,n))!==Bo.MATCHING?[3,1]:[2,{isMatching:!0}];case 1:return s===Bo.SHOULD_CHECK_BODY&&this.Dy(i,r)?[4,r.getResponseBody(i)]:[3,3];case 2:return e=u.sent(),[2,this.Ly(t,n,e)];case 3:return[2,{isMatching:!1}]}}))}))},t}(),sh=function(){function t(t,n,i){var r=this;this.M=t,this.Uy=n,this.jy=i,this.Ye=!1,this.Hy=null,this.qy=[],this.zy=function(t){var n=t.result,i=t.args,s=t.callerName;r.interceptFetch(n,i,s)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.qy,t)},t.prototype.start=function(){this.Ye||this.By()&&(this.Vy(),this.Hy&&this.Hy.activate(),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(this.Hy&&this.Hy.deactivate(),this.Ye=!1)},t.prototype.By=function(){return!!window.fetch&&"function"==typeof window.fetch},t.prototype.Fy=function(t){if(t[0]&&"function"==typeof t[0].clone){var n=pi(t);return n[0]=t[0].clone(),n}return t},t.prototype.Vy=function(){this.Hy||(this.Hy=Hi({target:window,methodName:"fetch",hook:this.zy,hookPrepareArgs:this.Fy,options:{withCallerName:!0}}))},t.prototype.Gy=function(t,n,i){return W(this,void 0,void 0,(function(){var r,s,e,u,o,h,c,a,f;return K(this,(function(v){switch(v.label){case 0:return r=csString.prototype.split.call(n.url,"?"),s=r[0],e=r[1],u=zt(s),o=G(G({},t),{url:u,method:n.method,responseTime:gt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}}),this.M.isHeaderCollectionActive()&&(h=this.Uy.extractAllHeaders(n.headers),c=this.Uy.extractAllHeaders(i.headers),this.M.apiErrors.collectStandardHeaders&&(o.standardRequestHeaders=h.standardHeaders,o.standardResponseHeaders=c.standardHeaders),o.customRequestHeaders=h.validCustomHeaders,o.customResponseHeaders=c.validCustomHeaders,o.plainCustomRequestHeaders=h.plainCustomHeaders,o.plainCustomResponseHeaders=c.plainCustomHeaders),this.Uy.isValidUrl(s,this.M.apiErrors.validUrls)?(this.M.apiErrors.collectQueryParam&&e&&(o.queryParameters=e),this.M.apiErrors.collectResponseBody&&this.Uy.isValidBodyType(o.standardResponseHeaders)?(a=o,[4,this.Uy.getResponseBody(i)]):[3,2]):[3,4];case 1:a.responseBody=v.sent(),v.label=2;case 2:return this.M.apiErrors.collectRequestBody&&this.Uy.isValidBodyType(o.standardRequestHeaders)?(f=o,[4,n.text()]):[3,4];case 3:f.requestBody=v.sent(),v.label=4;case 4:return csArray.prototype.forEach.call(this.qy,(function(t){return t(o)})),[2]}}))}))},t.prototype.interceptFetch=function(t,n,i){return W(this,void 0,void 0,(function(){var r,s,e,u,o,h,c,a,f;return K(this,(function(v){switch(v.label){case 0:if(r=n[0],s=n[1],!Tt((e=new Request(r,s)).url))return[2];u=gt(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t];case 2:return o=v.sent(),[3,4];case 3:if(h=v.sent(),this.Jy(h)||this.Wy(h)||this.Ky(h))return[2];throw h;case 4:return c=o.status,a={statusCode:c,library:i,requestTime:u},c>=400?[4,this.Gy(G(G({},a),{isConfigurableApiError:!1}),e,o)]:[3,6];case 5:return v.sent(),[3,9];case 6:return this.jy?[4,this.jy.getFetchConfigurableApiError(c,e.url,o,this.Uy)]:[3,9];case 7:return(f=v.sent()).isMatching?[4,this.Gy(G(G({},a),{isConfigurableApiError:!0,matchingBodyContent:f.matchingBodyContent}),e,o)]:[3,9];case 8:v.sent(),v.label=9;case 9:return[2]}}))}))},t.prototype.Jy=function(t){return t instanceof TypeError},t.prototype.Wy=function(t){return t instanceof DOMException&&"AbortError"===t.name},t.prototype.Ky=function(n){return n instanceof DOMException&&csArray.prototype.some.call(t.Yy,(function(t){return t===n.name}))},t.Yy=["NoModificationAllowedError","InvalidStateError","OperationError"],J([hn("FetchRequestTracker.interceptFetch")],t.prototype,"interceptFetch",null),t}(),eh=function(){function t(){this.Xy=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.$y=function(t,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var s=r[i];if(csString.prototype.toLowerCase.call(s)===t)return n[s]}return""},t.prototype.isValidBodyType=function(t){var n=this.$y("content-type",t);if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.Xy,(function(t){return Z(i,t)}))},t.prototype.getResponseBodySize=function(t){var n=parseInt(this.$y("content-length",t),10);return isNaN(n)?null:n},t}(),uh=function(t){function n(n){var i=t.call(this)||this;return i.Zy=n,i}return F(n,t),n.prototype.extractAllHeaders=function(t){var n=this,i={},r={},s={};return t.forEach((function(t,e){n.Zy.isValidStandardHeader(e)&&t?i[e]=csString.prototype.trim.call(t):n.Zy.isValidCustomHeader(e)&&t?r[e]=csString.prototype.trim.call(t):n.Zy.isPlainCustomHeader(e)&&t&&(s[e]=csString.prototype.trim.call(t))})),{standardHeaders:i,validCustomHeaders:r,plainCustomHeaders:s}},n.prototype.extractHeadersByName=function(t,n){var i={};return n.headers.forEach((function(n,r){-1!==csArray.prototype.indexOf.call(t,csString.prototype.toLowerCase.call(r))&&n&&(i[r]=csString.prototype.trim.call(n))})),i},n.prototype.getResponseBody=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(n){return t.bodyUsed?[2,Promise.resolve(void 0)]:[2,t.clone().text()]}))}))},n}(eh),oh=function(){function t(t,n,i){var r=this;this.M=t,this.Qy=n,this.jy=i,this.Ye=!1,this.tp=null,this.np=null,this.ip=null,this.qy=[],this.rp=function(t){var n=t.context,i=t.args,s=t.callerName;return r.interceptOpen(n,i,s)},this.sp=function(t){var n=t.context,i=t.args;return r.interceptSetRequestHeader(n,i)},this.ep=function(t){var n=t.context,i=t.args;return r.interceptSend(n,i)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.qy,t)},t.prototype.start=function(){this.Ye||(this.up(),this.tp&&this.tp.activate(),this.np&&this.np.activate(),this.ip&&this.ip.activate(),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(this.tp&&this.tp.deactivate(),this.np&&this.np.deactivate(),this.Ye=!1)},t.prototype.up=function(){this.tp||(this.tp=Hi({target:XMLHttpRequest.prototype,methodName:"open",hook:this.rp,options:{withCallerName:!0}})),this.np||(this.np=Hi({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.sp})),this.ip||(this.ip=Hi({target:XMLHttpRequest.prototype,methodName:"send",hook:this.ep}))},t.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&Tt(n[1])){var s=csString.prototype.split.call(n[1],"?"),e=s[0],u=s[1],o=zt(e);t.apiCall={url:o,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:gt(),responseTime:0,statusCode:0,library:i,isConfigurableApiError:!1,plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},u&&this.Qy.isValidUrl(o,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},t.prototype.Gy=function(t){if(t.apiCall.responseTime=gt(),t.apiCall.statusCode=t.status,this.M.isHeaderCollectionActive()){var n=this.Qy.extractAllHeaders(t.getAllResponseHeaders());this.M.apiErrors.collectStandardHeaders&&(t.apiCall.standardResponseHeaders=n.standardHeaders),t.apiCall.customResponseHeaders=n.validCustomHeaders,t.apiCall.plainCustomResponseHeaders=n.plainCustomHeaders}this.Qy.isValidUrl(t.apiCall.url,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectResponseBody&&this.Qy.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.qy,(function(n){return n(t.apiCall)}))},t.prototype.readyStateChangeListener=function(t){if(t.apiCall&&t.readyState===XMLHttpRequest.DONE)if(t.status>=400)this.Gy(t);else if(this.jy){var n=this.jy.getXhrConfigurableApiError(t.status,t.apiCall.url,t,this.Qy);n.isMatching&&(t.apiCall.isConfigurableApiError=!0,t.apiCall.matchingBodyContent=n.matchingBodyContent,this.Gy(t))}},t.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.M.isHeaderCollectionActive()){var i=n[0],r=n[1];this.M.apiErrors.collectStandardHeaders&&this.Qy.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.Qy.isValidCustomHeader(i)&&r?t.apiCall.customRequestHeaders[i]=r.trim():this.Qy.isPlainCustomHeader(i)&&r&&(t.apiCall.plainCustomRequestHeaders[i]=r.trim())}},t.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.Qy.isValidUrl(t.apiCall.url,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectRequestBody&&this.Qy.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},J([hn("XhrRequestTracker.interceptOpen")],t.prototype,"interceptOpen",null),J([hn("XhrRequestTracker.readyStateChangeListener")],t.prototype,"readyStateChangeListener",null),J([hn("XhrRequestTracker.interceptSetRequestHeader")],t.prototype,"interceptSetRequestHeader",null),J([hn("XhrRequestTracker.interceptSend")],t.prototype,"interceptSend",null),t}(),hh=function(t){function n(n){var i=t.call(this)||this;return i.Zy=n,i}return F(n,t),n.prototype.extractAllHeaders=function(t){var n=this,i={},r={},s={};return csArray.prototype.forEach.call(null==t?void 0:csString.prototype.split.call(t,/[\r\n]+/),(function(t){var e=csString.prototype.split.call(t,/:(.*)/),u=e[0],o=e[1];n.Zy.isValidStandardHeader(u)&&o?i[u]=csString.prototype.trim.call(o):n.Zy.isValidCustomHeader(u)&&o?r[u]=csString.prototype.trim.call(o):n.Zy.isPlainCustomHeader(u)&&o&&(s[u]=csString.prototype.trim.call(o))})),{standardHeaders:i,validCustomHeaders:r,plainCustomHeaders:s}},n.prototype.extractHeadersByName=function(t,n){var i={};return csArray.prototype.forEach.call(null==n.getAllResponseHeaders()?void 0:csString.prototype.split.call(n.getAllResponseHeaders(),/[\r\n]+/),(function(n){var r=csString.prototype.split.call(n,/:(.*)/),s=r[0],e=r[1];-1!==csArray.prototype.indexOf.call(t,csString.prototype.toLowerCase.call(s))&&e&&(i[s]=csString.prototype.trim.call(e))})),i},n.prototype.getResponseBody=function(t){return t.responseText},n.prototype.isValidStandardHeader=function(t){return this.Zy.isValidStandardHeader(t)},n.prototype.isValidCustomHeader=function(t){return this.Zy.isValidCustomHeader(t)},n.prototype.isPlainCustomHeader=function(t){return this.Zy.isPlainCustomHeader(t)},n}(eh),ch=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Qi=n,e.op=i,e.Th=r,e.tr=s,e.hp=[],e.lr=0,e}return F(n,t),n.prototype.init=function(){this.Qi.init()},n.prototype.initStates=function(){this.cp(),this.hp=[],this.lr=0,this.cv()},n.prototype.cv=function(){this.lv=gt()},n.prototype.fv=function(){return gt()-this.lv},n.prototype.onStart=function(){var t=this;this.Qi.subscribe(n.Lr,(function(n){return t.Pr(n)}))},n.prototype.onStop=function(){this.Qi.unsubscribe(n.Lr)},n.prototype.onIframeApiError=function(t){this.Pr(t)},n.prototype.Pr=function(t){this.isStarted&&this.lr<n.ap&&(t.relativeTime=this.fv(),csArray.prototype.push.call(this.hp,this.tr.anonymize(t)),this.fp())},n.prototype.cp=function(){this.op.removeQueryParams(),this.op.setQueryParams(this.Th.getRequestParameters())},n.prototype.fp=function(){this.op.send({errors:this.hp}),this.hp=[],this.lr+=1},n.Lr="ApiErrorsService",n.ap=20,n}(Ci),ah=["api-errors:maskUrl"];!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(ih||(ih={}));var fh,vh=function(){function t(t,n,i,r,s,e,u){this.Qi=t,this.tr=n,this.M=i,this.Th=r,this.ka=s,this.Zc=e,this.ia=u}return t.prototype.init=function(){var t=this.ia.create("".concat(this.M.getTrackerUri(),"/").concat("api-errors"),!0);this.Qi.excludeDomains([ih.CONTENTSQUARE,ih.CLICKTALE]),this.Qi.excludeDomains([ih.FAKE_TRACKER]),this.vp=new ch(this.Qi,t,this.Th,this.tr),this.vp.init(),this.ka.addListener(this.vp),this.lp()},t.prototype.lp=function(){var t=this;this.Zc.register(ah,(function(n){return t.tr.addUrlMaskingPattern(n)}))},t.prototype.onStartTracking=function(){this.vp.start()},t.prototype.onAfterNaturalPageView=function(){this.vp.initStates()},t.prototype.onAfterArtificialPageView=function(){this.vp.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.vp.stop()},t.prototype.onOptout=function(){this.vp.stop()},t}(),lh=function(){function t(t){this.M=t,this.dp=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.dp,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){return this.wp(t,this.M.apiErrors.validCustomHeaders)},t.prototype.isPlainCustomHeader=function(t){return this.wp(t,this.M.apiErrors.plainCustomHeaders)},t.prototype.wp=function(t,n){if(!n||0===n.length)return!1;var i=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(n,(function(t){return csString.prototype.toLowerCase.call(t)===i}))},t}(),dh=function(t){function n(n,i,r,s,e,u){var o=t.call(this)||this;return o.$i=n,o.yp=i,o.Th=r,o.Zi=s,o.Qc=e,o.$=u,o.pp=[],o.vr=0,o.mp=[],o}return F(n,t),n.prototype.initStates=function(){this.lv=gt(),this.yp.removeQueryParams(),this.yp.setQueryParams(this.Th.getRequestParameters()),this.pp=[],this.vr=0},n.prototype.onStart=function(){var t=this;this.$i.subscribe(n.Lr,(function(n){return t.Pr(n)})),this.gp()},n.prototype.onStop=function(){this.$i.unsubscribe(n.Lr)},n.prototype.onIframeJavascriptError=function(t){this.Pr(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Ap(n)},n.prototype.Ap=function(t){var n=this;this.isStarted?this.Pr(t,(function(t){return n.Qc.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.mp,t)},n.prototype.gp=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.mp,(function(n){return t.Ap(n)})),this.mp=[])},n.prototype.Pr=function(t,n){if(this.isStarted&&this.vr<20){var i=G(G({},t),{pageUrl:this.$.getAnonymizedUrl(),rt:this.fv()});this.Zi.anonymize(i),csArray.prototype.push.call(this.pp,i),this.fp(),n&&n(i)}},n.prototype.fv=function(){return gt()-this.lv},n.prototype.fp=function(){this.yp.send({errors:this.pp}),this.pp=[],this.vr+=1},n.Lr="JavaScriptErrorsService",n}(Ci),wh=["trackError"],yh=function(){function t(t,n,i,r,s,e,u,o,h){this.$i=t,this.Zi=n,this.M=i,this.Th=r,this.ka=s,this.Zc=e,this.Qc=u,this.$=o,this.ia=h}return t.prototype.init=function(){var t=this.ia.create("".concat(this.M.getTrackerUri(),"/").concat("errors"),!0);this.Sp=new dh(this.$i,t,this.Th,this.Zi,this.Qc,this.$),this.ka.addListener(this.Sp),this.lp()},t.prototype.lp=function(){var t=this;this.M.jsCustomErrorsEnabled&&!this.M.customErrors.enabled&&this.Zc.register(wh,(function(n){t.Sp.trackCustomError(n)}))},t.prototype.onStartTracking=function(){this.Sp.start()},t.prototype.onAfterNaturalPageView=function(){this.Sp.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Sp.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Sp.stop()},t.prototype.onOptout=function(){this.Sp.stop()},t}();!function(t){var n=5,i=30,r=30;t.buildCustomErrorEvent=function(t,s,e){void 0===e&&(e=!1);var u={message:_o.truncateMessageWithEllipsis(t,300),errorType:"customError"};return(e||function(t){var s=Object.keys(t).length;if(0===s||s>n)return!1;for(var e in t)if(e.length>i||t[e].length>r)return!1;return!0}(s))&&(u.attributes=s),u}}(fh||(fh={}));var ph,mh=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.Ep=n,u.Th=i,u.bp=r,u.bd=s,u.Rp=e,u.Np=[],u.wr=0,u.mp=[],u}return F(n,t),n.prototype.initStates=function(){var t,n=this;this.cp(),this.lv=gt(),this.Np=[],this.wr=0,null===(t=this.Rp)||void 0===t||t.onEvent((function(t){return n.Pr(t)}))},n.prototype.trackCustomError=function(t,n){if(void 0===n&&(n={}),Tt(t)&&Ot(n)){var i=fh.buildCustomErrorEvent(t,n);this.Ap(i)}},n.prototype.onIframeCustomError=function(t){this.Pr(t)},n.prototype.onStart=function(){var t;this.gp(),null===(t=this.Rp)||void 0===t||t.start()},n.prototype.onStop=function(){var t;null===(t=this.Rp)||void 0===t||t.stop()},n.prototype.gp=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.mp,(function(n){return t.Pr(n)})),this.mp=[])},n.prototype.Ap=function(t){this.isStarted?this.Pr(t):csArray.prototype.push.call(this.mp,t)},n.prototype.Pr=function(t){if(this.isStarted&&this.wr<20){var n=this.Tp(t);csArray.prototype.push.call(this.Np,n),this.fp(),this.bd.emitCustomErrorEvent(n)}},n.prototype.Tp=function(t){var n=G(G({},t),{rt:this.fv()});return n.message=this.bp.anonymizeEmail(t.message),n},n.prototype.cp=function(){this.Ep.removeQueryParams(),this.Ep.setQueryParams(this.Th.getRequestParameters())},n.prototype.fv=function(){return gt()-this.lv},n.prototype.fp=function(){this.Ep.send({errors:this.Np}),this.Np=[],this.wr+=1},n}(Ci),gh=function(){function t(t,n,i,r,s,e,u,o){this.bp=t,this.M=n,this.Th=i,this.Zc=r,this.Qc=s,this.ia=e,this.ka=u,this.Rp=o}return t.prototype.init=function(){var t=this.ia.create("".concat(this.M.getTrackerUri(),"/").concat("custom-errors"),!0);this.Op=new mh(t,this.Th,this.bp,this.Qc,this.Rp),this.ka.addListener(this.Op),this.lp()},t.prototype.lp=function(){var t=this;this.Zc.register(wh,(function(n,i){t.Op.trackCustomError(n,i)}))},t.prototype.onStartTracking=function(){this.Op.start()},t.prototype.onAfterNaturalPageView=function(){this.Op.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Op.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Op.stop()},t.prototype.onOptout=function(){this.Op.stop()},t}(),Ah=function(){function t(){this.kp=Ve.Natural}return t.prototype.setPageViewType=function(t){this.kp=t},t.prototype.getPageViewType=function(){return this.kp},t.prototype.getRequestParameters=function(){return{pvt:this.kp}},t}(),Sh=function(){function t(t){this.Yi=t}return t.prototype.onAfterVisitorRenewal=function(){this.Yi.startNewSession()},t}();function Eh(t){switch(typeof t){case"string":return t;case"object":return csJSON.stringify(t);default:return csString(t)}}function bh(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(0===n.length)return Eh(t);var r=0;return"string"==typeof t&&n.length>0&&(t=csString.prototype.replace.call(t,/(%?)(%([oOdisf]))/g,(function(t){var i;if(r>=n.length)return t;switch(t){case"%i":case"%d":i=parseInt(n[r],10);break;case"%s":i=csString(n[r]);break;case"%f":i=parseFloat(n[r]);break;case"%o":case"%O":i=Eh(n[r]);break;default:i=n[r]}return r++,i}))),r<n.length&&(t+=function(t,n){for(var i="";t<n.length;)i=i+" "+Eh(n[t]),t++;return i}(r,n)),t}!function(t){t.Info="info",t.Log="log",t.Debug="debug",t.Warning="warn",t.Error="error"}(ph||(ph={}));var Rh,Nh=function(){function t(t){this.M=t,this.Ye=!1,this.Ip=[]}return t.prototype.start=function(){this.Ye||(this.Cp(),csArray.prototype.forEach.call(this.Ip,(function(t){return t.activate()})),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(csArray.prototype.forEach.call(this.Ip,(function(t){return t.deactivate()})),this.Ye=!1)},t.prototype.onEvent=function(t){this._p=t},t.prototype.xp=function(t){for(var n=0;n<t.length;n++)if(Ct(t[n]))return[];return t},t.prototype.Cp=function(){var t=this;if(!(this.Ip.length>0))for(var n=function(n){if(i.Pp(n)&&ph[n]in window.console){var r=Hi({target:window.console,methodName:ph[n],hook:function(i){var r=i.args,s=i.callerName;t.onMessageConsole(r,n,s)},hookPrepareArgs:i.xp,options:{withCallerName:!0}});r&&csArray.prototype.push.call(i.Ip,r)}},i=this,r=0,s=this.M.customErrors.consoleMessageLogLevels;r<s.length;r++){n(s[r])}},t.prototype.Mp=function(t){return void 0!==t&&""!==t&&!!Ft(Vt(t),this.M.hostnames)},t.prototype.onMessageConsole=function(t,n,i){if(0!==t.length&&this.Mp(i)){var r=pi(t),s=r[0],e=csArray.prototype.slice.call(r,1),u=fh.buildCustomErrorEvent(bh.apply(void 0,Y([s],e,!1)),{csLogLevel:n},!0);this._p(u)}},t.prototype.Pp=function(t){return t in ph},J([hn("ConsoleMessageTracker: onMessageConsole")],t.prototype,"onMessageConsole",null),t}(),Th=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R){var N=this;this.Th=t,this.fc=n,this.J=i,this.W=r,this.Ei=s,this.Zc=e,this.Lp=u,this.M=o,this.Dp=h,this.jp=c,this.Hp=a,this._o=f,this.L=v,this.Zf=l,this.Bc=d,this.$=w,this.qp=y,this.bd=p,this.ka=m,this.en=g,this.zp=A,this.na=S,this.Bp=E,this.ce=b,this.ia=R,this.Vp=function(t){void 0===t&&(t=!1),N.Fp.start(t),N.Gp.start()}}return t.prototype.start=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y=this;(this.Dp.init(),this.jp.init(),this.jp.isActive())||(this.ce.schedule((function(){v=new po(y.W,y.J),w=new Sh(v),f=new oo(y.Zf),d=new Zo(nn),t=new Wu(y.M,y.J,y.W,y.Zf,f,y.Zc,v,d,y.ka,y.ia),n=new le(y.Zc,y.W,y.M,y.Th,y.fc,y.L),l=new Vo(y.M),a=new nh;var p=new Jo(y.M,l);(c=new Go(y.M,p,a,y.ka)).init();var m=new Ah;i=new he(y.J,y.W,y.Zc,y.ka,p,y.M,m),r=new be(y.M,y.J,y.W,y.Zc,y.L,v,y.$),y.Fp=new uo(y.M,y.Zc,y.Ei,y.J,y.W,y._o,y.en,y.Bc,y.$,y.na,m),s=new yo(y.M,y.J,y.W,y.Zc),e=new xo(y.M,y.W,y.$,y.Zc,y.Vp,l),u=new Uo(y.M,y.Zc,y.fc,y.Th,y.bd),o=new Fo(y.Zc),h=new th(y.M,new bt(y.M,y.L),y.ia),y.Gp=new ho})),this.M.apiErrors.enabled&&this.ce.schedule((function(){var t,n,i=new lh(y.M);(null===(t=y.M.apiErrors.configurableApiErrorRules)||void 0===t?void 0:t.length)&&(n=new rh(y.M));var r=new hh(i),s=new oh(y.M,r,n),e=new uh(i),u=new sh(y.M,e,n);y.Qi=new Wo(s,u),y.tr=new Ko(y.Bc);var o=new vh(y.Qi,y.tr,y.M,y.Th,y.ka,y.Zc,y.ia);o.init(),y.Ei.addListener(o)})),this.M.customErrors.enabled&&this.ce.schedule((function(){var t,n;(null===(t=y.M.customErrors.consoleMessageLogLevels)||void 0===t?void 0:t.length)&&(n=new Nh(y.M));var i=new gh(y.L,y.M,y.Th,y.Zc,y.bd,y.ia,y.ka,n);i.init(),y.Ei.addListener(i)})),this.M.jsErrorsEnabled&&this.ce.schedule((function(){y.$i=new qo,y.Zi=new Yo(y.L,y.$);var t=new yh(y.$i,y.Zi,y.M,y.Th,y.ka,y.Zc,y.bd,y.$,y.ia);t.init(),y.Ei.addListener(t)})),this.ce.schedule((function(){y.Hp.init()})),this.ce.schedule((function(){i.init()})),this.ce.schedule((function(){n.init()})),this.ce.schedule((function(){r.init()})),this.ce.schedule((function(){y.zp.init()})),this.ce.schedule((function(){y.Fp.init()})),this.ce.schedule((function(){s.init()})),this.ce.schedule((function(){e.init()})),this.ce.schedule((function(){u.init()})),this.ce.schedule((function(){y.qp.init()})),this.ce.schedule((function(){o.init()})),this.ce.schedule((function(){h.init()})),this.ce.schedule((function(){y.Bp.init()})),this.ce.schedule((function(){y.Ei.addListener(s),y.Ei.addListener(y.Lp),y.Ei.addListener(t),y.Ei.addListener(y.Hp),y.Ei.addListener(i),y.Ei.addListener(y.zp),y.Ei.addListener(y.Fp),y.Ei.addListener(e),y.Ei.addListener(u),y.Ei.addListener(n),y.Ei.addListener(c),y.Ei.addListener(h),y.Ei.addListener(w)})),ms.isRecordingSupported()&&this.ce.schedule((function(){var t=new Ks(a,y.W,y.M,y.fc,f,y._o,y.Th,y.Zc,y.L,v,y.$,l,y.$i,y.Zi,y.Qi,d,y.tr,y.Ei,y.bd,y.ka,y.na,y.ce,y.ia,y.Bc);t.init(),y.Ei.addListener(t),i.setRecordingService(t.recordingService)})),this.M.eMerchandisingEnabled&&this.ce.schedule((function(){var t=new Oo(y.M,y.Zf,y.ia,y.Th,y.en,y.$,y.ka,y.Zc,y.ce);t.init(),y.Ei.addListener(t)})),this.ce.schedule((function(){t.init()})),this.ce.schedule((function(){v.onSessionExpired((function(){y.Ei.emitBeforeSessionRenewal(),y.Jp(!0),y.Ei.emitAfterSessionRenewal()})),y.Jp()})))},t.prototype.Jp=function(t){var n=this;void 0===t&&(t=!1),this.Zc.start(),this.Gp.onLoad((function(){n.Ei.emitStartTracking(t)})),ko(this.M)&&!t||this.Vp(t)},t}(),Oh=function(){function t(t,n,i,r,s,e,u,o){this.M=t,this.J=n,this.rn=i,this.Wp=r,this.Kp=s,this.Yp=e,this.Xp=u,this.$p=o}return t.prototype.compute=function(t){var n,i,r=this;this.M.crossDomainTracking&&!this.M.cookielessTrackingEnabled?this.M.crossDomainSingleIframeTracking?null===(n=this.Xp)||void 0===n||n.start((function(){return r.Zp(t)})):null===(i=this.Yp)||void 0===i||i.applyUpToDate((function(){return r.Zp(t)})):this.Zp(t)},t.prototype.Zp=function(t){this.Kp.handle(),this.Wp.clear(),this.Qp()?(this.Wp.restoreClearedVisitor(),t(!0)):(this.rn.exclude(this.M),t(!1))},t.prototype.Qp=function(){var t=nt.boolean(this.M.sampleRate);return this.$p.isForceIncluded()||!this.rn.isExcluded()&&this.J.doesVisitorExist()||!this.rn.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(Rh||(Rh={}));var kh,Ih=function(){function t(t,n,i,r){this.M=t,this.tm=n,this.W=i,this.Ei=r,this.nm=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.im(),this.W.removeSession()),this.rm(t),this.setVisitor(t)},t.prototype.im=function(){return{id:Rh.generate(),visitsCount:0,appliedTrackingDraw:this.M.lastTrackingDraw,creationTimestamp:At(),lastVisitTimestamp:0,hitTimestamp:0,expires:gt()+this.M.visitorCookieTimeout}},t.prototype.rm=function(t){var n=At();this.W.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.M.lastTrackingDraw,this.sm=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.tm.get()},t.prototype.setVisitor=function(t){this.tm.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.tm.get()},t.prototype.resetVisitor=function(){this.um(),this.Ei.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.tm.remove()},t.prototype.handleSubdomainChange=function(){this.tm.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.sm&&t.visitsCount!==this.sm},t.prototype.om=function(){return!kt(this.hm)||gt()-this.hm>this.nm},t.prototype.renewVitor=function(){this.om()?(this.hm=gt(),this.um(),this.Ei.emitAfterVisitorRenewal()):nn.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.um=function(){this.Ei.emitBeforeVisitorRenewal(),this.removeVisitor()},t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(kh||(kh={}));var Ch,_h=function(){function t(t,n){this.am=t,this.fm=n,this.vm=null,this.lm=0,this.dm=kh.NO}return t.prototype.setDynamicVariablesService=function(t){this.wm=t},t.prototype.createOrUpdateSession=function(){this.ym(),this.pm=gt(),this.lm=0;var t=this.gm();null===t?(t=this.Am(),this.Sm(t),this.Em(t)):(t=this.fm.sanitizeSessionRecordingState(t),this.Sm(t),t.recordingState=this.fm.updateRecordingState(t)),this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.fm.getDisabledRecordingState(),t.recordingState=this.fm.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.dm=kh.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.fm.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.dm=kh.WITHDRAWN},t.prototype.Em=function(t){this.dm===kh.WITHDRAWN?(t.recordingState=this.fm.getConsentWithdrawnRecordingState(),this.setSession(t)):this.dm===kh.GRANTED?t.recordingState=this.fm.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.fm.computeInitialRecordingState(t),this.dm=kh.NO},t.prototype.Am=function(){return{pageNumber:0,recordingState:this.fm.getDisabledRecordingState(),etrState:mn.ETR_OFF}},t.prototype.Sm=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.fm.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===pn.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.fm.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.am.get()},t.prototype.gm=function(){return this.am.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.am.get()},t.prototype.setSession=function(t){this.am.set(t)},t.prototype.removeSession=function(){this.am.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==pn.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===mn.ETR_ON&&csArray.prototype.push.call(n,pn.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.am.getRawSession();return this.am.isValid(t)},t.prototype.handleSubdomainChange=function(){this.am.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.am.isCacheRefreshed();return n&&t&&this.am.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this.vm||this.bm()},t.prototype.bm=function(){if(this.Rm())this.ym();else{var t=this.getSession();if(null===t)return nn.warn("extendSession is trying to extend an expired session"),void this.ym();this.am.set(t,In),this.Nm(),this.Tm()}},t.prototype.Tm=function(){var t=this;this.vm=window.setTimeout((function(){t.bm()}),174e4)},t.prototype.Rm=function(){return 1434e4-(gt()+In-this.pm)<0},t.prototype.ym=function(){this.vm&&(window.clearTimeout(this.vm),this.vm=null)},t.prototype.Nm=function(){this.lm+=1,this.wm.trackDynamicVariable("session_expiry_update",this.lm)},t}(),xh=function(){function t(t,n,i){this.M=t,this.J=n,this.rn=i}return t.prototype.clear=function(){this.Om()&&(this.km=this.J.getVisitor(),this.J.removeVisitor()),this.Im()&&this.rn.removeExclusion()},t.prototype.Om=function(){return this.J.doesVisitorExist()&&this.J.getVisitor().appliedTrackingDraw!==this.M.lastTrackingDraw},t.prototype.Im=function(){return this.rn.getAppliedTrackingDraw()!==this.M.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.km&&this.J.setVisitor(this.km)},t}(),Ph=function(){function t(t,n){this.J=t,this.W=n}return t.prototype.handle=function(){this.Cm(),this._m()},t.prototype.Cm=function(){this.J.handleSubdomainChange()},t.prototype._m=function(){this.W.handleSubdomainChange()},t}(),Mh=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),Lh=function(t){function n(n){var i=t.call(this)||this;return i.ce=n,i}return F(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.ce.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,s=this.listeners;r<s.length;r++){n(s[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){nn.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onRecordingStateChange&&s.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},J([ci("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Mh),Dh="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Ch||(Ch={}));var Uh,jh=function(){function t(t,n,i){this.M=t,this.un=n,this.xm=i}return t.prototype.get=function(){var t;return null===(t=this.M.cookielessTrackingEnabled?this.xm.getItem(Dh):this.un.get(Dh))?t:Number(t)},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.xm.setItem(Dh,csString(t)):this.un.set(Dh,csString(t),tt)},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.xm.removeItem(Dh):this.un.delete(Dh)},t.prototype.handleSubdomainChange=function(){this.M.cookielessTrackingEnabled||(this.M.allowSubdomains?this.un.delete(Dh,cn.CURRENT_DOMAIN):this.un.delete(Dh,this.un.getRootDomain()))},t}(),Hh=function(){function t(t,n,i){this.M=t,this.W=n,this.Ei=i}return t.prototype.grantReplayConsent=function(){if(Us.isReplayConsentNeeded(this.M)){var t=this.W.getSession();t?Us.isRecordingBlockedByConsent(t)&&(this.W.grantReplayRecording(t),this.Ei.emitAfterReplayRecordingConsentGranted()):this.W.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=function(){if(Us.isReplayConsentNeeded(this.M)){var t=this.W.getSession();t?Us.isRecordingWithDrawn(t)||(this.W.withdrawnReplayRecording(t),this.Ei.emitAfterReplayRecordingConsentWithdrawn()):this.W.withdrawnReplayRecordingBeforeSessionStart()}},t}(),qh=["replay:consent:unanonymized:granted","trackConsentGranted"],zh=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Bh=["replay:consent:startForSession:granted"],Vh=["replay:consent:startForSession:withdrawn"],Fh=function(){function t(t,n,i,r,s){this.M=t,this.Zc=n,this._o=i,this.W=r,this.Ei=s}return t.prototype.init=function(){this.Pm=new Hh(this.M,this.W,this.Ei),this._o.handleSubdomainChange(),this._o.setInitialConsent(),this.lp()},t.prototype.lp=function(){var t=this;this.Zc.register(qh,(function(){t._o.grantReplayAnonymizationConsent()})),this.Zc.register(zh,(function(){t._o.withdrawReplayAnonymizationConsent()})),this.Zc.register(Bh,(function(){t.Pm.grantReplayConsent()})),this.Zc.register(Vh,(function(){t.Pm.withdrawReplayConsent()}))},t.prototype.onOptout=function(){this._o.removeAllConsents()},t.prototype.onBeforeVisitorRenewal=function(){this._o.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this._o.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this._o.setInitialConsent()},t}(),Gh=function(){function t(t,n,i){this.M=t,this.tm=n,this.Ei=i}return t.prototype.setInitialConsent=function(){var t=this.tm.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.M.consentRequired;return n&&t===Ch.NOT_REQUIRED||!n&&t!==Ch.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.tm.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.M.consentRequired?Ch.NOT_EXPRESSED:Ch.NOT_REQUIRED;this.tm.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.M.consentRequired&&(this.tm.set(Ch.GRANTED),this.Ei.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.M.consentRequired&&(this.tm.set(Ch.WITHDRAWN),this.Ei.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.tm.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.M.consentRequired||this.tm.get()===Ch.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.tm.get())}},t}(),Jh=function(){function t(t,n,i,r,s,e,u){this.Ei=t,this.Zc=n,this.Lp=i,this.Dp=r,this.jp=s,this.Mm=e,this.Hp=u}return t.prototype.start=function(){this.Ei.addListener(this.Mm),this.Ei.addListener(this.Hp),this.Ei.addListener(this.Lp),this.Hp.init(),this.Dp.init(),this.jp.init(),this.jp.isActive()||this.Zc.start()},t}(),Wh=function(){function t(t,n){this.bn=t,this.tm=n}return t.prototype.exclude=function(t){this.tm.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.tm.remove()},t.prototype.isExcluded=function(){return this.Lm()||this.Dm()},t.prototype.Lm=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.tm.get()},t.prototype.Dm=function(){return csString.prototype.indexOf.call(this.bn.href,Ln)>0},t}(),Kh=function(){function t(t){this.Ua=t}return t.prototype.onOptout=function(){this.Ua.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Uh||(Uh={}));var Yh,Xh=function(){function t(t){this.$=t,this.Um=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Um=new RegExp(t)},t.prototype.jm=function(){return this.Um.test(this.$.getAnonymizedUrl())?Uh.SessionReplay:Uh.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.jm()===Uh.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.jm()}},t}(),$h=["excludeURLforReplay"],Zh=function(){function t(t,n){this.Ua=t,this.Zc=n}return t.prototype.init=function(){var t=this;this.Zc.register($h,(function(n){Tt(n)&&t.Ua.setExcludeUrlForSessionReplay(n)}))},t}(),Qh="_cs_inc",tc=function(){function t(t,n){this.bn=t,this.un=n}return t.prototype.isForceIncluded=function(){return this.Hm()||this.qm()},t.prototype.isForceReplayRecorded=function(){return this.zm(pn.GLOBAL_SAMPLING)},t.prototype.Hm=function(){return null!==this.un.get(Qh)},t.prototype.zm=function(t){return this.un.get(Qh)===t},t.prototype.qm=function(){return csString.prototype.indexOf.call(this.bn.href,Qh)>0},t}(),nc="_cs_optout",ic=function(){function t(t,n,i){this.M=t,this.un=n,this.xm=i}return t.prototype.get=function(){return this.M.cookielessTrackingEnabled?this.xm.getItem(nc):this.un.get(nc)},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.xm.setItem(nc,t):this.un.set(nc,t,tt)},t}(),rc=function(){function t(t,n,i){this.Ei=t,this.bn=n,this.tm=i}return t.prototype.init=function(){!this.isActive()&&this.Bm()&&this.activate()},t.prototype.isActive=function(){return"1"===this.tm.get()},t.prototype.activate=function(){this.Ei.emitOptout(),this.tm.set("1")},t.prototype.Bm=function(){return csString.prototype.indexOf.call(this.bn.href,nc)>0},t}(),sc=["optout"],ec=["optin"],uc=function(){function t(t,n){this.Zc=t,this.jp=n}return t.prototype.init=function(){var t=this;this.Zc.register(sc,(function(){t.jp.activate()}))},t}();function oc(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),oc)[0]}(t,n);return i||r}}(Yh||(Yh={}));var hc=function(){function t(t,n,i){this.M=t,this.Vm=n,this.Fm=i}return t.prototype.applyUpToDate=function(t){var n=this;this.Fm.retrieve(this.M.hostnames,(function(i){var r=Y([n.Vm.get()],i,!0),s=Yh.select(r,n.M.lastTrackingDraw);n.Vm.apply(s),t()}))},t}(),cc=function(){function t(t,n){this.Zc=t,this.ka=n}return t.prototype.init=function(){this.ka.addListener(this.Zc)},t.prototype.onOptout=function(){this.Zc.stop()},t.prototype.onBeforeSessionRenewal=function(){this.Zc.stop()},t}();var ac;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(ac||(ac={}));var fc,vc=function(t){function n(n){var i=t.call(this)||this;return i.Gm=n,i.Jm={},i}return F(n,t),n.prototype.register=function(t,n,i){for(var r=0,s=t;r<s.length;r++){var e=s[r];this.Jm[e]={callback:n,configuration:i},this.Jm}},n.prototype.onStart=function(){this.Wm(),this.Km()},n.prototype.onStop=function(){for(var t=0,n=this.Gm;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Ym(r.name,r.params,t.iframePath)}},n.prototype.Ym=function(t,n,i){var r=this;nn.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.Jm[t])return(i=r.Jm[t]).callback.apply(i,n)}))()},n.prototype.Wm=function(){for(var t=this,n=0,i=this.Gm;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.Xm(i,r,!1)}))}},n.prototype.Km=function(){for(var t=this,n=0,i=this.Gm;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.Xm(i,r,!0)}}}},n.prototype.Xm=function(t,n,i){var r,s,e;if(this.Jm[t]){if((null===(s=this.Jm[t].configuration)||void 0===s?void 0:s.disableApplyPending)&&!i||(null===(e=this.Jm[t].configuration)||void 0===e?void 0:e.disableApplyImmediate)&&i)return;try{return(r=this.Jm[t]).callback.apply(r,n)}catch(i){nn.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(Ci),lc="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(fc||(fc={}));var dc=function(){function t(t,n,i,r,s,e){this.M=t,this.un=n,this.am=i,this.$m=r,this.Zm=s,this.Qm=e,this.tg=un.None,this.ng=!1,this.ig=[],this.rg=[]}return t.prototype.init=function(){this.tg=this.un.isSameSiteSupported()?un.None:un.NotSet,this.sg()},t.prototype.setStates=function(t,n){this.Vm=t,this.eg=n},t.prototype.start=function(t){var n=this;this.eg.init(this.ug(),(function(i,r){var s=[n.Vm.get()];r&&csArray.prototype.push.call(s,i);var e=Yh.select(s,n.M.lastTrackingDraw);n.ng=!0,n.Vm.apply(e),t()})),this.og=this.eg.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.ng){var r={name:t,value:n,samesite:this.tg,secure:on.Yes};i&&(r.expires=sn.toExpireDate(i).getTime()),this.hg(r)}},t.prototype.removeCookie=function(t){this.ng&&this.cg(t)},t.prototype.cg=function(t){this.rg=csArray.prototype.filter.call(this.rg,(function(n){return n!==t})),this.ig=csArray.prototype.filter.call(this.ig,(function(n){return n.name!==t})),csArray.prototype.push.call(this.rg,t),this.setBatchReadyCall()},t.prototype.hg=function(t){this.rg=csArray.prototype.filter.call(this.rg,(function(n){return n!==t.name})),this.ig=csArray.prototype.filter.call(this.ig,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.ig,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.ag()},t.prototype.ag=function(){if(this.ig.length>0){var t=this.fg(fc.Set,this.ig);this.vg(t),this.ig=[]}if(this.rg.length>0){var n=this.fg(fc.Remove,this.rg);this.vg(n),this.rg=[]}},t.prototype.fg=function(t,n){return{command:t,cookies:n,domain:null,pid:this.M.projectId}},t.prototype.vg=function(t){var n="https://".concat(this.ug());this.og.contentWindow&&this.og.contentWindow.postMessage(t,n)},t.prototype.ug=function(){return this.M.dualCollectionTagDomain&&this.M.dualCollectionTagDomain!==lc?"cdnssl.".concat(this.M.dualCollectionTagDomain):"csxd.".concat(lc)},t.prototype.sg=function(){var t=this;this.am.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.$m.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.Zm.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.Qm.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.am.onCookieToRemove((function(n){t.removeCookie(n)})),this.$m.onCookieToRemove((function(n){t.removeCookie(n)})),this.Zm.onCookieToRemove((function(n){t.removeCookie(n)})),this.Qm.onCookieToRemove((function(n){t.removeCookie(n)}))},J([tr(),hn("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),wc=function(){function t(t,n){this.M=t,this.En=n}return t.prototype.init=function(t,n){this.lg="https://".concat(t),this.Rn=n},t.prototype.openIframe=function(){var t=this;this.En.onMessage((function(n){t.On(n)})),this.En.onTimeout((function(){t.kn()})),this.En.start();var n=this.dg(this.lg);return this.En.open(n)},t.prototype.On=function(t){if(this.In(t)){var n=t.data,i=!0;if(this.wg(t))return void nn.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!Mn.isRawDomainState(n))return void nn.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));Mn.isValid(n)||(nn.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this.En.stop(),this.Rn(i?xn.fromRaw(n):{},i)}},t.prototype.kn=function(){nn.warn("xdframe single domain: all messages not received")},t.prototype.In=function(t){return t.origin===this.lg&&Ot(t.data)},t.prototype.wg=function(t){return!!t.data.error},t.prototype.dg=function(t){var n=this.M.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.2.0",".html?pid=").concat(n)},t}(),yc=function(){function t(t,n,i){this.M=t,this.J=n,this.W=i}return t.prototype.getRequestParameters=function(){var t=G(G({},mt()),this.M.getRequestParameters()),n=this.W.getSession();n&&(t.pn="".concat(n.pageNumber));var i=this.J.getVisitor();return i&&(t.sn="".concat(i.visitsCount),t.uu="".concat(i.id)),t},t}(),pc=function(){function t(t,n){this.Zc=t,this.I=n}return t.prototype.init=function(){var t=this;this.Zc.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.I.updateDynamicFields("emitDebugEvents",n)}))},t}();function mc(t,n,i){if(!kt(n)&&!kt(i))return t.href;var r=kt(n)?function(t){return Z(t,"/")?t:"/".concat(t)}(n):t.pathname,s=kt(i)?function(t){return Z(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var gc=function(){function t(t,n){this.bn=t,this.Bc=n}return t.prototype.overridePath=function(t){kt(t)&&Tt(t)&&(this.yg=""===t?void 0:t)},t.prototype.overrideQuery=function(t){kt(t)&&Tt(t)&&(this.pg=t)},t.prototype.computeOverriddenUrl=function(t){return this.mg(t)?this.getAnonymizedUrl():t},t.prototype.mg=function(t){var n=this.gg(this.bn.href);return this.gg(t)===n},t.prototype.gg=function(t){return Q(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=mc(this.bn,this.yg,this.pg);return this.Bc.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.bn.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Ac=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Mh),Sc=function(){function t(t,n,i,r,s){this.configuration=t,this.Ag=n,this.Ei=i,this.$p=r,this.$=s,this.Sg=[]}return t.prototype.init=function(){this.Eg()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===pn.TEMPORARILY_RECORDED&&(t.recordingState=pn.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return Us.isReplayConsentNeeded(this.configuration)?pn.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Em(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.Em(t)},t.prototype.Em=function(t){return ms.isRecordingSupported()?(this.Sg=[],nt.percentage()<this.configuration.replayRecordingRate||this.$p.isForceReplayRecorded()?csArray.prototype.push.call(this.Sg,pn.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.Sg,pn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Sg,pn.ETR_SAMPLING),this.Sg.length>0?(this.bg(t),pn.TEMPORARILY_RECORDED):pn.NOT_RECORDED):pn.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return ms.isRecordingSupported()?Us.isRecordingBlockedByConsent(t)?t.recordingState===pn.BLOCKED_BY_CONSENT_WITHDRAWN?pn.BLOCKED_BY_CONSENT_WITHDRAWN:pn.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===pn.GLOBAL_SAMPLING?pn.GLOBAL_SAMPLING:(this.Sg=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.Sg,pn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Sg,pn.ETR_SAMPLING)),this.Sg.length>0?(this.bg(t),pn.TEMPORARILY_RECORDED):pn.NOT_RECORDED):pn.NOT_RECORDED},t.prototype.bg=function(t){var n,i=null===(n=this.J)||void 0===n?void 0:n.getVisitor();this.Ag.send({recordingTypes:csArray.prototype.map.call(this.Sg,Number),url:this.$.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.Ag.abort()},t.prototype.isReplayRecorded=function(t){return!Us.isRecordingBlockedByConsent(t)&&(t.recordingState===pn.TEMPORARILY_RECORDED||t.recordingState===pn.GLOBAL_SAMPLING||t.recordingState===pn.URL_SAMPLING||t.etrState===mn.ETR_ON)},t.prototype.Eg=function(){var t=this;this.Ag.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Ag.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.Ag.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},t.prototype.quotaServiceErrorHandler=function(t){this.Rg("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.Rg("timeout")},t.prototype.Rg=function(t){var n=pn.NOT_RECORDED;this.Ng(this.Sg)?(n=pn.GLOBAL_SAMPLING,nn.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):nn.warn("Quota Service: request ".concat(t)),this.Ei.emitRecordingStateChange(n,mn.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=mn.ETR_OFF,s=pn.NOT_RECORDED;this.Ng(i)?s=pn.GLOBAL_SAMPLING:this.Tg(i)&&(s=pn.URL_SAMPLING),this.Og(i)&&(r=mn.ETR_ON),this.Ei.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.Ng=function(t){return csArray.prototype.some.call(t,(function(t){return t===pn.GLOBAL_SAMPLING}))},t.prototype.Tg=function(t){return csArray.prototype.some.call(t,(function(t){return t===pn.URL_SAMPLING}))},t.prototype.Og=function(t){return csArray.prototype.some.call(t,(function(t){return t===pn.ETR_SAMPLING}))},t.prototype.setVisitorService=function(t){this.J=t},t.prototype.getDisabledRecordingState=function(){return pn.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return pn.BLOCKED_BY_CONSENT_WITHDRAWN},J([hn("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),J([hn("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),J([hn("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),Ec="|iframe|",bc=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.kg=n,e.Ig=i,e.Cg=r,e._g=s,e}return F(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.xg(n)&&null===t)nn.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Yt.ChildLogMessage:this.Pg(i);break;case Yt.AnalysisEvent:var r=this.kg.transformEvent(t,i);this.Mg(r);break;case Yt.RecordingEvent:var s=i,e=this._g.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Lg(e.events):this.Dg(e.events);break;case Yt.JavascriptError:this.Ug(i);break;case Yt.ApiError:this.jg(i);break;case Yt.DetailedApiError:this.Hg(i);break;case Yt.CustomError:this.qg(i);break;case Yt.EmerchandisingMessage:var u=this.Cg.transformEvent(t,i);this.zg(u);break;case Yt.Commands:var o=this.Ig.transformEvent(t,i);this.Bg(o);break;case Yt.IntegrationCallback:this.Vg(i);break;case Yt.StaticResource:this.Fg(i);break;case Yt.TrackingContextRequestMessage:this.Gg(i);break;default:nn.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.xg=function(t){var n=[Yt.AnalysisEvent,Yt.RecordingEvent,Yt.EmerchandisingMessage,Yt.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.Pg=function(t){var n=t.message,i=t.errorCode;switch(t.level){case rt.debug:nn.debug(n,i);break;case rt.warn:nn.warn(n,i);break;case rt.error:nn.error(n,i);break;case rt.critical:nn.critical(n,i)}},n.prototype.Mg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Lg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Dg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.Ug=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.jg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Hg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.zg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.Bg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Vg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.Fg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.Gg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.qg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&r.onIframeCustomError(t)}},n}(Mh);function Rc(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,s){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?f[t]:f[256+(t>>>7)]},S=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},E=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){E(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},N=function(t,n,i){var r,e,u=new Array(16),o=0;for(r=1;r<=s;r++)u[r]=o=o+i[r-1]<<1;for(e=0;e<=n;e++){var h=t[2*e+1];0!==h&&(t[2*e]=R(u[h]++,h))}},T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var s=2*n,e=2*i;return t[s]<t[e]||t[s]===t[e]&&r[n]<=r[i]},I=function(t,n,i){for(var r=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&k(n,t.heap[s+1],t.heap[s],t.depth)&&s++,!k(n,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},C=function(t,i,r){var s,o,h,c,a=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===s?b(t,o,i):(h=v[o],b(t,h+n+1,i),0!==(c=e[h])&&(o-=l[h],E(t,o,c)),s--,h=A(s),b(t,h,r),0!==(c=u[h])&&(s-=p[h],E(t,s,c)))}while(a<t.last_lit);b(t,256,i)},_=function(t,n){var i,r,e,u=n.dyn_tree,o=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[e]=0,t.opt_len--,h&&(t.static_len-=o[2*e+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)I(t,u,i);e=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*e]=u[2*i]+u[2*r],t.depth[e]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,e,u,o,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),h=c[2*r],t.opt_len+=h*(u+o),v&&(t.static_len+=h*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--i])>a||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,n),N(u,a,t.bl_count)},x=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)s=u,u=n[2*(r+1)+1],++o<h&&s===u||(o<c?t.bl_tree[2*s]+=o:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4))},P=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),r=0;r<=i;r++)if(s=u,u=n[2*(r+1)+1],!(++o<h&&s===u)){if(o<c)do{b(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),o--),b(t,16,t.bl_tree),E(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),E(t,o-3,3)):(b(t,18,t.bl_tree),E(t,o-11,7));o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4)}},M=!1,L=function(t,n,i,r){E(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(S(t,i),S(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){M||(!function(){var t,n,h,g,A,S=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<e[g];t++)v[h++]=g;for(v[h-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)f[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)f[256+A++]=g;for(n=0;n<=s;n++)S[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,S[8]++;for(;t<=255;)c[2*t+1]=9,t++,S[9]++;for(;t<=279;)c[2*t+1]=7,t++,S[7]++;for(;t<=287;)c[2*t+1]=8,t++,S[8]++;for(N(c,287,S),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(c,e,257,i,s),w=new m(a,u,0,r,s),y=new m(new Array(0),o,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,s){var e,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),o=function(t){var n;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==i?L(t,i,r,s):4===t.strategy||u===e?(E(t,2+(s?1:0),3),C(t,c,a)):(E(t,4+(s?1:0),3),function(t,n,i,r){var s;for(E(t,n-257,5),E(t,i-1,5),E(t,r-4,4),s=0;s<r;s++)E(t,t.bl_tree[2*h[s]+1],3);P(t,t.dyn_ltree,n-1),P(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),T(t),s&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},H=function(t){E(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},q={_tr_init:D,_tr_stored_block:L,_tr_flush_block:U,_tr_tally:j,_tr_align:H},z=function(t,n,i,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{e=e+(s=s+n[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},B=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),V=function(t,n,i,r){var s=B,e=r+i;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^n[u])];return-1^t},F={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,J=2,W=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=q._tr_init,nt=q._tr_stored_block,it=q._tr_flush_block,rt=q._tr_tally,st=q._tr_align,et=G,ut=1,ot=W,ht=K,ct=5,at=Y,ft=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,St=2,Et=Q,bt=258,Rt=262,Nt=103,Tt=113,Ot=666,kt=function(t,n){return t.msg=F[n],n},It=function(t){return(t<<1)-(t>4?9:0)},Ct=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},xt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Pt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,xt(t.strm)},Mt=function(t,n){t.pending_buf[t.pending++]=n},Lt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[e]&&c[++i]===c[e+1]){e+=2,i++;do{}while(c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=n,u=r,r>=o)break;l=c[e+u-1],d=c[e+u]}}}while((n=f[n&a])>h&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,s,e,u,o,h,c,a,f=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);s+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,h=t.strstart+t.lookahead,c=s,a=void 0,(a=u.avail_in)>c&&(a=c),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),h),1===u.state.wrap?u.adler=z(u.adler,o,a,h):2===u.state.wrap&&(u.adler=V(u.adler,o,a,h)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=_t(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(Pt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Pt(t,!1),0===t.strm.avail_out)?1:2},Ht=function(t,n){for(var i,r,s;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Pt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Pt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ht?(Pt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Pt(t,!1),0===t.strm.avail_out)?1:2};function qt(t,n,i,r,s){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=s}var zt=[new qt(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Pt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Pt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Pt(t,!1),t.strm.avail_out),1)})),new qt(4,4,8,4,jt),new qt(4,5,16,8,jt),new qt(4,6,32,32,jt),new qt(4,4,16,16,Ht),new qt(8,16,32,32,Ht),new qt(8,16,128,128,Ht),new qt(8,32,128,256,Ht),new qt(32,128,258,1024,Ht),new qt(32,258,258,4096,Ht)];function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Vt=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=St;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=et,tt(n),at},Ft=function(t){var n=Vt(t);return n===at&&function(t){t.window_size=2*t.w_size,Ct(t.head),t.max_lazy_match=zt[t.level].max_lazy,t.good_match=zt[t.level].good_length,t.nice_match=zt[t.level].nice_length,t.max_chain_length=zt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,s,e){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||i!==Et||r<8||r>15||n<0||n>9||e<0||e>gt)return kt(t,vt);8===r&&(r=9);var o=new Bt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=e,o.method=i,Ft(t)},Jt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?kt(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===Ot&&n!==ht)return kt(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=n,42===s.status)if(2===s.wrap)t.adler=0,Mt(s,31),Mt(s,139),Mt(s,8),s.gzhead?(Mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Mt(s,255&s.gzhead.time),Mt(s,s.gzhead.time>>8&255),Mt(s,s.gzhead.time>>16&255),Mt(s,s.gzhead.time>>24&255),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Mt(s,255&s.gzhead.extra.length),Mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=V(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,3),s.status=Tt);else{var u=Et+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Tt,Lt(s,u),0!==s.strstart&&(Lt(s,t.adler>>>16),Lt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),xt(t),i=s.pending,s.pending!==s.pending_buf_size));)Mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),xt(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),xt(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.status=Nt)}else s.status=Nt;if(s.status===Nt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&xt(t),s.pending+2<=s.pending_buf_size&&(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),t.adler=0,s.status=Tt)):s.status=Tt),0!==s.pending){if(xt(t),0===t.avail_out)return s.last_flush=-1,at}else if(0===t.avail_in&&It(n)<=It(e)&&n!==ht)return kt(t,dt);if(s.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==s.lookahead||n!==et&&s.status!==Ot){var o=s.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===et)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Pt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Pt(t,!1),0===t.strm.avail_out)?1:2}(s,n):s.strategy===mt?function(t,n){for(var i,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Pt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Pt(t,!1),0===t.strm.avail_out)?1:2}(s,n):zt[s.level].func(s,n);if(3!==o&&4!==o||(s.status=Ot),1===o||3===o)return 0===t.avail_out&&(s.last_flush=-1),at;if(2===o&&(n===ut?st(s):n!==ct&&(nt(s,0,0,!1),n===ot&&(Ct(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),xt(t),0===t.avail_out))return s.last_flush=-1,at}return n!==ht?at:s.wrap<=0?ft:(2===s.wrap?(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),Mt(s,t.adler>>16&255),Mt(s,t.adler>>24&255),Mt(s,255&t.total_in),Mt(s,t.total_in>>8&255),Mt(s,t.total_in>>16&255),Mt(s,t.total_in>>24&255)):(Lt(s,t.adler>>>16),Lt(s,65535&t.adler)),xt(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?at:ft)},Wt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=z(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===s&&(Ct(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(n.subarray(i-r.w_size,i),0),n=e,i=r.w_size}var u=t.avail_in,o=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=u,r.wrap=s,at},Kt={deflateInit:function(t,n){return Gt(t,n,Et,15,8,At)},deflateInit2:Gt,deflateReset:Ft,deflateResetKeep:Vt,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Jt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?kt(t,vt):(t.state=null,n===Tt?kt(t,lt):at)},deflateSetDictionary:Wt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Xt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Yt(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var s=new Uint8Array(n),e=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];s.set(u,e),e+=u.length}return s}},$t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){$t=!1}for(var Zt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Zt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Zt[254]=Zt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&$t)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,s,e,u=t.length,o=0;for(s=0;s<u;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),e=0,s=0;e<o;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?n[e++]=i:i<2048?(n[e++]=192|i>>>6,n[e++]=128|63&i):i<65536?(n[e++]=224|i>>>12,n[e++]=128|i>>>6&63,n[e++]=128|63&i):(n[e++]=240|i>>>18,n[e++]=128|i>>>12&63,n[e++]=128|i>>>6&63,n[e++]=128|63&i);return n},buf2string:function(t,n){var i,r,s=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var e=new Array(2*s);for(r=0,i=0;i<s;){var u=t[i++];if(u<128)e[r++]=u;else{var o=Zt[u];if(o>4)e[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<s;)u=u<<6|63&t[i++],o--;o>1?e[r++]=65533:u<65536?e[r++]=u:(u-=65536,e[r++]=55296|u>>10&1023,e[r++]=56320|1023&u)}}}return tn(e,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Zt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},sn=Object.prototype.toString,en=G,un=J,on=W,hn=K,cn=Y,an=X,fn=$,vn=Z,ln=Q;function dn(t){this.options=Xt.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Kt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==cn)throw new Error(F[i]);if(n.header&&Kt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===sn.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Kt.deflateSetDictionary(this.strm,r))!==cn)throw new Error(F[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||F[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?hn:en,"string"==typeof t?s.input=nn.string2buf(t):"[object ArrayBuffer]"===sn.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===un||r===on)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((i=Kt.deflate(s,r))===an)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),i=Kt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cn;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===cn&&(this.result=Xt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}var Nc=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=ln.GZIP,i.Jg=Rc(),i.Wg=function(t,n,r){r(i.Jg(t,n))},i.compress=Tc(),"undefined"!=typeof CompressionStream&&di||(i.compress=i.Wg,i.getCompressorSourceCode=function(){return Rc.toString()}),i}return F(n,t),n.prototype.compressSync=function(t,n){return this.Jg(t,n)},n.prototype.getCompressorSourceCode=function(){return Tc.toString()},n}(An);function Tc(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),s=new Response(r).arrayBuffer();"base64"!==n?s.then((function(t){return i(t)})):s.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var Oc,kc,Ic=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=ln.UNCOMPRESSED,n}return F(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(An),Cc=function(){function t(){}return t.create=function(t){return this.instance?this.instance:Ir.isCompressionEnabled()?this.instance=new Nc(t):new Ic(t)},t}(),_c=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),xc=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),Pc=["visit",2],Mc=["page",3],Lc=["nextPageOnly",4],Dc=function(){function t(t,n){this.L=t,this.tm=n,this.Kg={},this.Yg={}}return t.prototype.set=function(t,n,i,r){var s,e;if(t>0&&It(n)&&It(i)&&!Ct(n)&&!Ct(i)){var u=this.L.anonymizeEmail(csString(n)),o=this.L.anonymizeEmail(csString(i));if(s=[u.slice(0,512),o.slice(0,255)],e=""!==i,!kt(r)||csArray.prototype.indexOf.call(Pc,r)>=0){var h=this.getCustomVariablesSession();e?h[t]=s:delete h[t],this.setCustomVariableSession(h)}(!kt(r)||csArray.prototype.indexOf.call(Mc,r)>=0)&&(e?this.Kg[t]=s:delete this.Kg[t]),kt(r)&&csArray.prototype.indexOf.call(Lc,r)>=0&&(e?this.Yg[t]=s:delete this.Yg[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.tm.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&Ot(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.tm.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.tm.remove()},t.prototype.removeCustomVariablesPage=function(){this.Kg={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.Yg)this.Yg.hasOwnProperty(n)&&(this.Kg[n]=this.Yg[n]);for(var n in this.Kg)this.Kg.hasOwnProperty(n)&&(t[n]=this.Kg[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Xg(t)};return this.Kg&&window.csJSON.stringify(this.Kg).length>2&&(i.cvarp=this.Xg(this.Kg)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.Yg).length>0)for(var t in this.Yg)this.Yg[t]===this.Kg[t]&&(delete this.Kg[t],delete this.Yg[t])},t.prototype.Xg=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],s=r[0],e=r[1];o=1,h=20,(!(Nt(u=i)&&u>=o&&u<=h)||s.length>512||e.length>255)&&delete t[n]}var u,o,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),Uc=["setCustomVariable"],jc=function(){function t(t,n){this.Zc=t,this.en=n}return t.prototype.init=function(){var t=this;this.Zc.register(Uc,(function(n,i,r,s){t.en.set(n,i,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.en.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.en.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.en.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.en.removeCustomVariablesSession(),this.en.removeCustomVariablesPage()},t}(),Hc=function(){function t(t){this.L=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,s=csString.prototype.split.call(n,"/");r<s.length;r++){var e=s[r];Z(e,t.$g)?csArray.prototype.push.call(i,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(i,{key:e,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.L.anonymizeEmail(t);return i=this.L.anonymizeJwt(i),n.length>0?this.Zg(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Qg(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Qg=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Zg=function(t,n){for(var i=this.Qg(t),r=i.path,s=i.queryString,e=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var h=o[u],c=this.tA(e,h);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.tA=function(n,i){if(n.length<i.length)return null;for(var r="",s=0;s<n.length;s+=1)if(s>=i.length)r+="".concat(n[s],"/");else if(Z(i[s].key,t.$g))r+="".concat(i[s].value,"/");else{if(n[s]!==i[s].key)return null;r+="".concat(n[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.$g=":",t}(),qc=function(){function t(t,n){this.Ya=t,this.M=n}return t.prototype.getEventTargetPath=function(t){var n=fi(t);return this.Ya.getElementPath(n,G({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=fi(t),i=this.Ya.getElementPathAndFirstAnchorParent(n,G({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules)),r=i.path,s=i.firstAnchorParent;return{path:r,targetLink:this.nA(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var n=fi(t);return this.Ya.isValidElement(n)},t.prototype.getElementPath=function(t){return this.Ya.getElementPath(t,G({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules))},t.prototype.nA=function(t){var n;return null!==t&&t.hasAttribute("href")&&!Z(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),zc=function(){function t(t){this.Zf=t}return t.prototype.transformEvent=function(t,n){var i=this.iA(t,n),r=this.Zf.getElementPath(t);return this.rA(r,i)},t.prototype.iA=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+bi.windowOffsetX()),n.y=Math.round(i.top+n.y+bi.windowOffsetY())}return n},t.prototype.rA=function(t,n){return Ne(n)&&(n.tgt="".concat(t).concat(Ec).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(Ec).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(Ec).concat(n.tgtLk)),n},t}(),Bc=function(){function t(t){this.Zf=t}return t.prototype.transformEvent=function(t,n){var i=this.Zf.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(Ec).concat(n.iframePath):i,commands:n.commands}},t}(),Vc=function(){function t(t){this.Zf=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Zf.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return G(G({},t),{targetPath:"".concat(i).concat(Ec).concat(t.targetPath)})}));return G(G({},n),{products:r})},t}(),Fc=function(){function t(t){this.Un=t,this.sA={clientX:2,clientY:3},this.eA={clientX:1,clientY:2},this.uA=[zn.POINTER_DOWN,zn.POINTER_MOVE,zn.POINTER_UP],this.oA=[zn.TOUCH_START,zn.TOUCH_MOVE,zn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!Ri.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==zn.VISIBILITY_CHANGE})),0===n.events.length||(nn.warn("IframeRecordingEventsTransformer received event ".concat(Yt.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.Un.getId(t);if(void 0===r)return nn.error("IframeRecordingEventsTransformer received event ".concat(Yt.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var s=null;csArray.prototype.some.call(n.events,(function(t){return i.hA(t)||i.cA(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=n.events;e<u.length;e++){var o=u[e];this.hA(o)?this.aA(s,o):this.cA(o)&&this.fA(s,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.fA=function(t,n){this.vA(this.eA,t,n)},t.prototype.aA=function(t,n){this.vA(this.sA,t,n)},t.prototype.vA=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.hA=function(t){return-1!==csArray.prototype.indexOf.call(this.uA,t.type)},t.prototype.cA=function(t){return-1!==csArray.prototype.indexOf.call(this.oA,t.type)},t}(),Gc=function(){function t(t){this.lA=t}return t.prototype.start=function(){var t=this;this.lA.onEvent((function(n){return t.Pr(n)})),this.lA.start()},t.prototype.stop=function(){this.lA.stop()},t.prototype.Pr=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);nn.warn(n)},t}(),Jc=function(){function t(){var t=this;this.Sv={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){Wn(this.Sv)},t.prototype.stop=function(){Kn(this.Sv)},t.prototype.onEvent=function(t){this.Ti=t},t.prototype.dA=function(n){if(!n)return!1;var i=n.disposition;return Tt(n.sourceFile)&&csArray.prototype.some.call(t.wA,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.dA(t)&&this.Ti({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.wA=["contentsquare","cdnssl.clicktale.net"],J([hn("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),Wc=function(){function t(){}return t.prototype.init=function(){this.yA=new Gc(new Jc),this.yA.start()},t.prototype.onOptout=function(){this.yA.stop()},t}(),Kc=function(){function t(t,n,i,r){this.M=t,this.Z=n,this.D=i,this.ce=r}return t.prototype.init=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R,N,T,O,k,I,C,_,x,P,M=this;this.ce.schedule((function(){t=new Lh(M.ce),n=new wt,i=new Hc(n),s=new gc(window.location,i),(r=new cn(M.M,s,M.Z)).init()})),this.ce.schedule((function(){e=new _c,u=new xc,m=new tc(window.location,r),(new Wc).init(),g=Cc.create(nn.warn);var n=(p=new En(g)).create("".concat(M.M.getQuotaServiceUri(),"/quota"),!0);(a=new Sc(M.M,n,t,m,s)).init()})),this.ce.schedule((function(){o=new Pn(M.M,r,e),c=new _h(o,a)})),this.ce.schedule((function(){f=new Tn(M.M,r,e),v=new Ih(M.M,f,c,t),M.D.setContext(v,c),a.setVisitorService(v)})),this.ce.schedule((function(){l=new Ph(v,c),d=new jn(M.M,r,e),w=new Wh(window.location,d),y=new Kh(w),S=new xh(M.M,v,w);var t=new Cr;x=new qc(H,M.M),O=new zc(x),k=new Bc(x),I=new Vc(x),C=new Fc(t),_=new bc(O,k,I,C),T=new vc([ac.UXA]),E=new cc(T,_),b=new Xh(s),R=new Zh(b,T);var i=new qn(M.M,r,e);P=new Dc(n,i),N=new jc(T,P);var u=new bn(v,c,w,P,M.M),a=new Jn,p=new Gn(a,window.location);M.M.crossDomainSingleIframeTracking||(A=new hc(M.M,u,p)),(h=new dc(M.M,r,o,f,d,i)).init();var m=new wc(M.M,a);h.setStates(u,m)})),this.ce.schedule((function(){new Oh(M.M,v,w,S,l,A,h,m).compute((function(e){M.ce.schedule((function(){E.init();var o=new Ac,h=new jh(M.M,r,u),a=new Gh(M.M,h,t),f=new Fh(M.M,T,a,c,t),l=new ic(M.M,r,u),d=new rc(t,window.location,l),w=new uc(T,d),m=new pc(T,M.M),A=new yc(M.M,v,c);e?(t.emitInitTracking(),new Th(A,g,v,c,t,T,E,M.M,w,d,f,a,n,x,i,s,m,o,_,P,N,b,R,M.ce,p).start()):new Jh(t,T,E,w,d,y,f).start()}))}))}))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var o=t.source,h=t.data;if(e(h)){var f=function(){var n,i,r,e=s("{domain}/tag/tag.bundle.js?v={version}",h);n=e,i=function(){return o.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),u(t.origin)?f():function(t,n){var r=s(i,t),e=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(a(u),e.remove(),n())};c(u),document.head.appendChild(e)}(h,f)}}};function s(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&h(t.version)&&o(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function o(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=o,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(Oc||(Oc={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(n=t.origin,h(s.ping),o(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(s.insertMessageScript),u(n))}))};function e(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Oc.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){o(s.ping),Oc.waitForBundleInjection()},t.listen=o,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(kc||(kc={}));var Yc,Xc=window.CSFrameCommunication||kc,$c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.emitTrackingContextResultMessage=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextResultCallback&&r.onTrackingContextResultCallback(t)}},n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n}(Mh),Zc=["trackTransaction"],Qc=function(){function t(t){this.pA=t}return t.prototype.init=function(){this.pA.register(ve),this.pA.register(Uc),this.pA.register(no),this.pA.register(io),this.pA.register(to),this.pA.register(ge),this.pA.register(Ae),this.pA.register(Se),this.pA.register(Ee),this.pA.register(Zc),this.pA.register(ao),this.pA.register(fo),this.pA.register(sc),this.pA.register(ec),this.pA.register(lo),this.pA.register(Lo),this.pA.register(Do),this.pA.register(Js),this.pA.register(qh),this.pA.register(zh),this.pA.register(Bh),this.pA.register(Vh)},t.prototype.onStartTracking=function(){this.pA.start()},t.prototype.onOptout=function(){this.pA.stop()},t}(),ta=function(t){function n(n,i){var r=t.call(this)||this;return r.Zc=n,r.mA=i,r.Ma=[],r}return F(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.Ma=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.Zc.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,s=0,e=t;s<e.length;s++){i(e[s])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.Ma,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.Ma.length){var t={commands:this.Ma};this.mA.sendToParent(Yt.Commands,t),this.Ma=[]}},J([hn("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),J([tr(),hn("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(Ci),na=function(){function t(t){void 0===t&&(t=25),this.gA=t,this.AA=[]}return t.prototype.reset=function(){this.AA=[]},t.prototype.getMessages=function(){return this.AA},t.prototype.addMessage=function(t){this.AA.length<this.gA?csArray.prototype.push.call(this.AA,t):this.AA.length===this.gA&&(this.SA(t),csArray.prototype.push.call(this.AA,t))},t.prototype.SA=function(t){t.type=Yt.ChildLogMessage,t.content={message:"Buffer is full, events might be missing.",errorCode:"",level:rt.warn}},t}(),ia=function(t){function n(n){var i=t.call(this)||this;return i.buffer=new na(n),i}return F(n,t),n}(Ci),ra=function(t){function n(n,i,r,s){var e=t.call(this,25)||this;return e.M=n,e.Ei=i,e.EA=r,e.bA=s,e.RA=null,e.NA={boundElement:window,type:"message",listener:function(t){return e.gw(t)}},e}return F(n,t),n.prototype.onStart=function(){Wn(this.NA,!1),this.TA()},n.prototype.onStop=function(){Kn(this.NA,!1),this.RA&&(Xt.closeChannelPort(this.RA),this.RA=null)},n.prototype.sendToParent=function(t,n){var i=this.buildChildBaseMessage(t,n);this.vg(i)},n.prototype.TA=function(){var t=this.buildChildBaseMessage(Yt.Discovery);Xt.sendPostMessage(window.parent,"*",t)},n.prototype.buildChildBaseMessage=function(t,n){var i=Xt.buildBaseMessage(t,Kt.Child,this.M.projectId);return n&&(i.content=n),i},n.prototype.vg=function(t){null!==this.RA?Xt.sendChannelMessage(this.RA,t):this.buffer.addMessage(t)},n.prototype.OA=function(t,n){var i=this,r=Xt.getNewChannelMessage();this.RA=r.port1,this.RA.onmessage=function(t){i.Dw(t)};var s=this.buildChildBaseMessage(Yt.Discovery);s.id=n,Xt.sendPostMessage(window.parent,t,s,[r.port2]),this.sendAllMessagesFromBuffer()},n.prototype.Dw=function(t){switch(t.data.type){case Yt.TrackingContextResultMessage:this.bA.emitTrackingContextResultMessage(t.data.content);break;case Yt.IntegrationCallback:var n=t.data.content;n.initiator===Wt.AfterPageView?this.bA.emitAfterPageViewCallback(n):n.initiator===Wt.GetSessionKey?this.bA.emitIntegrationSessionKeyCallback(n):nn.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case Yt.Stop:this.Ei.emitOptout();break;case Yt.RecordingStatus:var i=t.data.content;this.EA.setRecordingStatus(i),this.bA.emitParentRecordingStatusChange(i);break;default:nn.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.gw=function(t){if(null===this.RA&&Xt.isMessageValid(t,Kt.Parent,this.M.projectId,this.M.hostnames))switch(t.data.type){case Yt.Stop:this.Ei.emitOptout();break;case Yt.Discovery:if(!Nt(t.data.id)||t.data.id<0)return void nn.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.OA(t.origin,t.data.id);break;default:nn.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.sendAllMessagesFromBuffer=function(){if(null!==this.RA){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];Xt.sendChannelMessage(this.RA,i)}this.kA(),this.buffer.reset()}},n.prototype.kA=function(){var t=Xt.buildBaseMessage(Yt.EndOfBufferedMessages,Kt.Child,this.M.projectId);Xt.sendChannelMessage(this.RA,t)},n}(ia),sa=function(){function t(t){this.mA=t}return t.prototype.onStartTracking=function(){this.mA.start()},t.prototype.onOptout=function(){this.mA.stop()},t}(),ea=function(){function t(t,n,i,r){this.Oa=t,this.ka=n,this.mA=i,this.EA=r}return t.prototype.init=function(){var t=this;this.Oa.onChildMessage((function(n,i,r){return t.ka.emitIframeEvent(n,i,r)})),this.Oa.setRecordingStatusCallback((function(){return t.EA.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Oa.start()},t.prototype.onOptout=function(){this.Oa.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.mA.sendToParent(Yt.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.mA.sendToParent(Yt.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.mA.sendToParent(Yt.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.mA.sendToParent(Yt.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.mA.sendToParent(Yt.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.mA.sendToParent(Yt.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.mA.sendToParent(Yt.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.mA.sendToParent(Yt.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.mA.sendToParent(Yt.IntegrationCallback,t)},t.prototype.onTrackingContextRequestCallback=function(t){this.mA.sendToParent(Yt.TrackingContextRequestMessage,t)},t.prototype.onIframeStaticResource=function(t){this.mA.sendToParent(Yt.StaticResource,t)},t.prototype.onIframeCustomError=function(t){this.mA.sendToParent(Yt.CustomError,t)},t.prototype.onTrackingContextResultCallback=function(t){this.Oa.sendToChildren(Yt.TrackingContextResultMessage,t)},t.prototype.onAfterPageViewCallback=function(t){this.Oa.sendToChildren(Yt.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Oa.sendToChildren(Yt.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Oa.sendToChildren(Yt.RecordingStatus,t)},t}(),ua=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.Jf=n,u.gu=i,u.mA=r,u.iv=s,u.rv=e,u}return F(n,t),n.prototype.init=function(){var t,n,i=this;this.Jf.onEvent((function(t){return i.Pr(t)})),this.gu.onEvent((function(t){return i.Pr(t)})),null===(t=this.iv)||void 0===t||t.onEvent((function(t){return i.Pr(t)})),null===(n=this.rv)||void 0===n||n.onEvent((function(t){return i.Pr(t)}))},n.prototype.onStart=function(){var t,n;this.Jf.start(),this.gu.start(),null===(t=this.iv)||void 0===t||t.start(),null===(n=this.rv)||void 0===n||n.start()},n.prototype.onStop=function(){var t,n;this.Jf.stop(),this.gu.stop(),null===(t=this.iv)||void 0===t||t.stop(),null===(n=this.rv)||void 0===n||n.stop()},n.prototype.Pr=function(t){this.isStarted&&t.type!==te.RESIZE&&this.mA.sendToParent(Yt.AnalysisEvent,t)},n}(Ci),oa=function(){function t(t,n,i,r,s){this.M=t,this.Zf=n,this.Dn=i,this.mA=r,this.lt=s}return t.prototype.init=function(){var t,n;this.M.accessibilityEnabled&&(t=new Vu,n=new Fu);var i=new De(this.M,this.Zf,this.Dn),r=this.lt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},s=new _e(this.M,this.Zf,new Zo(nn),r);this.IA=new ua(i,s,this.mA,t,n),this.IA.init()},t.prototype.onStartTracking=function(){this.IA.start()},t.prototype.onOptout=function(){this.IA.stop()},t}(),ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n}(go),ca=function(){function t(t,n,i){this.$=t,this.CA=n,this.mA=i,this.Vl=[]}return t.prototype.collect=function(){var t=this;this.CA.collectProductsAndAnchors(document,(function(n){var i=n.products;t.Vl=i,t._A=t.$.getAnonymizedUrl(),t.xA()}))},t.prototype.clearProducts=function(){this.Vl=[]},t.prototype.xA=function(){var t={targetUrl:this._A,windowWidth:bi.windowWidth(),windowHeight:bi.windowHeight(),products:this.Vl};this.mA.sendToParent(Yt.EmerchandisingMessage,t)},t}(),aa=function(){function t(t,n,i,r){this.M=t,this.Zf=n,this.$=i,this.mA=r}return t.prototype.init=function(){var t=new ha(this.M,this.Zf);this.PA=new ca(this.$,t,this.mA)},t.prototype.onStartTracking=function(){this.PA.clearProducts(),this.PA.collect()},t.prototype.onAfterPageViewCallback=function(){this.PA.clearProducts(),this.PA.collect()},t}(),fa=function(t){function n(n,i,r,s,e,u,o,h,c,a,f,v,l,d,w){var y=t.call(this)||this;return y.M=n,y.Vi=i,y.Fi=r,y.Gi=s,y.Ji=e,y.Wi=u,y.Ki=o,y.Si=h,y.Xi=c,y.Hn=a,y.nr=f,y.mA=v,y.ur=l,y.hr=d,y.er=w,y.MA=!1,y.yr=new Ii,y.pr=!1,y.qi=[],y.LA=!1,y.Ar=function(t){return y.ev(t)},y.Sr=function(t){return y.Er(t)},y}return F(n,t),n.prototype.init=function(){this.kr()},n.prototype.kr=function(){var t,n,i=this;Ai(this.hr,(function(t){return t.onEvent(i.Ar)})),this.Fi.onEvent(this.Ar),this.Gi.onEvent(this.Ar),this.Ji.onEvent(this.Sr),this.Wi.onEvent(this.Ar),this.Ki.onEvent(this.Sr),this.Si.onEvent(this.Ar),this.Xi.onEvent(this.Ar),null===(t=this.Hn)||void 0===t||t.onTextNodeToEncrypt(this.Ar),this.nr.onEvent(this.Ar),null===(n=this.ur)||void 0===n||n.onResourceHash(this.Ar),this.er.onEvent(this.Ar)},n.prototype.blockSendingEventsFromSerialization=function(){this.pr=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.pr=!0},n.prototype.activateOnlineAssetsOnNextStart=function(){this.MA=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.ur?{supported:this.ur.isSupported(),onlineAssets:{activated:this.ur.isOnlineAssetsActivated(),enableOnNextStart:this.MA}}:null},n.prototype.ev=function(t){this.DA(t),this.UA()},n.prototype.Er=function(t){this.jA(t),this.UA()},n.prototype.jA=function(t){csArray.prototype.push.call(this.qi,t),this.LA=!0},n.prototype.DA=function(t){csArray.prototype.push.call(this.qi,t)},n.prototype.UA=function(){if(this.pr){var t={containsUserEvent:this.LA,events:this.qi};this.mA.sendToParent(Yt.RecordingEvent,t),this.qi=[],this.LA=!1}},n.prototype.onStart=function(){var t;this.ur&&this.MA&&(this.ur.enableOnlineAssets(),this.MA=!1),Ai(this.hr,(function(t){return t.start()})),this.Vi.start(),this.Fi.start(),this.Gi.start(),this.Wi.start(),this.Ki.start(),this.Xi.start(),this.nr.start(),null===(t=this.ur)||void 0===t||t.start(),this.er.start(),this.M.emitDebugEvents&&this.yr.emit("replayRecordingStarted")},n.prototype.onStop=function(){var t;Ai(this.hr,(function(t){return t.stop()})),this.Vi.stop(),this.Fi.stop(),this.Gi.stop(),this.Ji.stop(),this.Wi.stop(),this.Ki.stop(),this.nr.stop(),null===(t=this.ur)||void 0===t||t.stop(),this.er.stop()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.qi.length;n+=1){if(this.qi[n].date>t.date)return csArray.prototype.splice.call(this.qi,n,0,t),this.LA=!0,void this.UA()}this.jA(t),this.UA()},n}(Ci),va=function(){function t(t){this.M=t}return t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.M.consentRequired},t}(),la=function(){function t(){this.HA=null}return t.prototype.getRecordingStatus=function(){return null===this.HA?{isRecording:!1}:this.HA},t.prototype.setRecordingStatus=function(t){this.HA=t},t}(),da=function(){function t(){}return t.isWebViewLocalAssetsSupported=function(){return"URL"in window},t}(),wa=function(){function t(t,n,i,r,s,e,u,o){this.M=t,this.L=n,this.jn=i,this.ea=r,this.bA=s,this.Si=e,this.mA=u,this.qA=o}return t.prototype.init=function(){var t=this,n=new Hc(this.L),i=new gc(window.location,n),r=new va(this.M),s=new _s;if(this.js=new ps(r,this.M,i,s),this.js.init(),this.zA=new la,this.zA.setRecordingStatus({isRecording:!0,isMutationTrackerStarted:!0,PIISelectors:this.jn.getPIISelectors(),capturedElementSelector:this.ea.getWhitelistedElementsSelector(),useAnonymization:this.js.shouldUseAnonymization()}),da.isWebViewLocalAssetsSupported()){var e=function(n){t.BA(n)},u=function(t){return nn.error("An error occurred while fetching a styleSheet: "+t)},o=new Set,h=function(t){return!o.has(t)},c=function(n){o.add(n.assetId),t.BA([n])};this.Si.onAsset((function(n){t.VA(n)})),this.Si.onStyleSheetFound((function(n){t.qA.getStyleSheetAssets(n.assetId,e,u,h,c)}))}},t.prototype.onStartTracking=function(){this.bA.emitParentRecordingStatusChange(this.zA.getRecordingStatus())},t.prototype.VA=function(t){this.mA.sendToParent(Yt.Assets,{assets:[t]})},t.prototype.BA=function(t){0!==t.length&&this.mA.sendToParent(Yt.Assets,{assets:t})},t}(),ya=function(){function t(t){this.FA=t}return t.prototype.getStyleSheetAssets=function(t,n,i,r,s){var e=this,u=[];if(cr(t)){this.FA.getResourceContentText(t,(function(t,o){var h=e.GA(t,o);csArray.prototype.forEach.call(h,(function(t){csArray.prototype.push.call(u,t),cr(t.assetId)&&r(t.assetId)&&(null==s||s(t),e.getStyleSheetAssets(t.assetId,n,i,r,s))})),n(u)}),(function(t){return i(t)}))}},t.prototype.GA=function(t,n){return this.JA(t,ur(n))},t.prototype.JA=function(t,n){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(n,(function(t){return!or(t)})),(function(t){return!hr(t)})),(function(n){return{assetId:Bt(n,t),assetBasePath:t,assetRawPath:n}}))},t}(),pa=function(){function t(){}return t.prototype.getResourceContentText=function(t,n,i){var r=this.WA((function(i){n(t,i.responseText)}),i);r.open("GET",t),r.send()},t.prototype.WA=function(t,n){var i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?t(i):n(i.statusText))},i},t}(),ma=function(t){function n(n,i){var r=t.call(this)||this;return r.ur=n,r.mA=i,r}return F(n,t),n.prototype.onStart=function(){this.ur.start()},n.prototype.onStop=function(){this.ur.stop()},n.prototype.init=function(){var t=this;this.ur.isStaticResourceManagerSupported()&&this.ur.sendStaticResource((function(n){return t.mA.sendToParent(Yt.StaticResource,n)}))},n}(Ci),ga=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l){this.M=t,this.fc=n,this.Dn=i,this.L=r,this.Un=s,this.jn=e,this.gu=u,this.Ei=o,this.mA=h,this.EA=c,this.Zc=a,this.bA=f,this.lt=v,this.ce=l}return t.prototype.init=function(){var t=this,n=new Gi(this.jn);this.ea=new $i(this.L,this.M),this.ea.init();var i=new lr,r=new yr(this.ce,this.Un),s=[],e=[new ds,n,this.ea,i];if(this.sc=new Fr(window.crypto),this.rc=new Jr(window.crypto),this.rc.init(),this.sc.init(),this.fu()){var u=new Lr,o=new Lr,h=new Lr,c=new Lr,a=new Lr;this.Hn=new js(this.Un,this.M,this.rc,this.sc,u,o,h,a,c,this.fc),this.Hn.init();var f=new Mr(this.Hn);csArray.prototype.push.call(e,f),this.Zc.register(Fs,(function(n){t.Hn.setEncryptionSelectors(n)}))}if(!this.lt.isInWebViewContext()&&this.M.useStaticResourceManager){var v=new Wr(window.crypto);if(v.init(),this.ur=new Ps(v),this.ur.init(),this.ur.isStaticResourceManagerSupported()){var l=new Is(this.ur,this.jn);csArray.prototype.push.call(e,l),this.KA=new ma(this.ur,this.mA),this.KA.init()}}if(this.M.textVisibilityEnabled&&xr.isSupported()){var d=new xr(this.jn,1e3);csArray.prototype.push.call(e,d),csArray.prototype.push.call(s,d)}var w=new ls;w.isSupported()&&csArray.prototype.push.call(e,w.getProcessor());var y,p=new gs,m=new ws(this.Un,p);if(m.init(),m.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(e,m),this.ua()){var g=new es(this.Un);y=new fs(e,this.Un,g)}else y=new vs(e);if(this.gi=new Li(y,this.Un,this.ea,this.Hn),this.Ji=new yi(this.Dn,this.Un,this.jn,this.Hn),this.Ji.init(),this.Gi=new Ni(this.gi,r,i,this.Ei,this.Un,this.jn),this.YA=new fa(this.M,p,new Vi(this.Un,this.jn,i,p),this.Gi,this.Ji,new ir(window.location,this.L),new Kr(this.gu,this.Un,this.jn),i,new dr(window),this.Hn,w,this.mA,this.ur,s,m),this.Zc.register(Gs,(function(){return t.EA.getRecordingStatus().isRecording})),this.Zc.register(Bs,(function(n){t.ea.setWhitelistedElementsSelector(n)})),this.Zc.register(Vs,(function(n){t.jn.setPIISelectors(n)})),this.Zc.register(Ws,(function(){return t.YA.getStaticResourceManagerStatus()})),r.init(),this.YA.init(),this.lt.isInWebViewContext()){var A=new ya(new pa),S=new wa(this.M,this.L,this.jn,this.ea,this.bA,i,this.mA,A);this.Ei.addListener(S),S.init()}},t.prototype.onParentRecordingStatusChange=function(t){var n,i;t.PIISelectors&&this.jn.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.ea.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.gi.setAnonymization(t.useAnonymization),t.encryptionSelectors&&this.Hn.setEncryptionSelectors(t.encryptionSelectors),t.activateOnlineAssetsOnNextStart&&this.YA.activateOnlineAssetsOnNextStart(),t.isRecording?(this.YA.start(),null===(n=this.KA)||void 0===n||n.start()):(this.YA.stop(),null===(i=this.KA)||void 0===i||i.stop()),t.isMutationTrackerStarted?this.Gi.start():this.Gi.stop()},t.prototype.onArtificialPageViewEnd=function(){this.Gi.stop()},t.prototype.onAfterArtificialPageView=function(){this.Gi.start()},t.prototype.onInitialDomStart=function(){this.YA.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.Ji.start(),this.YA.allowSendingEventsFromSerialization(),this.YA.addInitialDom(t)},t.prototype.ua=function(){return ms.isAsyncSerializationSupported()&&this.M.asyncSerializerEnabled},t.prototype.fu=function(){return!!this.M.encryptionPublicKey&&this.M.encryptionPublicKeyId>0&&this.rc.isSupported()&&this.sc.isSupported()},t.prototype.onOptout=function(){this.YA.stop()},t}(),Aa=function(){function t(t,n){this.XA=t,this.$A=n}return t.prototype.init=function(){var t=this;this.XA.onWebViewEvent((function(n,i){t.$A.emitWebviewEventToBridge(n,i)}))},t.prototype.onStartTracking=function(){this.XA.start()},t.prototype.onOptout=function(){this.XA.stop()},t}();!function(t){t[t.PAGE_VIEW=4]="PAGE_VIEW",t[t.TAP=6]="TAP",t[t.LONG_PRESS=8]="LONG_PRESS",t[t.DRAG=9]="DRAG",t[t.FLICK=10]="FLICK",t[t.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",t[t.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",t[t.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",t[t.API_ERROR=21]="API_ERROR",t[t.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",t[t.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(Yc||(Yc={}));var Sa,Ea=function(){function t(){this.ZA=1}return t.prototype.transformEvent=function(t){switch(t.type){case te.TAP:return{version:this.ZA,type:Yc.TAP,data:{path:t.tgt}};case te.DRAG:var n=t;return{version:this.ZA,type:Yc.DRAG,data:{path:n.tgt,direction:n.fd,distance:n.distance,velocity:n.velocity}};case te.FLICK:var i=t;return{version:this.ZA,type:Yc.FLICK,data:{path:i.tgt,direction:i.fd,distance:i.distance,velocity:i.velocity}};default:return null}},t}(),ba=function(){function t(t,n,i,r){this.$=t,this.Zi=n,this.tr=i,this.L=r,this.ZA=1}return t.prototype.transformEvent=function(t,n){switch(t){case Yt.ApiError:case Yt.DetailedApiError:var i=this.tr.anonymize(n);return{version:this.ZA,data:i};case Yt.JavascriptError:var r=G(G({},n),{pageUrl:this.$.getAnonymizedUrl()});i=this.Zi.anonymize(r);return{version:this.ZA,data:G(G({},i),{date:gt()})};case Yt.CustomError:var s=n;return s.message=this.L.anonymizeEmail(s.message),{version:this.ZA,data:G(G({},s),{date:gt()})};default:return null}},t}();!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i,r){window.CSJavascriptBridge.sendTransaction(t,n,i,r)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(Sa||(Sa={}));var Ra,Na,Ta=function(){function t(t,n,i,r,s,e,u){this.QA=t,this.tS=n,this.nS=i,this.iS=r,this.rS=s,this.Ei=e,this.tr=u}return t.prototype.emitWebviewEventToBridge=function(t,n){return W(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a=this;return K(this,(function(f){switch(f.label){case 0:switch(t){case Yt.AnalysisEvent:return[3,1];case Yt.RecordingEvent:return[3,2];case Yt.ChildLogMessage:return[3,3];case Yt.Commands:return[3,4];case Yt.Assets:return[3,5];case Yt.JavascriptError:return[3,7];case Yt.ApiError:return[3,8];case Yt.DetailedApiError:return[3,9]}return[3,10];case 1:return(i=this.nS.transformEvent(n))&&Sa.sendAnalysisEvent(i),[3,11];case 2:return Sa.sendSREvent(n),[3,11];case 3:return Sa.sendLog(n),[3,11];case 4:return nn.tryToExecute("SDKMessageUtils.sendMessage.sendCommandMessage: ".concat(n),(function(){a.sS(n)}))(),[3,11];case 5:return s=(r=n).assets,e=r.serializationId,[4,this.rS.getTransformedAssets(s,e)];case 6:return u=f.sent(),Sa.sendAssets(u,e),[3,11];case 7:return(o=this.iS.transformEvent(Yt.JavascriptError,n))&&(Sa.sendNativeSREvent(G(G({},o),{type:Yc.JAVASCRIPT_ERROR_SR})),Sa.sendAnalysisEvent(G(G({},o),{type:Yc.JAVASCRIPT_ERROR_AN}))),[3,11];case 8:return(h=this.iS.transformEvent(Yt.ApiError,n))&&Sa.sendAnalysisEvent(G(G({},h),{type:Yc.API_ERROR})),[3,11];case 9:return(c=this.iS.transformEvent(Yt.DetailedApiError,n))&&Sa.sendNativeSREvent(G(G({},c),{type:Yc.DETAILED_API_ERROR})),[3,11];case 10:return[3,11];case 11:return[2]}}))}))},t.prototype.sS=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];switch(!0){case csArray.prototype.indexOf.call(ec,r.name)>=0:Sa.sendOptIn();break;case csArray.prototype.indexOf.call(sc,r.name)>=0:this.Ei.emitOptout(),Sa.sendOptOut();break;case csArray.prototype.indexOf.call(ve,r.name)>=0:this.eS(r);break;case csArray.prototype.indexOf.call(to,r.name)>=0:this.uS(r);break;case csArray.prototype.indexOf.call(Ae,r.name)>=0:this.oS(r);break;case csArray.prototype.indexOf.call(Se,r.name)>=0:this.hS(r);break;case csArray.prototype.indexOf.call(Ee,r.name)>=0:this.cS();break;case csArray.prototype.indexOf.call(Zc,r.name)>=0:this.oS(r),this.cS();break;case csArray.prototype.indexOf.call(ah,r.name)>=0:this.tr.addUrlMaskingPattern(r.params[0]);break;case csArray.prototype.indexOf.call(wh,r.name)>=0:this.aS(r);break;default:nn.warn("WebviewBridgeEventEmitter received an unknown command: ".concat(csJSON.stringify(r)))}}},t.prototype.eS=function(t){if(1===t.params.length){var n=t.params[0];if(ce.isValid(n.key,n.value)){var i=this.QA.anonymizeEmail(n.key),r=this.QA.anonymizeEmail(n.value);Sa.sendDynamicVariable(i,r)}}},t.prototype.uS=function(t){if(1===t.params.length){var n=t.params[0];if(Tt(n)){var i={type:Yc.PAGE_VIEW,version:1,data:{url:n}};this.Ei.emitArtificialPageViewEnd(),Sa.sendAnalysisEvent(i),this.Ei.emitAfterArtificialPageView()}}},t.prototype.oS=function(t){if(1===t.params.length){var n=t.params[0];n.value&&(n.revenue=n.value),this.tS.addTransaction(n)}},t.prototype.hS=function(t){if(1===t.params.length){var n=t.params[0];this.tS.addItem(n)}},t.prototype.cS=function(){var t=this.tS.getTransaction(),n=this.tS.getItems();de.isValid(t)&&(Sa.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:"",n.length?n:void 0),this.tS.clear())},t.prototype.aS=function(t){if(!(t.params.length<1)){var n=t.params[0],i=t.params[1]||{};if(Tt(n)&&Ot(i)){var r=fh.buildCustomErrorEvent(n,i),s=this.iS.transformEvent(Yt.CustomError,r);s&&(Sa.sendNativeSREvent(G(G({},s),{type:Yc.CUSTOM_ERROR_SR})),Sa.sendAnalysisEvent(G(G({},s),{type:Yc.CUSTOM_ERROR_AN})))}}},t}(),Oa=function(){function t(t){this.mA=t,this.Sa={}}return t.prototype.handleCommand=function(t){Ct(t)&&this.Ea(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.Sa[t.callbackId];i&&this.ba(i,n)}else for(var r in this.Sa)this.ba(this.Sa[r],n)},t.prototype.Ea=function(t){var n=nt.integer(),i={callbackId:n,initiator:Wt.AfterPageView};this.Sa[n]=t,this.mA.sendToParent(Yt.IntegrationCallback,i)},t.prototype.ba=function(t,n){setTimeout((function(){t(n)}))},t}(),ka=function(){function t(t){this.mA=t,this.Ra={}}return t.prototype.handleCommand=function(t){Ot(t)&&Ct(t.callback)&&this.Ta(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.Ra[i];r&&(delete this.Ra[i],this.ba(r,n.sessionKey))}},t.prototype.Ta=function(t){var n=nt.integer(),i={callbackId:n,initiator:Wt.GetSessionKey};this.Ra[n]=t,this.mA.sendToParent(Yt.IntegrationCallback,i)},t.prototype.ba=function(t,n){setTimeout((function(){t(n)}))},t}(),Ia=function(){function t(t,n,i,r){this.mA=t,this.qA=n,this.Si=i,this.es=r}return t.prototype.handleCommand=function(t){var n=t&&t.withAssets,i=[],r=new Set,s=new Set,e=[];n&&da.isWebViewLocalAssetsSupported()?(this.Si.enable(),this.Si.onAsset((function(t){r.has(t.assetId)||(r.add(t.assetId),csArray.prototype.push.call(i,t))})),this.Si.onStyleSheetFound((function(t){s.has(t.assetId)||(s.add(t.assetId),csArray.prototype.push.call(e,t))}))):(this.Si.disable(),da.isWebViewLocalAssetsSupported()||nn.warn("Local asset is not supported on this browser"));var u=this.es.serialize(document),o=csJSON.stringify(u);if(n){var h=Rh.generate();return this.fS(i,e,h),csJSON.stringify({serializedDom:o,serializationId:h})}return o},t.prototype.fS=function(t,n,i){var r=this;0===n.length?this.BA(t,i):this.vS(t,n,i,(function(t,n){return r.BA(t,n)}))},t.prototype.vS=function(t,n,i,r){var s=this,e=0,u=0,o=new Set(csArray.prototype.map.call(t,(function(t){return t.assetId}))),h=function(t){return!o.has(t)},c=function(i){o.has(i.assetId)||(o.add(i.assetId),csArray.prototype.push.call(n,i),csArray.prototype.push.call(t,i))},a=function(s){for(var h=0,c=s;h<c.length;h++){var a=c[h];o.has(a.assetId)||(o.add(a.assetId),csArray.prototype.push.call(t,a))}++e+u===n.length&&r(t,i)},f=function(s){u++,nn.error("An error occurred while fetching a styleSheet: "+s),e+u===n.length&&r(t,i)};csArray.prototype.forEach.call(n,(function(t){s.qA.getStyleSheetAssets(t.assetId,a,f,h,c)}))},t.prototype.BA=function(t,n){this.mA.sendToParent(Yt.Assets,{assets:t,serializationId:n})},t}(),Ca=function(){function t(){}return t.prototype.serializeShadowRootNode=function(t,n){var i;(null===(i=t.adoptedStyleSheets)||void 0===i?void 0:i.length)>0&&(n.adoptedStyleSheets=this.lS(t.adoptedStyleSheets))},t.prototype.lS=function(t){var n=this;return mi(t,(function(t){return n.Co(t)}))},t.prototype.Co=function(t){var n=[];try{n=mi(t.cssRules,(function(t){return t.cssText}))}catch(t){}return{cssRules:n}},t}(),_a=function(){function t(t,n){this.mA=t,this.Oa=n,this.dS={}}return t.prototype.handleCommand=function(t,n){Ot(t)&&Ct(n)&&this.Ta(t,n)},t.prototype.executePendingCommand=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n)if(this.dS[i]){var r=this.dS[i],s=r[0],e=r[1];s&&(delete this.dS[i],this.ba(n,s,e))}else this.Oa.sendToChildren(Yt.TrackingContextResultMessage,t)},t.prototype.Ta=function(t,n){var i=nt.integer();this.dS[i]=[t,n],this.mA.sendToParent(Yt.TrackingContextRequestMessage,{callbackId:i})},t.prototype.ba=function(t,n,i){setTimeout((function(){var r=Qs(t,n);i(r)}))},t}(),xa="LOCAL_ASSET",Pa="NONE",Ma="ONLY_LOCAL_ASSETS",La="ALL",Da=function(){function t(t){var n,i;this.wS=t,this.yS=new Set,this.pS=Pa;try{var r=null===(i=null===(n=window.CSJavascriptBridge)||void 0===n?void 0:n.getAssetTransformerMode)||void 0===i?void 0:i.call(n);r!==Ma&&r!==La||(this.pS=r)}catch(t){}}return t.prototype.setAssetProcessingMode=function(t){this.pS=t},t.prototype.getTransformedAssets=function(t,n){return W(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a;return K(this,(function(f){switch(f.label){case 0:if(this.pS===Pa)return[2,t];i=[],r=0,s=t,f.label=1;case 1:if(!(r<s.length))return[3,8];if(e=s[r],u=e.assetId,o=this.mS(u),this.pS!==La&&o!==xa)return[3,6];if(h=u,this.gS(u,n)&&(h=this.AS(u,n)),this.yS.has(h))return csArray.prototype.push.call(i,e),[3,7];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.wS.getAssetContent(u)];case 3:return c=f.sent(),this.yS.has(h)?(csArray.prototype.push.call(i,e),[3,7]):(csArray.prototype.push.call(i,G(G({},e),{retrievedAssetContent:c})),this.yS.add(e.assetId),[3,5]);case 4:return a=f.sent(),nn.error("an error occurred while getting data for asset: ".concat(h,": ").concat(a)),csArray.prototype.push.call(i,e),[3,5];case 5:return[3,7];case 6:csArray.prototype.push.call(i,e),f.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},t.prototype.mS=function(t){var n=window.WEBVIEW_SERVER_URL||null;try{return"file:"===new csURL(t).protocol||n&&csString.prototype.startsWith.call(t,n)?xa:"REMOTE_ASSET"}catch(n){nn.error("Error constructing URL (".concat(t,'"): ').concat(n.message))}return"UNKNOWN_ASSET_TYPE"},t.prototype.gS=function(t,n){return n&&csString.prototype.endsWith.call(t,".css")||!1},t.prototype.AS=function(t,n){return"".concat(t,"#").concat(n)},t}(),Ua=["serializeWebView"],ja=["setAssetTransformerMode"],Ha=function(){function t(t,n,i,r,s){this.Zc=t,this.mA=n,this.Oa=i,this.rS=r,this.lt=s}return t.prototype.init=function(){this.SS=new Oa(this.mA),this.ES=new ka(this.mA),this._a=new re,this.bS=new _a(this.mA,this.Oa);var t=new ya(new pa),n=new lr,i=new rs([n,new Ca]);this.RS=new Ia(this.mA,t,n,i),this.NS(),this.lt.isInWebViewContext()&&this.TS()},t.prototype.onAfterPageViewCallback=function(t){this.SS.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.ES.executePendingCallbacks(t)},t.prototype.onParentRecordingStatusChange=function(t){var n={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||mn.ETR_OFF};this._a.executeCallbacks(n)},t.prototype.onTrackingContextResultCallback=function(t){this.bS.executePendingCommand(t)},t.prototype.NS=function(){var t=this;this.Zc.register(se,(function(n){t.SS.handleCommand(n)})),this.Zc.register(ee,(function(n){return t.ES.handleCommand(n)})),this.Zc.register(oe,(function(n,i){t.bS.handleCommand(n,i)})),this.Zc.register(ue,(function(n){return t._a.handleCommand(n)}))},t.prototype.TS=function(){var t=this;this.Zc.register(Ua,(function(n){return t.RS.handleCommand(n)})),this.Zc.register(ja,(function(n){n!==Pa&&n!==Ma&&n!==La||t.rS.setAssetProcessingMode(n)}))},J([tr()],t.prototype,"onParentRecordingStatusChange",null),t}(),qa=function(){function t(){this.OS=52428800,this.kS=31457280,this.IS=0,this.CS=!1,this._S=new Map,this.xS=[]}return t.prototype.getAssetContent=function(t){return W(this,void 0,void 0,(function(){var n,i=this;return K(this,(function(r){return(n=this._S.get(t))?[2,n]:[2,new Promise((function(n,r){csArray.prototype.push.call(i.xS,{assetUrl:t,successCallback:n,errorCallback:r}),i.CS||i.PS()}))]}))}))},t.prototype.PS=function(){return W(this,void 0,void 0,(function(){var t,n,i=this;return K(this,(function(r){switch(r.label){case 0:this.CS=!0,t=function(){var t,r,s,e,u,o,h,c,a,f,v,l;return K(this,(function(d){switch(d.label){case 0:if(t=csArray.prototype.shift.call(n.xS),r=t.assetUrl,s=t.successCallback,e=t.errorCallback,u=n._S.get(r))return s(u),[2,"continue"];d.label=1;case 1:return d.trys.push([1,4,,5]),[4,fetch(r)];case 2:return o=d.sent(),h=o.headers.get("Content-Type"),(c=o.headers.get("Content-Length"))&&Number(c)>n.kS?(l="asset is too big, size = ".concat(c," bytes"),e(l),[2,"continue"]):[4,o.blob()];case 3:return a=d.sent(),(f=new FileReader).onload=function(){var t={data:csString.prototype.split.call(f.result,",")[1],mimeType:h||""};i.IS+=a.size,i.IS>i.OS&&(i.IS=0,i._S.clear()),i._S.set(r,t),s(t)},f.onerror=function(){e("Error converting XHR response to base64")},f.readAsDataURL(a),[3,5];case 4:return v=d.sent(),l="Error downloading resource ".concat(r,": ").concat(v.message),e(l),[3,5];case 5:return[2]}}))},n=this,r.label=1;case 1:return this.xS.length>0?[5,t()]:[3,3];case 2:return r.sent(),[3,1];case 3:return this.CS=!1,[2]}}))}))},t}(),za=function(){function t(t,n,i,r,s,e,u,o){var h=this;this.MS=t,this.Ei=n,this.M=i,this.mA=r,this.EA=s,this.Zc=e,this.lt=u,this.ce=o,this.Vp=function(){h.Zc.start(),h.Gp.start()}}return t.prototype.start=function(){var t,n,i,r,s,e,u,o,h,c,a,f,v=this;this.ce.schedule((function(){t=new qc(H,v.M),n=new oo(t),i=new wt,a=new Hc(i),f=new gc(window.location,a),r=Cc.create(nn.warn),s=new oa(v.M,t,n,v.mA,v.lt)})),this.ce.schedule((function(){if(v.lt.isInWebViewContext()){var t=new Ea,n=new Yo(i,f),r=new Ko(a),s=new ba(f,n,r,i),e=new qa;v.rS=new Da(e);var u=new Ta(i,new ye(i,null,null),t,s,v.rS,v.Ei,r),o=new Aa(v.mA,u);o.init(),v.Ei.addListener(o)}else{var h=new sa(v.mA);v.Ei.addListener(h)}})),this.M.eMerchandisingEnabled&&this.ce.schedule((function(){var n=new aa(v.M,t,f,v.mA);v.MS.addListener(n),n.init(),v.Ei.addListener(n)})),this.ce.schedule((function(){u=new Cr,e=new Vo(v.M)})),ms.isRecordingSupported()&&this.ce.schedule((function(){var t=new Zo(nn),s=new ga(v.M,r,n,i,u,e,t,v.Ei,v.mA,v.EA,v.Zc,v.MS,v.lt,v.ce);v.Ei.addListener(s),v.MS.addListener(s),s.init()})),this.ce.schedule((function(){c=new Jo(v.M,e);var n=new zc(t),i=new Bc(t),r=new Vc(t),s=new Fc(u);h=new bc(n,i,r,s),o=new ea(c,h,v.mA,v.EA)})),this.ce.schedule((function(){h.addListener(o),v.MS.addListener(o),v.Ei.addListener(o),v.Ei.addListener(s)})),this.ce.schedule((function(){var t=new Ha(v.Zc,v.mA,c,v.rS,v.lt);v.MS.addListener(t),t.init()})),this.ce.schedule((function(){o.init(),s.init()})),this.Gp=new ho,this.ce.schedule((function(){v.Gp.onLoad((function(){v.Ei.emitStartTracking()})),v.Vp()}))},t}(),Ba=function(t){function n(n){void 0===n&&(n=500);var i=t.call(this,2500)||this;return i.LS=n,i.DS=!1,i}return F(n,t),n.prototype.onStart=function(){this.US()},n.prototype.onStop=function(){this.buffer.reset(),this.jS&&window.clearInterval(this.jS)},n.prototype.sendToParent=function(t,n){var i;if(this.DS)null===(i=this.HS)||void 0===i||i.call(this,t,n);else{var r=this.buildChildBaseMessage(t,n);this.buffer.addMessage(r)}},n.prototype.onWebViewEvent=function(t){this.HS=t},n.prototype.sendAllMessagesFromBuffer=function(){var t,n=this.buffer.getMessages();if(0!==n.length){for(var i=0,r=n;i<r.length;i++){var s=r[i];null===(t=this.HS)||void 0===t||t.call(this,s.type,s.content)}this.buffer.reset()}},n.prototype.buildChildBaseMessage=function(t,n){return{type:t,content:n}},n.prototype.US=function(){var t=this;this.DS=Sa.isCSJavascriptBridgeDefined(),this.DS?this.sendAllMessagesFromBuffer():this.jS=window.setInterval((function(){t.DS=Sa.isCSJavascriptBridgeDefined(),t.DS&&(t.sendAllMessagesFromBuffer(),window.clearInterval(t.jS))}),this.LS)},n}(ia),Va=function(t){function n(n,i){var r=t.call(this)||this;return r.Qi=n,r.mA=i,r}return F(n,t),n.prototype.onStart=function(){var t=this;this.Qi.subscribe(n.Lr,(function(n){return t.Pr(n)}))},n.prototype.onStop=function(){this.Qi.unsubscribe(n.Lr)},n.prototype.Pr=function(t){this.isStarted&&this.mA.sendToParent(Yt.ApiError,t)},n.Lr="ChildApiErrorsService",n}(Ci),Fa=function(t){function n(n,i){var r=t.call(this)||this;return r.Qi=n,r.mA=i,r}return F(n,t),n.prototype.onStart=function(){var t=this;this.Qi.subscribe(n.Lr,(function(n){return t.Pr(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.Qi.unsubscribe(n.Lr)},n.prototype.Pr=function(t){this.isStarted&&this.mA.sendToParent(Yt.DetailedApiError,t)},n.Lr="ChildDetailedApiErrorsService",n}(Ci),Ga=function(){function t(t,n,i){this.M=t,this.mA=n,this.pA=i}return t.prototype.init=function(){var t,n,i=new lh(this.M),r=new hh(i);(null===(t=this.M.apiErrors.configurableApiErrorRules)||void 0===t?void 0:t.length)&&(n=new rh(this.M));var s=new oh(this.M,r,n),e=new uh(i),u=new sh(this.M,e,n);this.Qi=new Wo(s,u),this.Qi.excludeDomains([ih.CONTENTSQUARE,ih.CLICKTALE]),this.Qi.excludeDomains([ih.FAKE_TRACKER]),this.qS=new Va(this.Qi,this.mA),this.zS=new Fa(this.Qi,this.mA),this.Qi.init(),this.lp()},t.prototype.lp=function(){this.pA.register(ah)},t.prototype.onStartTracking=function(){this.qS.start()},t.prototype.onParentRecordingStatusChange=function(t){this.M.apiErrors.enabled&&(t.isRecording?this.zS.start():this.zS.stop())},t.prototype.onOptout=function(){this.qS.stop(),this.zS.stop()},t}(),Ja=function(t){function n(n,i){var r=t.call(this)||this;return r.$i=n,r.mA=i,r}return F(n,t),n.prototype.onStart=function(){var t=this;this.$i.subscribe(n.Lr,(function(n){return t.Pr(n)}))},n.prototype.onStop=function(){this.$i.unsubscribe(n.Lr)},n.prototype.Pr=function(t){this.isStarted&&this.mA.sendToParent(Yt.JavascriptError,t)},n.Lr="ChildJavaScriptErrorsService",n}(Ci),Wa=function(){function t(t,n,i){this.M=t,this.mA=n,this.pA=i}return t.prototype.init=function(){var t=new qo;this.BS=new Ja(t,this.mA),this.lp()},t.prototype.onStartTracking=function(){this.BS.start()},t.prototype.onOptout=function(){this.BS.stop()},t.prototype.lp=function(){this.M.jsCustomErrorsEnabled&&!this.M.customErrors.enabled&&this.pA.register(wh)},t}(),Ka=function(t){function n(n,i){var r=t.call(this)||this;return r.mA=n,r.Rp=i,r}return F(n,t),n.prototype.init=function(){var t=this;this.Rp.onEvent((function(n){return t.Pr(n)}))},n.prototype.onStart=function(){this.Rp.start()},n.prototype.onStop=function(){this.Rp.stop()},n.prototype.Pr=function(t){this.isStarted&&this.mA.sendToParent(Yt.CustomError,t)},n}(Ci),Ya=function(){function t(t,n,i){this.M=t,this.mA=n,this.pA=i}return t.prototype.init=function(){var t;if(null===(t=this.M.customErrors.consoleMessageLogLevels)||void 0===t?void 0:t.length){var n=new Nh(this.M);this.VS=new Ka(this.mA,n),this.VS.init()}this.lp()},t.prototype.onStartTracking=function(){var t;null===(t=this.VS)||void 0===t||t.start()},t.prototype.onOptout=function(){var t;null===(t=this.VS)||void 0===t||t.stop()},t.prototype.lp=function(){this.pA.register(wh)},t}(),Xa=function(){function t(t,n,i){this.M=t,this.lt=n,this.ce=i}return t.prototype.init=function(){var t,n,i,r,s,e,u,o=this;this.ce.schedule((function(){t=new Lh(o.ce),n=new $c,i=new la;var e=[ac.UXA];o.lt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(e,ac.WVT),r=new Ba):r=new ra(o.M,t,i,n),s=new vc(e)})),this.ce.schedule((function(){e=new ta(s,r),u=new Qc(e)})),this.ce.schedule((function(){u.init()})),this.ce.schedule((function(){if(o.M.apiErrors.enabled){var i=new Ga(o.M,r,e);i.init(),n.addListener(i),t.addListener(i)}if(o.M.jsErrorsEnabled){var s=new Wa(o.M,r,e);s.init(),t.addListener(s)}if(o.M.customErrors.enabled){var u=new Ya(o.M,r,e);u.init(),t.addListener(u)}})),this.ce.schedule((function(){t.addListener(u)})),this.ce.schedule((function(){t.emitInitTracking()})),this.ce.schedule((function(){new za(n,t,o.M,r,i,s,o.lt,o.ce).start()}))},t}(),$a=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.FS=t,this.GS=n,this.JS=i,this.WS=[],this.Y=!1,this.KS=0,this.YS=function(){for(r.KS=0;r.WS.length;){if(r.KS>=r.GS)return void setTimeout(r.YS,r.JS);var t=gt(),n=csArray.prototype.shift.call(r.WS);if(!n)break;r.runTask(n);var i=gt()-t;r.KS+=i}r.Y=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.FS&&!n?(csArray.prototype.push.call(this.WS,t),this.XS()):t()},t.prototype.XS=function(){var t=this;this.Y||(this.Y=!0,setTimeout((function(){t.YS()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.WS,(function(n){t.runTask(n)})),this.WS=[]},t.prototype.clearQueue=function(){this.WS=[]},t.prototype.isEmpty=function(){return 0===this.WS.length},J([hn("TaskScheduler"),ci("runTask")],t.prototype,"runTask",null),J([ci("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),Za=function(){function t(t,n,i){this.M=t,this.lt=n,this.D=i}return t.prototype.start=function(){var t,n,i,r,s;if(!window.UXAnalytics){var e=new $a(!!(null===(t=this.M.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.M.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.M.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new fn(this.lt,this.M);u.init();var o=new dn(this.M,u);if(this.lt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&nn.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(s=window.CSProtectnativeFunctionsLogs)||void 0===s?void 0:s.Critical)return void nn.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new Kc(this.M,u,this.D,e).init()}else if(!this.lt.isTopWindowTracker()&&o.canTrackInChild()){new Xa(this.M,this.lt,e).init()}window.UXAnalytics={},!window.CSFrameCommunication&&Xc.isActivable()&&(window.CSFrameCommunication=Xc,Xc.waitForConnection())}},J([ci("main.start"),hn("main.start")],t.prototype,"start",null),t}(),Qa=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=rt.warn);var r={message:t,errorCode:n,level:i};Sa.sendLog(r)},t}();try{var tf=new ut(window.CS_CONF);window._uxa=window._uxa||[],tf.processOptionOverrides(window._uxa);var nf=new ot(window,tf);nf.init();var rf=new Qt;if(rn=nn,nn.computeIsActive(tf.validationRate),nf.isTopWindowTracker()){var sf=new jt(tf,rf);nn.setStrategy(sf)}else if(nf.isInIframeContext()){var ef=new Zt(tf);nn.setStrategy(ef)}else if(nf.isInWebViewContext()){var uf=new Qa;nn.setStrategy(uf)}void 0===Ra&&(Ra=50),void 0===Na&&(Na=.1),ui=nn.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),ui&&(si=Ra,ei=Na),new Za(tf,nf,rf).start()}catch(zi){}}();